<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Intermarket Barometers - Spartan Research Station</title>
    <style>
        :root {
            --bg-dark: #0a1628;
            --bg-darker: #050b14;
            --gold: #FFD700;
            --green: #00ff88;
            --primary: #0096FF;
            --red: #ff6b6b;
            --orange: #ff9500;
            --yellow: #ffd700;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--bg-darker) 0%, var(--bg-dark) 100%);
            color: var(--green);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: var(--gold);
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        .subtitle {
            text-align: center;
            color: var(--primary);
            font-size: 1.3em;
            margin-bottom: 30px;
        }

        .bluf-section {
            background: rgba(255, 107, 107, 0.1);
            border: 2px solid var(--red);
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .bluf-title {
            color: var(--red);
            font-size: 2em;
            margin-bottom: 15px;
            text-transform: uppercase;
            font-weight: bold;
        }

        .bluf-content {
            color: var(--green);
            font-size: 1.1em;
            line-height: 1.8;
        }

        .composite-score {
            text-align: center;
            background: rgba(0, 150, 255, 0.1);
            border: 3px solid var(--primary);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .score-value {
            font-size: 5em;
            font-weight: bold;
            margin: 20px 0;
        }

        .score-green { color: var(--green); }
        .score-yellow { color: var(--yellow); }
        .score-red { color: var(--red); }

        .score-label {
            font-size: 1.5em;
            color: var(--primary);
        }

        .score-description {
            font-size: 1.2em;
            margin-top: 15px;
            color: var(--green);
        }

        .indicators-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .indicator-card {
            background: rgba(10, 22, 40, 0.8);
            border: 2px solid var(--primary);
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .indicator-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 150, 255, 0.3);
        }

        .indicator-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .indicator-title {
            font-size: 1.3em;
            color: var(--gold);
        }

        .indicator-signal {
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .signal-green {
            background: var(--green);
            color: var(--bg-dark);
        }

        .signal-yellow {
            background: var(--yellow);
            color: var(--bg-dark);
        }

        .signal-red {
            background: var(--red);
            color: white;
        }

        .signal-unknown {
            background: #666;
            color: white;
        }

        .indicator-value {
            font-size: 2em;
            color: var(--primary);
            margin: 10px 0;
        }

        .indicator-description {
            color: var(--green);
            line-height: 1.6;
            font-size: 0.95em;
        }

        .tier-section {
            margin-bottom: 40px;
        }

        .tier-title {
            font-size: 2em;
            color: var(--gold);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--gold);
        }

        .tier-subtitle {
            color: var(--primary);
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        .update-info {
            text-align: center;
            color: var(--primary);
            margin: 20px 0;
            font-size: 1.1em;
        }

        .data-quality {
            display: inline-block;
            padding: 8px 20px;
            background: rgba(0, 255, 136, 0.2);
            border: 2px solid var(--green);
            border-radius: 5px;
            margin: 10px 5px;
            font-weight: bold;
        }

        .loading {
            text-align: center;
            padding: 50px;
            font-size: 1.5em;
            color: var(--primary);
        }

        .error {
            background: rgba(255, 107, 107, 0.2);
            border: 2px solid var(--red);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            color: var(--red);
        }

        .back-button {
            display: inline-block;
            padding: 12px 30px;
            background: linear-gradient(135deg, var(--primary), var(--gold));
            color: var(--bg-dark);
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.5);
        }

        .source-tag {
            display: inline-block;
            font-size: 0.75em;
            color: var(--primary);
            background: rgba(0, 150, 255, 0.1);
            padding: 3px 8px;
            border-radius: 3px;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-button">‚Üê Back to Main Dashboard</a>

        <h1>INTERMARKET BAROMETERS</h1>
        <div class="subtitle">Predicting Market Direction Before It Happens</div>

        <div id="loading" class="loading">
            üîç Loading real-time barometer data from verified sources...<br>
            <small>NO FAKE DATA - All indicators verified</small>
        </div>

        <div id="error" class="error" style="display: none;"></div>

        <div id="content" style="display: none;">
            <!-- BLUF Section -->
            <div class="bluf-section">
                <div class="bluf-title">üìä EXECUTIVE BLUF: Current Market Status</div>
                <div class="bluf-content" id="bluf-content">
                    <!-- Dynamically populated -->
                </div>
            </div>

            <!-- Composite Risk Score -->
            <div class="composite-score">
                <div class="score-label">COMPOSITE RISK BAROMETER</div>
                <div class="score-value" id="score-value">--</div>
                <div class="score-description" id="score-description">Loading...</div>
                <div class="update-info">
                    Last Updated: <span id="last-update">--</span>
                </div>
            </div>

            <!-- Signal Legend -->
            <div style="background: rgba(10, 22, 40, 0.8); border: 2px solid var(--primary); border-radius: 10px; padding: 25px; margin-bottom: 30px;">
                <h2 style="color: var(--gold); margin-bottom: 20px; text-align: center; font-size: 1.8em;">üìä SIGNAL LEGEND</h2>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <!-- GREEN Signal -->
                    <div style="background: rgba(0, 255, 136, 0.1); border: 2px solid var(--green); border-radius: 8px; padding: 20px;">
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <span style="background: var(--green); color: var(--bg-dark); padding: 8px 20px; border-radius: 20px; font-weight: bold; margin-right: 15px;">GREEN</span>
                            <span style="color: var(--green); font-size: 1.5em;">‚úÖ ALL CLEAR</span>
                        </div>
                        <div style="color: var(--green); line-height: 1.6;">
                            <strong>Markets Healthy:</strong><br>
                            ‚Ä¢ Risk appetite strong<br>
                            ‚Ä¢ Volatility low/moderate<br>
                            ‚Ä¢ Credit conditions favorable<br>
                            ‚Ä¢ Economic expansion continuing<br>
                            <strong>Action:</strong> Maintain equity exposure, tactical long opportunities
                        </div>
                    </div>

                    <!-- YELLOW Signal -->
                    <div style="background: rgba(255, 215, 0, 0.1); border: 2px solid var(--yellow); border-radius: 8px; padding: 20px;">
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <span style="background: var(--yellow); color: var(--bg-dark); padding: 8px 20px; border-radius: 20px; font-weight: bold; margin-right: 15px;">YELLOW</span>
                            <span style="color: var(--yellow); font-size: 1.5em;">‚ö†Ô∏è CAUTION</span>
                        </div>
                        <div style="color: var(--yellow); line-height: 1.6;">
                            <strong>Warning Signals Present:</strong><br>
                            ‚Ä¢ Some stress indicators elevated<br>
                            ‚Ä¢ Market breadth deteriorating<br>
                            ‚Ä¢ Economic data mixed<br>
                            ‚Ä¢ Volatility increasing<br>
                            <strong>Action:</strong> Reduce risk, increase defensive positions, monitor closely
                        </div>
                    </div>

                    <!-- RED Signal -->
                    <div style="background: rgba(255, 107, 107, 0.1); border: 2px solid var(--red); border-radius: 8px; padding: 20px;">
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <span style="background: var(--red); color: white; padding: 8px 20px; border-radius: 20px; font-weight: bold; margin-right: 15px;">RED</span>
                            <span style="color: var(--red); font-size: 1.5em;">üö® HIGH RISK</span>
                        </div>
                        <div style="color: var(--red); line-height: 1.6;">
                            <strong>Crisis Conditions:</strong><br>
                            ‚Ä¢ Credit spreads widening sharply<br>
                            ‚Ä¢ Volatility spiking<br>
                            ‚Ä¢ Economic contraction signals<br>
                            ‚Ä¢ Risk-off flows accelerating<br>
                            <strong>Action:</strong> Maximum defensive positioning, capital preservation priority
                        </div>
                    </div>
                </div>

                <!-- Composite Score Interpretation -->
                <div style="margin-top: 25px; padding-top: 20px; border-top: 2px solid var(--primary);">
                    <h3 style="color: var(--primary); margin-bottom: 15px; text-align: center;">Composite Score Interpretation</h3>
                    <div style="display: flex; justify-content: space-around; flex-wrap: wrap; gap: 15px;">
                        <div style="text-align: center;">
                            <div style="color: var(--green); font-weight: bold; font-size: 1.2em;">75-100</div>
                            <div style="color: var(--green);">All Clear</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="color: var(--yellow); font-weight: bold; font-size: 1.2em;">50-74</div>
                            <div style="color: var(--yellow);">Moderate Caution</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="color: var(--orange); font-weight: bold; font-size: 1.2em;">25-49</div>
                            <div style="color: var(--orange);">Elevated Risk</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="color: var(--red); font-weight: bold; font-size: 1.2em;">0-24</div>
                            <div style="color: var(--red);">High Risk</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tier 1: Ultra-Early Warning (6-18 Months) -->
            <div class="tier-section">
                <div class="tier-title">üî¥ TIER 1: Ultra-Early Warning Indicators</div>
                <div class="tier-subtitle">Lead Time: 6-18 Months Before Major Market Moves</div>
                <div class="indicators-grid" id="tier1-indicators"></div>
            </div>

            <!-- Tier 2: Early Warning (3-6 Months) -->
            <div class="tier-section">
                <div class="tier-title">üü° TIER 2: Early Warning Indicators</div>
                <div class="tier-subtitle">Lead Time: 3-6 Months Before Market Turns</div>

                <!-- Tier 2 Explanation -->
                <div style="background: rgba(255, 215, 0, 0.05); border-left: 4px solid var(--yellow); padding: 20px; margin-bottom: 25px; border-radius: 5px;">
                    <h3 style="color: var(--yellow); margin-bottom: 15px; font-size: 1.3em;">üìå Understanding Tier 2 Indicators</h3>
                    <div style="color: var(--green); line-height: 1.8; font-size: 1.05em;">
                        <p style="margin-bottom: 15px;">
                            <strong>Tier 2 indicators bridge the gap between ultra-long-term signals (Tier 1) and short-term tactical timing (Tier 3).</strong>
                            These are the "real economy" indicators that show what's actually happening in industry, trade, and commodities.
                        </p>

                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px; margin-top: 15px;">
                            <div>
                                <strong style="color: var(--gold);">üî∂ Copper/Gold Ratio:</strong><br>
                                Known as "Dr. Copper" - copper is used in everything from buildings to electronics.
                                When copper rises vs gold, the economy is expanding. When it falls, recession approaches.
                                <strong>Current warning at 0.00123 suggests economic slowdown ahead (3-6 months).</strong>
                            </div>

                            <div>
                                <strong style="color: var(--gold);">üî∂ Baltic Dry Index:</strong><br>
                                Measures the cost to ship raw materials globally. Rising = strong demand for goods.
                                Falling = weakening global trade. Leading indicator of manufacturing and GDP changes.
                            </div>

                            <div>
                                <strong style="color: var(--gold);">üî∂ Market Breadth:</strong><br>
                                Shows how many stocks are participating in the rally. Strong breadth = healthy market.
                                Narrow breadth (few stocks up) = warning that rally is fragile and may reverse soon.
                            </div>
                        </div>

                        <p style="margin-top: 20px; padding: 15px; background: rgba(0, 150, 255, 0.1); border-radius: 5px;">
                            <strong style="color: var(--primary);">üí° Trading Strategy:</strong>
                            When Tier 2 turns RED, you have 3-6 months to adjust positions. Reduce cyclical stocks (industrials, materials),
                            increase defensive positions (utilities, consumer staples), and prepare for Tier 3 confirmation.
                        </p>
                    </div>
                </div>

                <div class="indicators-grid" id="tier2-indicators"></div>
            </div>

            <!-- Tier 3: Short-Term Signals (1-3 Months) -->
            <div class="tier-section">
                <div class="tier-title">üü¢ TIER 3: Short-Term Signal Indicators</div>
                <div class="tier-subtitle">Lead Time: 1-3 Months Tactical Timing</div>

                <!-- Tier 3 Explanation -->
                <div style="background: rgba(0, 255, 136, 0.05); border-left: 4px solid var(--green); padding: 20px; margin-bottom: 25px; border-radius: 5px;">
                    <h3 style="color: var(--green); margin-bottom: 15px; font-size: 1.3em;">üìå Understanding Tier 3 Indicators</h3>
                    <div style="color: var(--green); line-height: 1.8; font-size: 1.05em;">
                        <p style="margin-bottom: 15px;">
                            <strong>Tier 3 indicators are your tactical timing tools.</strong> These move fastest and give you 1-3 months warning
                            before significant market moves. Use these to fine-tune entry/exit timing after Tier 1 and Tier 2 have set the strategic direction.
                        </p>

                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px; margin-top: 15px;">
                            <div>
                                <strong style="color: var(--gold);">üî∏ AUD/JPY (Risk Barometer):</strong><br>
                                Australian dollar = risk-on (commodities, growth). Japanese yen = safe haven (fear).
                                <strong>Above 103 = risk-on, buy stocks. Below 98 = risk-off, reduce exposure. Below 95 = crisis mode.</strong>
                                Currently at 99.17 (neutral-cautious zone).
                            </div>

                            <div>
                                <strong style="color: var(--gold);">üî∏ VIX (Fear Gauge):</strong><br>
                                Measures expected stock market volatility. VIX &lt;15 = complacency (danger of surprise drop).
                                VIX 15-25 = normal. <strong>VIX &gt;30 = panic (often a buy signal)</strong>. VIX &gt;40 = crisis.
                                Currently 19.50 = healthy moderate volatility.
                            </div>

                            <div>
                                <strong style="color: var(--gold);">üî∏ Put/Call Ratios:</strong><br>
                                Shows whether traders are buying protection (puts) or betting on gains (calls).
                                High ratio (&gt;1.1) = extreme fear = contrarian buy signal.
                                Low ratio (&lt;0.7) = extreme greed = warning of pullback.
                            </div>

                            <div>
                                <strong style="color: var(--gold);">üî∏ Emerging Markets:</strong><br>
                                EM stocks fall FIRST when global risk appetite weakens (2-6 weeks lead time).
                                If EEM (emerging markets ETF) breaks down while US stocks still rising = warning.
                                EM strength = global growth intact.
                            </div>
                        </div>

                        <p style="margin-top: 20px; padding: 15px; background: rgba(0, 150, 255, 0.1); border-radius: 5px;">
                            <strong style="color: var(--primary);">üí° Trading Strategy:</strong>
                            Tier 3 is for <strong>timing your entries and exits</strong>. If Tier 1 and Tier 2 say "reduce risk,"
                            wait for Tier 3 confirmation (AUD/JPY breaks below 98, VIX spikes above 25) before selling.
                            If all tiers GREEN, use Tier 3 pullbacks (VIX spike, AUD/JPY dip) as buying opportunities.
                        </p>

                        <p style="margin-top: 15px; padding: 15px; background: rgba(255, 215, 0, 0.1); border-radius: 5px; border: 1px solid var(--yellow);">
                            <strong style="color: var(--yellow);">‚ö†Ô∏è WARNING:</strong>
                            <strong>Never use Tier 3 alone!</strong> VIX can stay low for months before a crash (2007, 2020).
                            AUD/JPY can give false signals. Always combine Tier 3 with Tier 1 and Tier 2 for complete picture.
                            <strong>All 3 tiers RED = high probability of major market decline within 1-6 months.</strong>
                        </p>
                    </div>
                </div>

                <div class="indicators-grid" id="tier3-indicators"></div>
            </div>

            <!-- HOW TO READ THE THREE TIERS: Simple Guide -->
            <div style="background: rgba(0, 150, 255, 0.1); border: 3px solid var(--primary); border-radius: 15px; padding: 30px; margin: 40px 0;">
                <h2 style="color: var(--gold); text-align: center; font-size: 2em; margin-bottom: 15px;">
                    üéì HOW TO READ THE THREE TIERS (Simple Guide)
                </h2>
                <div style="text-align: center; margin-bottom: 25px;">
                    <a href="barometers_table.html" style="display: inline-block; background: var(--primary); color: white; padding: 12px 30px; border-radius: 8px; text-decoration: none; font-weight: bold; transition: all 0.3s; font-size: 1.1em;" onmouseover="this.style.background='var(--gold)'; this.style.color='var(--bg-dark)';" onmouseout="this.style.background='var(--primary)'; this.style.color='white';">
                        üìñ View as Standalone Page (Clean Version)
                    </a>
                </div>

                <div style="background: rgba(255, 215, 0, 0.1); padding: 20px; border-radius: 10px; margin-bottom: 30px; border-left: 5px solid var(--yellow);">
                    <h3 style="color: var(--yellow); font-size: 1.4em; margin-bottom: 15px;">Think of it Like Weather Forecasting üå§Ô∏è</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; color: var(--green); font-size: 1.1em;">
                        <div>
                            <strong style="color: var(--gold);">Tier 1 (6-18 months)</strong><br>
                            üå°Ô∏è <strong>Climate Patterns</strong><br>
                            "Is hurricane season forming?"<br>
                            <span style="color: var(--primary);">‚Üí Strategic Direction</span>
                        </div>
                        <div>
                            <strong style="color: var(--gold);">Tier 2 (3-6 months)</strong><br>
                            ‚õàÔ∏è <strong>Regional Weather</strong><br>
                            "Is a storm building offshore?"<br>
                            <span style="color: var(--primary);">‚Üí Confirmation</span>
                        </div>
                        <div>
                            <strong style="color: var(--gold);">Tier 3 (1-3 months)</strong><br>
                            üåßÔ∏è <strong>Today's Forecast</strong><br>
                            "Will it rain today?"<br>
                            <span style="color: var(--primary);">‚Üí Tactical Timing</span>
                        </div>
                    </div>
                </div>

                <!-- SCENARIO TABLE -->
                <table style="width: 100%; border-collapse: collapse; background: rgba(5, 11, 20, 0.8); border-radius: 10px; overflow: hidden;">
                    <thead>
                        <tr style="background: var(--bg-dark); color: var(--gold); font-size: 1.2em;">
                            <th style="padding: 15px; border: 1px solid var(--primary);">Tier 1<br><span style="font-size: 0.8em; color: var(--green);">(6-18 mo)</span></th>
                            <th style="padding: 15px; border: 1px solid var(--primary);">Tier 2<br><span style="font-size: 0.8em; color: var(--green);">(3-6 mo)</span></th>
                            <th style="padding: 15px; border: 1px solid var(--primary);">Tier 3<br><span style="font-size: 0.8em; color: var(--green);">(1-3 mo)</span></th>
                            <th style="padding: 15px; border: 1px solid var(--primary);">What It Means</th>
                            <th style="padding: 15px; border: 1px solid var(--primary);">What You Should Do</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- SCENARIO 1: All Green -->
                        <tr style="background: rgba(0, 255, 136, 0.05);">
                            <td style="padding: 20px; border: 1px solid rgba(0, 255, 136, 0.3); text-align: center;">
                                <div style="font-size: 2em;">‚úÖ</div>
                                <div style="color: var(--green); font-weight: bold;">GREEN</div>
                            </td>
                            <td style="padding: 20px; border: 1px solid rgba(0, 255, 136, 0.3); text-align: center;">
                                <div style="font-size: 2em;">‚úÖ</div>
                                <div style="color: var(--green); font-weight: bold;">GREEN</div>
                            </td>
                            <td style="padding: 20px; border: 1px solid rgba(0, 255, 136, 0.3); text-align: center;">
                                <div style="font-size: 2em;">‚úÖ</div>
                                <div style="color: var(--green); font-weight: bold;">GREEN</div>
                            </td>
                            <td style="padding: 20px; border: 1px solid rgba(0, 255, 136, 0.3); color: var(--green); line-height: 1.6;">
                                <strong style="font-size: 1.2em;">üéâ ALL CLEAR!</strong><br>
                                Everything healthy. Markets rising. No warnings anywhere.
                            </td>
                            <td style="padding: 20px; border: 1px solid rgba(0, 255, 136, 0.3); color: var(--green); line-height: 1.6;">
                                <strong style="color: var(--gold);">üí∞ Stay 100% Invested</strong><br>
                                ‚Ä¢ Buy dips aggressively<br>
                                ‚Ä¢ Markets are safe<br>
                                ‚Ä¢ Risk-on environment
                            </td>
                        </tr>

                        <!-- SCENARIO 2: Tier 1 Red, Others Green -->
                        <tr style="background: rgba(255, 215, 0, 0.05);">
                            <td style="padding: 20px; border: 1px solid rgba(255, 215, 0, 0.3); text-align: center;">
                                <div style="font-size: 2em;">üö®</div>
                                <div style="color: var(--red); font-weight: bold;">RED</div>
                            </td>
                            <td style="padding: 20px; border: 1px solid rgba(255, 215, 0, 0.3); text-align: center;">
                                <div style="font-size: 2em;">‚úÖ</div>
                                <div style="color: var(--green); font-weight: bold;">GREEN</div>
                            </td>
                            <td style="padding: 20px; border: 1px solid rgba(255, 215, 0, 0.3); text-align: center;">
                                <div style="font-size: 2em;">‚úÖ</div>
                                <div style="color: var(--green); font-weight: bold;">GREEN</div>
                            </td>
                            <td style="padding: 20px; border: 1px solid rgba(255, 215, 0, 0.3); color: var(--yellow); line-height: 1.6;">
                                <strong style="font-size: 1.2em;">‚ö†Ô∏è EARLY WARNING</strong><br>
                                Crisis building but not here yet. Markets still calm. You have 6-12 months.<br>
                                <strong style="color: var(--red);">Example: Mid-2007 before 2008 crash</strong>
                            </td>
                            <td style="padding: 20px; border: 1px solid rgba(255, 215, 0, 0.3); color: var(--yellow); line-height: 1.6;">
                                <strong style="color: var(--gold);">‚¨áÔ∏è Reduce to 70% Stocks</strong><br>
                                ‚Ä¢ Build 30% cash<br>
                                ‚Ä¢ Start defensive positions<br>
                                ‚Ä¢ Don't panic, but prepare
                            </td>
                        </tr>

                        <!-- SCENARIO 3: Tier 1 & 2 Red, Tier 3 Green -->
                        <tr style="background: rgba(255, 149, 0, 0.05);">
                            <td style="padding: 20px; border: 1px solid rgba(255, 149, 0, 0.3); text-align: center;">
                                <div style="font-size: 2em;">üö®</div>
                                <div style="color: var(--red); font-weight: bold;">RED</div>
                            </td>
                            <td style="padding: 20px; border: 1px solid rgba(255, 149, 0, 0.3); text-align: center;">
                                <div style="font-size: 2em;">üö®</div>
                                <div style="color: var(--red); font-weight: bold;">RED</div>
                            </td>
                            <td style="padding: 20px; border: 1px solid rgba(255, 149, 0, 0.3); text-align: center;">
                                <div style="font-size: 2em;">‚úÖ</div>
                                <div style="color: var(--green); font-weight: bold; opacity: 0.5;">GREEN</div>
                                <div style="color: var(--red); font-size: 0.9em;">(False signal!)</div>
                            </td>
                            <td style="padding: 20px; border: 1px solid rgba(255, 149, 0, 0.3); color: var(--orange); line-height: 1.6;">
                                <strong style="font-size: 1.2em;">üö® MAJOR RISK BUILDING</strong><br>
                                Markets in denial! VIX calm but danger everywhere. Crisis 3-6 months away.<br>
                                <strong style="color: var(--red);">Example: Early 2008, VIX still low!</strong>
                            </td>
                            <td style="padding: 20px; border: 1px solid rgba(255, 149, 0, 0.3); color: var(--orange); line-height: 1.6;">
                                <strong style="color: var(--gold);">‚¨áÔ∏è‚¨áÔ∏è Reduce to 30-40% Stocks</strong><br>
                                ‚Ä¢ 60-70% cash/bonds<br>
                                ‚Ä¢ Maximum defensive<br>
                                ‚Ä¢ Don't wait for Tier 3!
                            </td>
                        </tr>

                        <!-- SCENARIO 4: All Red -->
                        <tr style="background: rgba(255, 107, 107, 0.1); border: 2px solid var(--red);">
                            <td style="padding: 20px; border: 1px solid var(--red); text-align: center;">
                                <div style="font-size: 2em;">üö®</div>
                                <div style="color: var(--red); font-weight: bold;">RED</div>
                            </td>
                            <td style="padding: 20px; border: 1px solid var(--red); text-align: center;">
                                <div style="font-size: 2em;">üö®</div>
                                <div style="color: var(--red); font-weight: bold;">RED</div>
                            </td>
                            <td style="padding: 20px; border: 1px solid var(--red); text-align: center;">
                                <div style="font-size: 2em;">üö®</div>
                                <div style="color: var(--red); font-weight: bold;">RED</div>
                            </td>
                            <td style="padding: 20px; border: 1px solid var(--red); color: var(--red); line-height: 1.6;">
                                <strong style="font-size: 1.3em;">üî¥ CRISIS MODE!</strong><br>
                                Everything collapsing NOW. Markets crashing. Get defensive immediately.<br>
                                <strong style="color: var(--yellow);">Example: Sept 2008, March 2020</strong>
                            </td>
                            <td style="padding: 20px; border: 1px solid var(--red); color: var(--red); line-height: 1.6;">
                                <strong style="color: var(--gold); font-size: 1.2em;">üõ°Ô∏è 0-20% Stocks MAX</strong><br>
                                ‚Ä¢ 80-100% cash/bonds<br>
                                ‚Ä¢ Capital preservation<br>
                                ‚Ä¢ <strong>Survival mode</strong>
                            </td>
                        </tr>

                        <!-- SCENARIO 5: Current Situation (68/100 Yellow) -->
                        <tr style="background: rgba(255, 215, 0, 0.15); border: 3px solid var(--yellow);">
                            <td style="padding: 20px; border: 1px solid var(--yellow); text-align: center;">
                                <div style="font-size: 2em;">‚ö†Ô∏è</div>
                                <div style="color: var(--yellow); font-weight: bold;">MIXED</div>
                                <div style="font-size: 0.9em; color: var(--green);">Mostly okay</div>
                            </td>
                            <td style="padding: 20px; border: 1px solid var(--yellow); text-align: center;">
                                <div style="font-size: 2em;">‚ö†Ô∏è</div>
                                <div style="color: var(--yellow); font-weight: bold;">WEAK</div>
                                <div style="font-size: 0.9em; color: var(--orange);">Copper/gold low</div>
                            </td>
                            <td style="padding: 20px; border: 1px solid var(--yellow); text-align: center;">
                                <div style="font-size: 2em;">‚ö†Ô∏è</div>
                                <div style="color: var(--yellow); font-weight: bold;">MIXED</div>
                                <div style="font-size: 0.9em; color: var(--green);">VIX calm</div>
                            </td>
                            <td style="padding: 20px; border: 1px solid var(--yellow); color: var(--yellow); line-height: 1.6;">
                                <strong style="font-size: 1.3em; color: var(--gold);">üëâ THIS IS YOU RIGHT NOW (68/100)</strong><br>
                                <strong>‚ö†Ô∏è CAUTION ZONE</strong><br>
                                Not crisis, but warning signs building. Economic weakness detected.
                            </td>
                            <td style="padding: 20px; border: 1px solid var(--yellow); color: var(--yellow); line-height: 1.6;">
                                <strong style="color: var(--gold);">‚¨áÔ∏è Reduce to 70-80% Stocks</strong><br>
                                ‚Ä¢ Build 20-30% cash<br>
                                ‚Ä¢ Add defensive stocks<br>
                                ‚Ä¢ Watch for deterioration
                            </td>
                        </tr>
                    </tbody>
                </table>

                <!-- KEY LESSON -->
                <div style="background: rgba(255, 107, 107, 0.15); border: 3px solid var(--red); border-radius: 10px; padding: 25px; margin-top: 30px;">
                    <h3 style="color: var(--red); font-size: 1.5em; margin-bottom: 15px; text-align: center;">
                        üö® NEVER USE TIER 3 ALONE! Here's Why:
                    </h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; color: var(--green); font-size: 1.05em; line-height: 1.7;">
                        <div>
                            <strong style="color: var(--gold);">‚ùå 2007-2008 Example:</strong><br>
                            VIX stayed LOW for MONTHS while crisis built.<br>
                            <span style="color: var(--red);">If you only watched Tier 3, you'd get crushed!</span><br>
                            <strong style="color: var(--green);">Tier 1 warned 12 months early ‚úÖ</strong>
                        </div>
                        <div>
                            <strong style="color: var(--gold);">‚ùå 2020 COVID Example:</strong><br>
                            AUD/JPY bounced mid-crisis (false recovery).<br>
                            <span style="color: var(--red);">If you bought the bounce, you lost 30% more!</span><br>
                            <strong style="color: var(--green);">Tier 1/2 stayed RED (correct!) ‚úÖ</strong>
                        </div>
                        <div>
                            <strong style="color: var(--gold);">‚úÖ The Right Way:</strong><br>
                            <strong style="color: var(--primary);">Tier 1/2 = STRATEGY</strong> (bull or bear?)<br>
                            <strong style="color: var(--primary);">Tier 3 = TIMING</strong> (when to exit?)<br>
                            <strong style="color: var(--yellow);">Use ALL THREE together!</strong>
                        </div>
                    </div>
                </div>

                <!-- SIMPLE RULE -->
                <div style="background: linear-gradient(135deg, rgba(0, 150, 255, 0.2), rgba(157, 78, 221, 0.2)); border: 3px solid var(--primary); border-radius: 15px; padding: 30px; margin-top: 30px; text-align: center;">
                    <h3 style="color: var(--gold); font-size: 2em; margin-bottom: 15px;">
                        üìù THE SIMPLE RULE (Memorize This!)
                    </h3>
                    <div style="color: var(--green); font-size: 1.3em; line-height: 2; font-weight: bold;">
                        ‚úÖ ALL 3 TIERS GREEN = Buy stocks aggressively<br>
                        ‚ö†Ô∏è ANY 1 TIER RED = Start reducing (70% stocks)<br>
                        üö® ANY 2 TIERS RED = Go defensive (30-40% stocks)<br>
                        üî¥ ALL 3 TIERS RED = Cash out NOW (0-20% stocks max)
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // API endpoint
        const API_URL = 'http://localhost:9001/api/barometers/latest';

        // Indicator definitions
        const TIER1_INDICATORS = [
            {
                key: 'hy_spread',
                title: 'High Yield Spreads',
                unit: ' bps',
                description: 'Credit spreads provide 6-18 months warning. Normal: 300-500 bps. Warning: >600 bps. Crisis: >1000 bps.',
                source: 'FRED BAMLH0A0HYM2',
                signal_key: 'credit_signal'
            },
            {
                key: 'ig_spread',
                title: 'Investment Grade Spreads',
                unit: ' bps',
                description: 'IG spreads widen before equity selloffs. Normal: 100-180 bps. Warning: >200 bps. Crisis: >300 bps.',
                source: 'FRED BAMLC0A4CBBB',
                signal_key: 'credit_signal'
            },
            {
                key: 'yield_curve_10y2y',
                title: 'Yield Curve (10Y-2Y)',
                unit: ' bps',
                format: (val) => (val * 100).toFixed(2),
                description: 'Predicted every recession since 1955. Inverted (<0) = 60-85% recession probability within 12-18 months.',
                source: 'FRED Calculated',
                signal_key: 'curve_signal'
            }
        ];

        const TIER2_INDICATORS = [
            {
                key: 'copper_gold_ratio',
                title: 'Copper/Gold Ratio',
                format: (val) => val.toFixed(8),
                description: 'Dr. Copper economic diagnosis. Normal: 0.0020-0.0035. Warning: <0.0015. Crisis: <0.0010.',
                source: 'Yahoo Calculated',
                signal_key: 'copper_gold_signal'
            },
            {
                key: 'copper_price',
                title: 'Copper Price',
                unit: ' $/lb',
                format: (val) => val.toFixed(4),
                description: 'Copper powers industry. Rising = economic expansion. Falling = contraction ahead.',
                source: 'Yahoo HG=F',
                signal_key: 'copper_gold_signal'
            },
            {
                key: 'gold_price',
                title: 'Gold Price',
                unit: ' $/oz',
                format: (val) => val.toFixed(2),
                description: 'Safe haven asset. Rising = fear/uncertainty. Falling = risk appetite.',
                source: 'Yahoo GC=F',
                signal_key: 'copper_gold_signal'
            }
        ];

        const TIER3_INDICATORS = [
            {
                key: 'aud_jpy',
                title: 'AUD/JPY Exchange Rate',
                format: (val) => val.toFixed(4),
                description: 'Ultimate risk-on/risk-off pair. >103 = risk-on. 98-102 = neutral. <98 = risk-off. <95 = crisis.',
                source: 'Yahoo AUDJPY=X',
                signal_key: 'audjpy_signal'
            },
            {
                key: 'vix',
                title: 'VIX (Volatility Index)',
                format: (val) => val.toFixed(2),
                description: '<12 = complacency. 12-20 = stable. 20-30 = normal vol. >30 = corrections. >40 = major downturns.',
                source: 'FRED VIXCLS',
                signal_key: 'vix_signal'
            },
            {
                key: 'sp500',
                title: 'S&P 500 Index',
                format: (val) => val.toFixed(2),
                description: 'Broad US equity market benchmark. Compare with barometers for divergences.',
                source: 'Yahoo ^GSPC',
                signal_key: 'em_signal'
            },
            {
                key: 'eem_price',
                title: 'Emerging Markets (EEM)',
                unit: ' $',
                format: (val) => val.toFixed(2),
                description: 'EM markets fall first when global risk appetite wanes. 2-6 weeks lead time.',
                source: 'Yahoo EEM',
                signal_key: 'em_signal'
            }
        ];

        function createIndicatorCard(indicator, data) {
            const value = data[indicator.key];
            if (value === null || value === undefined) {
                return `
                    <div class="indicator-card">
                        <div class="indicator-header">
                            <div class="indicator-title">${indicator.title}</div>
                            <div class="indicator-signal signal-unknown">NO DATA</div>
                        </div>
                        <div class="indicator-value">Data Unavailable</div>
                        <div class="indicator-description">${indicator.description}</div>
                        <div class="source-tag">‚ö†Ô∏è Data source temporarily unavailable</div>
                    </div>
                `;
            }

            const signal = data[indicator.signal_key] || 'UNKNOWN';
            const signalClass = `signal-${signal.toLowerCase()}`;

            // Convert to number if it's a string
            const numValue = typeof value === 'string' ? parseFloat(value) : value;

            // Format the value
            let formattedValue;
            if (indicator.format) {
                formattedValue = indicator.format(numValue);
            } else {
                formattedValue = numValue.toFixed(2);
            }

            const unit = indicator.unit || '';

            return `
                <div class="indicator-card">
                    <div class="indicator-header">
                        <div class="indicator-title">${indicator.title}</div>
                        <div class="indicator-signal ${signalClass}">${signal}</div>
                    </div>
                    <div class="indicator-value">${formattedValue}${unit}</div>
                    <div class="indicator-description">${indicator.description}</div>
                    <div class="source-tag">üì° ${indicator.source}</div>
                </div>
            `;
        }

        function updateBLUF(data) {
            const score = data.composite_score;
            const status = data.risk_status;

            let blufText = `<strong>COMPOSITE RISK SCORE: ${score}/100 - ${status}</strong><br><br>`;

            if (score >= 75) {
                blufText += `‚úÖ Markets showing healthy conditions across most indicators. `;
            } else if (score >= 50) {
                blufText += `‚ö†Ô∏è Moderate caution warranted. Some warning signals present. `;
            } else if (score >= 25) {
                blufText += `üî∂ Elevated risk detected. Multiple indicators in caution zones. `;
            } else {
                blufText += `üö® HIGH RISK: Multiple critical warnings across indicators. `;
            }

            // Add specific warnings
            const warnings = [];
            if (data.copper_gold_signal === 'RED') {
                warnings.push('Copper/Gold ratio at crisis levels');
            }
            if (data.credit_signal === 'RED') {
                warnings.push('Credit spreads widening significantly');
            }
            if (data.curve_signal === 'RED') {
                warnings.push('Yield curve inverted (recession warning)');
            }
            if (data.vix_signal === 'RED') {
                warnings.push('Elevated volatility detected');
            }

            if (warnings.length > 0) {
                blufText += `<br><br><strong>‚ö†Ô∏è Active Warnings:</strong><ul style="margin-top: 10px;">`;
                warnings.forEach(w => blufText += `<li>${w}</li>`);
                blufText += `</ul>`;
            }

            blufText += `<br><br><em>All data from verified sources (FRED, Yahoo Finance). NO FAKE DATA.</em>`;

            document.getElementById('bluf-content').innerHTML = blufText;
        }

        function updateCompositeScore(data) {
            const score = data.composite_score;
            const scoreElement = document.getElementById('score-value');
            const descElement = document.getElementById('score-description');

            scoreElement.textContent = score + '/100';

            if (score >= 75) {
                scoreElement.className = 'score-value score-green';
                descElement.textContent = 'ALL CLEAR - Markets showing healthy conditions';
            } else if (score >= 50) {
                scoreElement.className = 'score-value score-yellow';
                descElement.textContent = 'MODERATE CAUTION - Some warning signals present';
            } else if (score >= 25) {
                scoreElement.className = 'score-value score-yellow';
                descElement.textContent = 'CAUTION - Multiple indicators showing stress';
            } else {
                scoreElement.className = 'score-value score-red';
                descElement.textContent = 'HIGH RISK - Critical warnings across multiple indicators';
            }

            // Update timestamp
            const timestamp = new Date(data.timestamp);
            document.getElementById('last-update').textContent = timestamp.toLocaleString();
        }

        async function loadBarometers() {
            try {
                const response = await fetch(API_URL);

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const data = await response.json();

                // Hide loading, show content
                document.getElementById('loading').style.display = 'none';
                document.getElementById('content').style.display = 'block';
                document.getElementById('error').style.display = 'none';

                // Update BLUF
                updateBLUF(data);

                // Update composite score
                updateCompositeScore(data);

                // Populate Tier 1 indicators
                const tier1HTML = TIER1_INDICATORS.map(ind => createIndicatorCard(ind, data)).join('');
                document.getElementById('tier1-indicators').innerHTML = tier1HTML;

                // Populate Tier 2 indicators
                const tier2HTML = TIER2_INDICATORS.map(ind => createIndicatorCard(ind, data)).join('');
                document.getElementById('tier2-indicators').innerHTML = tier2HTML;

                // Populate Tier 3 indicators
                const tier3HTML = TIER3_INDICATORS.map(ind => createIndicatorCard(ind, data)).join('');
                document.getElementById('tier3-indicators').innerHTML = tier3HTML;

            } catch (error) {
                console.error('Error loading barometers:', error);
                document.getElementById('loading').style.display = 'none';
                document.getElementById('error').style.display = 'block';
                document.getElementById('error').innerHTML = `
                    <strong>‚ùå Error Loading Barometers</strong><br><br>
                    ${error.message}<br><br>
                    <strong>Troubleshooting:</strong><br>
                    1. Ensure barometers API is running: <code>python3 barometers_api.py</code><br>
                    2. Check API endpoint: <a href="${API_URL}" target="_blank">${API_URL}</a><br>
                    3. Verify FRED API key is configured in <code>.env.barometers</code><br>
                    4. See <code>BAROMETERS_API_SETUP.md</code> for setup instructions
                `;
            }
        }

        // Load barometers on page load
        loadBarometers();

        // Auto-refresh every 5 minutes (API updates every 15 minutes)
        setInterval(loadBarometers, 5 * 60 * 1000);
    </script>
</body>
</html>
