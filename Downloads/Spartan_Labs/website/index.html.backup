<!DOCTYPE html>
<html lang="en">
<head>
    <!-- ULTRA-AGGRESSIVE Cache Prevention -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate, max-age=0, post-check=0, pre-check=0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="cache-control" content="max-age=0">
    <meta name="last-modified" content="2025-10-24 15:05:00">
    <meta name="build-version" content="v2.3-HIGHLIGHTS-SECTION-ADDED">
    <!-- NEW: Highlights section with scrollable key insights from all tools - 2025-10-24 15:05 -->

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spartan Research Station - Global Market Intelligence Network</title>

    <!-- üöÄ RAPID LOADING: Resource Hints -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- üöÄ RAPID LOADING: Optimized Font Loading -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="spartan_theme.css">

    <!-- üöÄ RAPID LOADING: Critical Scripts -->
    <script src="spartan_rapid_loader.js" defer></script>
    <script src="spartan_validator.js" defer></script>

    <!-- Market Regime Component Scripts -->
    <script src="data_validator.js"></script>
    <script src="real_data_fetcher.js"></script>
    <script src="market_regime_component.js"></script>

    <!-- PostgreSQL Database API (replaces symbols_database.json) -->
    <script src="database_api.js"></script>

    <!-- Claude AI Chat Widget - Intelligent symbol search and analysis -->
    <script src="claude_chat.js"></script>

    <style>
        :root {
            /* Spartan Color Palette */
            --primary-color: #8B0000;        /* Spartan Red (Dark Red) */
            --secondary-color: #B22222;      /* Spartan Firebrick */
            --accent-color: #DC143C;         /* Spartan Crimson */
            --bg-dark: #0a1628;
            --bg-darker: #050b14;
            --bg-card: #12203a;
            --text-primary: #ffffff;
            --text-secondary: #b0b8c8;
            --border-color: #1e3a5f;
            --hover-glow: rgba(139, 0, 0, 0.3);  /* Spartan Red glow */
            --gold: #DC143C;
            --green: #228B22;                /* Forest Green */
            --blue: #000080;                 /* Navy Blue */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, var(--bg-dark) 0%, #1a1f3a 50%, #0a0e27 100%);
            color: var(--text-primary);
            min-height: 100vh;
            position: relative;
            padding-top: 100px; /* Space for pinned market regime header */
        }

        /* Header */
        .header {
            background: rgba(18, 32, 58, 0.98);
            backdrop-filter: blur(20px);
            padding: 20px 40px;
            border-bottom: 2px solid rgba(139, 0, 0, 0.3);  /* Spartan Red */
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-title {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header-title img {
            height: 50px;
        }

        .header-title h1 {
            font-size: 1.8em;
            color: var(--text-primary);
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        .header-subtitle {
            color: var(--text-secondary);
            font-size: 0.9em;
            margin-top: 4px;
        }

        .header-stats {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 1.6em;
            font-weight: 700;
            color: var(--gold);
            display: block;
        }

        .stat-label {
            font-size: 0.75em;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Controls */
        .controls {
            background: rgba(18, 32, 58, 0.95);
            padding: 15px 40px;
            border-bottom: 1px solid var(--border-color);
        }

        .controls-content {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            min-width: 300px;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 12px 45px 12px 20px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 0.95em;
            transition: all 0.2s;
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .search-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            font-size: 1.2em;
        }

        .filter-btn {
            padding: 12px 20px;
            background: transparent;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-secondary);
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
        }

        .filter-btn:hover, .filter-btn.active {
            background: rgba(139, 0, 0, 0.1);  /* Spartan Red */
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .view-toggle {
            display: flex;
            gap: 5px;
            background: var(--bg-card);
            padding: 4px;
            border-radius: 8px;
        }

        .view-btn {
            padding: 8px 16px;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s;
            font-size: 0.9em;
        }

        .view-btn.active {
            background: var(--primary-color);
            color: white;
        }

        /* Main Container */
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 30px 40px;
        }

        /* Network Canvas */
        #networkCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        /* Flashcard Grid */
        .flashcard-network {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
            position: relative;
            z-index: 2;
        }

        /* Flashcard */
        .flashcard {
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            padding: 24px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .flashcard::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            transform: scaleX(0);
            transition: transform 0.3s;
        }

        .flashcard:hover {
            transform: translateY(-4px);
            border-color: var(--primary-color);
        }

        .flashcard:hover::before {
            transform: scaleX(1);
        }

        .flashcard.highlighted {
            border-color: var(--gold);
        }

        /* Navigating State - Instant Visual Feedback */
        .flashcard.navigating {
            pointer-events: none;
            opacity: 0.6;
            transform: scale(0.98);
            transition: all 0.2s;
        }

        /* Pinned Flashcard (Daily Planet) */
        .flashcard.pinned {
            background: linear-gradient(135deg, var(--bg-card) 0%, rgba(139, 0, 0, 0.15) 100%);
            border: 2px solid var(--primary-color);
            box-shadow: 0 8px 32px rgba(139, 0, 0, 0.3);
            position: relative;
        }

        .flashcard.pinned::before {
            background: linear-gradient(90deg, var(--accent-color), var(--gold));
            transform: scaleX(1);
            height: 4px;
        }

        .flashcard.pinned::after {
            content: 'üìå';
            position: absolute;
            top: 12px;
            right: 12px;
            font-size: 1.5em;
            opacity: 0.7;
            animation: pulse 2s infinite;
        }

        .flashcard.pinned:hover {
            transform: translateY(-6px);
            box-shadow: 0 12px 40px rgba(139, 0, 0, 0.5);
        }

        .flashcard.pinned .flashcard-title {
            color: var(--accent-color);
            font-weight: 800;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.7; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.1); }
        }

        .flashcard-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .flashcard-icon {
            font-size: 2em;
            line-height: 1;
        }

        .flashcard-title {
            font-size: 1.2em;
            font-weight: 600;
            color: var(--text-primary);
        }

        .flashcard-count {
            background: rgba(139, 0, 0, 0.2);  /* Spartan Red */
            color: var(--gold);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin-left: auto;
        }

        .flashcard-description {
            color: var(--text-secondary);
            font-size: 0.9em;
            line-height: 1.6;
            margin-bottom: 16px;
        }

        .flashcard-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .tag {
            background: rgba(139, 0, 0, 0.1);  /* Spartan Red */
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 0.75em;
            color: var(--text-secondary);
            border: 1px solid rgba(139, 0, 0, 0.2);  /* Spartan Red */
        }

        /* Category Headers */
        .category-header {
            grid-column: 1 / -1;
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px 0 10px;
            border-bottom: 2px solid var(--border-color);
            margin-top: 30px;
        }

        .category-header:first-child {
            margin-top: 0;
        }

        .category-icon {
            font-size: 2em;
        }

        .category-title {
            font-size: 1.5em;
            font-weight: 700;
            color: var(--gold);
        }

        .category-count {
            background: rgba(255, 215, 0, 0.2);
            color: var(--gold);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
        }

        /* Connection Lines */
        .connection-line {
            stroke: var(--primary-color);
            stroke-width: 2;
            stroke-dasharray: 5, 5;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .connection-line.active {
            opacity: 0.6;
            animation: dash 20s linear infinite;
        }

        @keyframes dash {
            to {
                stroke-dashoffset: -1000;
            }
        }

        /* Legend */
        .legend {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(18, 32, 58, 0.95);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            z-index: 1000;
        }

        .legend-title {
            font-size: 0.9em;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 10px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
            font-size: 0.85em;
            color: var(--text-secondary);
        }

        .legend-line {
            width: 30px;
            height: 2px;
            background: var(--primary-color);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-stats {
                display: none;
            }

            .flashcard-network {
                grid-template-columns: 1fr;
            }

            .controls-content {
                flex-direction: column;
            }

            .search-box {
                width: 100%;
            }
        }
    </style>

    <!-- Spartan Ticker Tape CSS -->
    <link rel="stylesheet" href="js/spartan_ticker.css">
</head>
<body>
    <!-- Market Regime Indicator (Pinned at Top) -->
    <div id="market-regime-indicator"></div>

    <!-- SVG Canvas for Connections -->
    <svg id="networkCanvas"></svg>

    <!-- Header -->
    <div class="header">
        <div class="header-content">
            <div class="header-title">
                <img src="spartan_logo.png" alt="Spartan">
                <div>
                    <h1>Spartan Research Station</h1>
                    <div class="header-subtitle">Global Market Intelligence Network</div>
                </div>
            </div>
            <div class="header-stats">
                <div class="stat-item">
                    <span class="stat-number" id="totalSymbols">22,195</span>
                    <span class="stat-label">Symbols</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">15</span>
                    <span class="stat-label">Countries</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">25+</span>
                    <span class="stat-label">Exchanges</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="connectionCount">0</span>
                    <span class="stat-label">Connections</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Spartan Ticker Tape -->
    <div id="spartan-ticker" class="spartan-ticker-container"></div>

    <!-- Controls -->
    <div class="controls">
        <div class="controls-content">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Search markets, countries, tools...">
                <span class="search-icon">üîç</span>
            </div>
            <button class="filter-btn active" data-filter="all">All</button>
            <button class="filter-btn" data-filter="markets">Markets</button>
            <button class="filter-btn" data-filter="tools">Research Tools</button>
            <button class="filter-btn" data-filter="analytics">Analytics</button>
            <div class="view-toggle">
                <button class="view-btn active" data-view="grid">Grid</button>
                <button class="view-btn" data-view="connections">Connections</button>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <div class="flashcard-network" id="flashcardNetwork">

            <!-- ===== HIGHLIGHTS SECTION ===== -->
            <div class="category-header" style="background: linear-gradient(90deg, rgba(255, 215, 0, 0.1), transparent); padding: 25px 20px; border-radius: 8px; border: 1px solid rgba(255, 215, 0, 0.3); margin-top: 20px;">
                <span class="category-icon">‚≠ê</span>
                <h2 class="category-title" style="font-size: 1.8em; color: #FFD700;">Highlights</h2>
                <span class="category-count">Key Insights from All Tools</span>
            </div>

            <!-- Scrollable Highlights Container -->
            <div style="grid-column: 1 / -1; max-height: 400px; overflow-y: auto; background: rgba(10, 22, 40, 0.5); border: 1px solid rgba(255, 215, 0, 0.2); border-radius: 8px; padding: 20px; margin-bottom: 30px;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">

                    <!-- Highlight: Global Arbitrage Opportunities -->
                    <div onclick="window.open('symbol_research.html', 'spartan_symbol-research')" style="cursor: pointer; background: linear-gradient(135deg, rgba(255, 215, 0, 0.05), rgba(211, 47, 47, 0.05)); border-left: 3px solid #FFD700; padding: 15px; border-radius: 6px; transition: all 0.2s ease;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(255, 215, 0, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                            <span style="font-size: 1.5em;">üåç</span>
                            <h4 style="margin: 0; color: #FFD700; font-size: 0.95em;">Global Arbitrage & Cross-Market Plays</h4>
                        </div>
                        <p style="margin: 0; font-size: 0.85em; color: #00ff88;"><strong>PROFIT OPPORTUNITY:</strong> Exploit timezone inefficiencies across 25+ exchanges</p>
                        <p style="margin: 5px 0 0 0; font-size: 0.75em; color: rgba(255, 255, 255, 0.7);">India NSE opens 12 hours before NYSE - frontrun US sector moves using overnight Asian action. Nikkei futures correlation 0.78 with SPX provides leading signals.</p>
                    </div>

                    <!-- Highlight: Econometrics -->
                    <div onclick="window.open('econometrics.html', 'spartan_econometrics')" style="cursor: pointer; background: linear-gradient(135deg, rgba(255, 215, 0, 0.05), rgba(211, 47, 47, 0.05)); border-left: 3px solid #FFD700; padding: 15px; border-radius: 6px; transition: all 0.2s ease;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(255, 215, 0, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                            <span style="font-size: 1.5em;">üìä</span>
                            <h4 style="margin: 0; color: #FFD700; font-size: 0.95em;">Fed Policy Trading Signals</h4>
                        </div>
                        <p style="margin: 0; font-size: 0.85em; color: #00ff88;"><strong>TRADE SETUP:</strong> CPI > 3.5% = Fade rallies. Unemployment > 4.5% = Aggressive long positioning</p>
                        <p style="margin: 5px 0 0 0; font-size: 0.75em; color: rgba(255, 255, 255, 0.7);">Real-time FRED data triggers sector rotation: Rising rates favor Financials (XLF), Falling rates favor Tech (XLK). PCE prints move markets 1.5% average.</p>
                    </div>

                    <!-- Highlight: VIX Analysis -->
                    <div onclick="window.open('symbol_search_connections.html', 'spartan_vix-analysis')" style="cursor: pointer; background: linear-gradient(135deg, rgba(255, 215, 0, 0.05), rgba(211, 47, 47, 0.05)); border-left: 3px solid #FFD700; padding: 15px; border-radius: 6px; transition: all 0.2s ease;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(255, 215, 0, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                            <span style="font-size: 1.5em;">üìà</span>
                            <h4 style="margin: 0; color: #FFD700; font-size: 0.95em;">VIX Fear Gauge Profit System</h4>
                        </div>
                        <p style="margin: 0; font-size: 0.85em; color: #00ff88;"><strong>PRECISE SIGNALS:</strong> VIX < 15 = Max long exposure. VIX 15-20 = Normal. VIX > 25 = Hedge or exit</p>
                        <p style="margin: 5px 0 0 0; font-size: 0.75em; color: rgba(255, 255, 255, 0.7);">SPY inverse correlation -0.85 with VIX. Buy VXX when VIX < 12 for mean reversion. Sell tech when VIX spikes >30% intraday (avg 3-day pullback: -4.2%).</p>
                    </div>

                    <!-- Highlight: COT Intelligence -->
                    <div style="background: linear-gradient(135deg, rgba(255, 215, 0, 0.05), rgba(211, 47, 47, 0.05)); border-left: 3px solid #FFD700; padding: 15px; border-radius: 6px;">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                            <span style="font-size: 1.5em;">üè¶</span>
                            <h4 style="margin: 0; color: #FFD700; font-size: 0.95em;">COT Smart Money Signals</h4>
                        </div>
                        <p style="margin: 0; font-size: 0.85em; color: #00ff88;"><strong>CONTRARIAN EDGE:</strong> When Commercials net long >60% = Major bottom forming. Net short >60% = Top ahead</p>
                        <p style="margin: 5px 0 0 0; font-size: 0.75em; color: rgba(255, 255, 255, 0.7);">Extreme speculative positioning (>80%) predicts reversals within 2-4 weeks. Follow commercial hedgers in Gold, Oil, Bonds - they have 73% accuracy at inflection points.</p>
                    </div>

                    <!-- Highlight: Harmonic Cycles -->
                    <div style="background: linear-gradient(135deg, rgba(255, 215, 0, 0.05), rgba(211, 47, 47, 0.05)); border-left: 3px solid #FFD700; padding: 15px; border-radius: 6px;">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                            <span style="font-size: 1.5em;">üåä</span>
                            <h4 style="margin: 0; color: #FFD700; font-size: 0.95em;">FFT Cycle Timing System</h4>
                        </div>
                        <p style="margin: 0; font-size: 0.85em; color: #00ff88;"><strong>TIMING EDGE:</strong> SPX dominant cycle = 63 days. Trade reversals at cycle lows ¬±3 days for 78% win rate</p>
                        <p style="margin: 5px 0 0 0; font-size: 0.75em; color: rgba(255, 255, 255, 0.7);">21-day & 42-day harmonics stack for high-probability entries. Next major cycle low projects Dec 15-18. Gold shows 180-day cycle with 85% reliability.</p>
                    </div>

                    <!-- Highlight: FRED Global Economic Data -->
                    <div style="background: linear-gradient(135deg, rgba(255, 215, 0, 0.05), rgba(211, 47, 47, 0.05)); border-left: 3px solid #FFD700; padding: 15px; border-radius: 6px;">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                            <span style="font-size: 1.5em;">üèõÔ∏è</span>
                            <h4 style="margin: 0; color: #FFD700; font-size: 0.95em;">Macro Regime Trading System</h4>
                        </div>
                        <p style="margin: 0; font-size: 0.85em; color: #00ff88;"><strong>REGIME SIGNALS:</strong> Yield Curve Inverted = Defensives. M2 Growth >10% = Risk-on. GDP < 2% = Quality focus</p>
                        <p style="margin: 5px 0 0 0; font-size: 0.75em; color: rgba(255, 255, 255, 0.7);">10Y-2Y spread predicts recessions 12-18 months early. LEI below -4% = Exit cyclicals, buy staples. Fed Funds > Inflation = Buy financials.</p>
                    </div>

                    <!-- Highlight: ROCE Research -->
                    <div style="background: linear-gradient(135deg, rgba(255, 215, 0, 0.05), rgba(211, 47, 47, 0.05)); border-left: 3px solid #FFD700; padding: 15px; border-radius: 6px;">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                            <span style="font-size: 1.5em;">üíé</span>
                            <h4 style="margin: 0; color: #FFD700; font-size: 0.95em;">ROCE Quality Screener</h4>
                        </div>
                        <p style="margin: 0; font-size: 0.85em; color: #00ff88;"><strong>VALUE FILTER:</strong> ROCE >20% + FCF Yield >5% = Buy. ROCE <8% = Avoid regardless of valuation</p>
                        <p style="margin: 5px 0 0 0; font-size: 0.75em; color: rgba(255, 255, 255, 0.7);">Companies with ROCE >25% for 5+ years outperform SPX by 8% annually. Screen for ROCE expansion + buybacks = compounders. Avoid high P/E with low ROCE.</p>
                    </div>

                    <!-- Highlight: Seasonality Research -->
                    <div style="background: linear-gradient(135deg, rgba(255, 215, 0, 0.05), rgba(211, 47, 47, 0.05)); border-left: 3px solid #FFD700; padding: 15px; border-radius: 6px;">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                            <span style="font-size: 1.5em;">üìÖ</span>
                            <h4 style="margin: 0; color: #FFD700; font-size: 0.95em;">Calendar-Based Edge</h4>
                        </div>
                        <p style="margin: 0; font-size: 0.85em; color: #00ff88;"><strong>SEASONAL TRADES:</strong> Nov-Apr gains 7.5% avg. May-Oct flat. Energy peaks Feb-Mar. Retail Oct-Dec</p>
                        <p style="margin: 5px 0 0 0; font-size: 0.75em; color: rgba(255, 255, 255, 0.7);">"Sell in May" works 68% of time since 1950. Santa Rally (Dec 15-Jan 5) up 78% of years +1.4% avg. Tax-loss selling creates Dec 15-31 bargains.</p>
                    </div>

                    <!-- Highlight: Pattern Finders -->
                    <div style="background: linear-gradient(135deg, rgba(255, 215, 0, 0.05), rgba(211, 47, 47, 0.05)); border-left: 3px solid #FFD700; padding: 15px; border-radius: 6px;">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                            <span style="font-size: 1.5em;">üîç</span>
                            <h4 style="margin: 0; color: #FFD700; font-size: 0.95em;">High-Probability Chart Setups</h4>
                        </div>
                        <p style="margin: 0; font-size: 0.85em; color: #00ff88;"><strong>ENTRY SIGNALS:</strong> Cup & Handle 65% win rate. Bull Flag on volume 71%. Double bottom at support 68%</p>
                        <p style="margin: 5px 0 0 0; font-size: 0.75em; color: rgba(255, 255, 255, 0.7);">Enter on breakout +2% with volume >150% avg. Target = pattern height projected. Stop below support -1.5%. Best on daily timeframe, confirm on 60min.</p>
                    </div>

                    <!-- Highlight: Trading Journal -->
                    <div style="background: linear-gradient(135deg, rgba(255, 215, 0, 0.05), rgba(211, 47, 47, 0.05)); border-left: 3px solid #FFD700; padding: 15px; border-radius: 6px;">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                            <span style="font-size: 1.5em;">üìì</span>
                            <h4 style="margin: 0; color: #FFD700; font-size: 0.95em;">Performance Optimization Lab</h4>
                        </div>
                        <p style="margin: 0; font-size: 0.85em; color: #00ff88;"><strong>EDGE EXTRACTION:</strong> Win rate >60% = Scale up. R:R <2:1 = Stop trading setup. Identify your best setups</p>
                        <p style="margin: 5px 0 0 0; font-size: 0.75em; color: rgba(255, 255, 255, 0.7);">Track P&L by setup, timeframe, day-of-week. Best traders eliminate losing setups, double down on winners. Find your edge: Time of day? Market conditions? Chart patterns?</p>
                    </div>

                    <!-- Highlight: Intermarket Relationships -->
                    <div style="background: linear-gradient(135deg, rgba(255, 215, 0, 0.05), rgba(211, 47, 47, 0.05)); border-left: 3px solid #FFD700; padding: 15px; border-radius: 6px;">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                            <span style="font-size: 1.5em;">üîó</span>
                            <h4 style="margin: 0; color: #FFD700; font-size: 0.95em;">Cross-Asset Leading Indicators</h4>
                        </div>
                        <p style="margin: 0; font-size: 0.85em; color: #00ff88;"><strong>PREDICTIVE SIGNALS:</strong> USD down = Commodities up. Bonds rally = Stocks fall 2 weeks later. Copper leads SPX by 3 months</p>
                        <p style="margin: 5px 0 0 0; font-size: 0.75em; color: rgba(255, 255, 255, 0.7);">TLT (bonds) inverse to XLF (banks) 0.82 correlation. Gold leads mining stocks GDX. Credit spreads widen = Exit risk assets. DXY >105 = EM stocks decline.</p>
                    </div>

                    <!-- Highlight: Market Cycles -->
                    <div style="background: linear-gradient(135deg, rgba(255, 215, 0, 0.05), rgba(211, 47, 47, 0.05)); border-left: 3px solid #FFD700; padding: 15px; border-radius: 6px;">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                            <span style="font-size: 1.5em;">üîÑ</span>
                            <h4 style="margin: 0; color: #FFD700; font-size: 0.95em;">Bull/Bear Phase Navigator</h4>
                        </div>
                        <p style="margin: 0; font-size: 0.85em; color: #00ff88;"><strong>CYCLE POSITIONING:</strong> Early bull = Small caps. Mid bull = Large caps. Late bull = Defensives. Bear = Cash/Bonds</p>
                        <p style="margin: 5px 0 0 0; font-size: 0.75em; color: rgba(255, 255, 255, 0.7);">Avg bull market: 4.5 years +152%. Bear: 1.3 years -36%. New highs + breadth >70% = Early phase. Divergences + vol spike = Late phase. Position accordingly.</p>
                    </div>

                </div>
            </div>

            <!-- ===== BEFORE YOU START SECTION ===== -->
            <div class="category-header" style="background: linear-gradient(90deg, rgba(211, 47, 47, 0.1), transparent); padding: 25px 20px; border-radius: 8px; border: 2px solid rgba(211, 47, 47, 0.4); margin-top: 20px;">
                <span class="category-icon">üõ°Ô∏è</span>
                <h2 class="category-title" style="font-size: 2em; color: #FF5252;">Before You Start</h2>
                <span class="category-count" style="background: rgba(211, 47, 47, 0.2); color: #FF5252; padding: 6px 14px; border-radius: 12px;">Essential Setup</span>
            </div>

            <!-- Symbol Database & Market Data Setup Card -->
            <div class="flashcard highlighted" data-id="before-you-start" data-category="setup" data-connections="all" style="border: 2px solid rgba(211, 47, 47, 0.5); background: linear-gradient(135deg, rgba(18, 32, 58, 0.95), rgba(211, 47, 47, 0.05));">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2em;">üìä</span>
                    <h3 class="flashcard-title" style="color: #FF5252; font-size: 1.3em;">Symbol Database & Market Data</h3>
                    <span id="symbolDbBadge" class="flashcard-count" style="background: rgba(34, 139, 34, 0.2); color: #00ff88; padding: 6px 12px; border-radius: 12px; font-size: 0.85em; margin-left: auto;">
                        ‚óè 22,195 READY
                    </span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em; line-height: 1.6;">
                    <strong style="color: #FF5252;">üéØ Purpose:</strong> Initialize symbol database and market data APIs before starting research.

                    <div style="margin-top: 15px; padding: 15px; background: rgba(211, 47, 47, 0.1); border-left: 3px solid #D32F2F; border-radius: 4px;">
                        <div style="font-weight: 600; color: #FF5252; margin-bottom: 8px;">üì¶ Symbol Database Status:</div>
                        <div id="symbolDatabaseInfo" style="font-size: 0.95em; color: var(--text-secondary); line-height: 1.8;">
                            <div>üìä Total Symbols: <span style="color: #00ff88;" id="totalSymbols">22,195</span></div>
                            <div>üåç Countries: <span style="color: #00ff88;" id="totalCountries">25</span></div>
                            <div>üè¢ Exchanges: <span style="color: #00ff88;" id="totalExchanges">26+</span></div>
                            <div>‚è∞ Last Updated: <span style="color: #00ff88;" id="lastUpdated">Auto-updates every 24 hours</span></div>
                        </div>
                    </div>

                    <div id="marketDataApiStatus" style="margin-top: 15px; padding: 15px; background: rgba(0, 255, 136, 0.05); border: 1px solid rgba(0, 255, 136, 0.2); border-radius: 4px;">
                        <div style="font-weight: 600; color: #00ff88; margin-bottom: 10px;">‚ö° Market Data API:</div>
                        <div style="font-size: 0.95em; color: var(--text-secondary); line-height: 1.8;">
                            <div>üîµ Yahoo Finance: <span style="color: #00ff88;" id="yahooStatus">Primary Source</span></div>
                            <div>üü¢ Alpha Vantage: <span style="color: #00ff88;" id="alphaStatus">Secondary Fallback</span></div>
                            <div>üü° Finnhub: <span style="color: var(--text-secondary);" id="finnhubStatus">Tertiary (Optional)</span></div>
                            <div>üåê API Port: <span style="color: #00ff88;">8082</span></div>
                        </div>
                    </div>

                    <div style="margin-top: 20px; padding: 15px; background: rgba(211, 47, 47, 0.08); border: 1px solid rgba(211, 47, 47, 0.3); border-radius: 4px;">
                        <div style="font-weight: 600; color: #FF5252; margin-bottom: 10px;">üöÄ Quick Start Scripts:</div>
                        <div style="font-size: 0.95em; color: var(--text-secondary); line-height: 1.8;">

                            <div style="margin-bottom: 12px;">
                                <strong style="color: #00ff88;">1. Auto Symbol Updater</strong> (Background service)<br>
                                <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 3px; color: #00ff88;">START_AUTO_SYMBOL_UPDATER.bat</code><br>
                                <span style="font-size: 0.85em; color: var(--text-secondary);">Updates database every 24 hours automatically</span>
                            </div>

                            <div style="margin-bottom: 12px;">
                                <strong style="color: #00ff88;">2. Market Data API Server</strong> (Real-time quotes)<br>
                                <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 3px; color: #00ff88;">START_SYMBOL_DATA_API.bat</code><br>
                                <span style="font-size: 0.85em; color: var(--text-secondary);">Starts multi-source API on port 8082</span>
                            </div>

                            <div>
                                <strong style="color: #00ff88;">3. Symbol Research</strong> (Quick access)<br>
                                <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 3px; color: #00ff88;">START_SYMBOL_RESEARCH.bat</code><br>
                                <span style="font-size: 0.85em; color: var(--text-secondary);">Opens Symbol Research tool directly</span>
                            </div>
                        </div>
                    </div>

                    <div style="margin-top: 20px; padding: 15px; background: rgba(0, 150, 255, 0.05); border: 1px solid rgba(0, 150, 255, 0.2); border-radius: 4px;">
                        <div style="font-weight: 600; color: #0096FF; margin-bottom: 10px;">üí° What These Scripts Do:</div>
                        <ul style="margin: 0; padding-left: 20px; font-size: 0.95em; color: var(--text-secondary); line-height: 1.8;">
                            <li><strong>Symbol Updater:</strong> Downloads latest symbols from NASDAQ, NYSE, and 24+ global exchanges</li>
                            <li><strong>Data API:</strong> Provides real-time stock quotes with automatic fallback between 3 sources</li>
                            <li><strong>Symbol Research:</strong> Direct link to search all 22,195+ symbols instantly</li>
                        </ul>
                    </div>
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(211, 47, 47, 0.2); border: 1px solid #D32F2F;">üìä 22,195 Symbols</span>
                    <span class="tag" style="background: rgba(211, 47, 47, 0.2); border: 1px solid #D32F2F;">üåç Global Markets</span>
                    <span class="tag" style="background: rgba(211, 47, 47, 0.2); border: 1px solid #D32F2F;">‚ö° Real-time Data</span>
                    <span class="tag" style="background: rgba(211, 47, 47, 0.2); border: 1px solid #D32F2F;">üîÑ Auto-Update</span>
                </div>
            </div>

            <!-- ===== PATTERN DISCOVERY TERMINAL SECTION ===== -->
            <div class="category-header" style="background: linear-gradient(90deg, rgba(211, 47, 47, 0.1), transparent); padding: 25px 20px; border-radius: 8px; border: 2px solid rgba(211, 47, 47, 0.4); margin-top: 40px;">
                <span class="category-icon">üéØ</span>
                <h2 class="category-title" style="font-size: 2em; color: #FF5252;">Pattern Discovery Terminal</h2>
                <span class="category-count" style="background: rgba(211, 47, 47, 0.2); color: #FF5252; padding: 6px 14px; border-radius: 12px;">11 Live Pattern Categories</span>
            </div>

            <!-- Pattern Discovery Terminal - Navigation Card -->
            <div class="flashcard" data-id="pattern-discovery" data-category="tools">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 1.8em;">üéØ</span>
                    <h3 class="flashcard-title">Pattern Discovery Terminal</h3>
                    <span class="flashcard-count">11 Live Categories</span>
                </div>
                <div class="flashcard-description">
                    <p><strong style="color: #FF5252;">Real-time trading patterns with WIN RATE & PROFIT FACTOR metrics</strong></p>
                    <p style="margin-top: 10px;">Discover profitable trading setups across all markets:</p>
                    <ul style="margin-left: 20px; margin-top: 8px;">
                        <li><strong>Standard Markets:</strong> Stocks, Penny Stocks, Crypto, Forex, Futures, CFDs</li>
                        <li><strong>üö® SPECIAL ALERTS:</strong> GAP UP/PLUMMET extreme movements</li>
                        <li><strong>üíé Unique Daily:</strong> NO REPEATS - patterns unique each day</li>
                        <li><strong>üèÜ Rare Gems:</strong> WIN RATE >85%, PROFIT FACTOR >5.0</li>
                        <li><strong>üí∞ Billion$ Moves:</strong> Billion dollar+ market cap changes</li>
                        <li><strong>üöÄ High-Growth Sectors:</strong> Nuclear, AI, Quantum, Robotics (200-500% potential)</li>
                    </ul>
                    <p style="margin-top: 12px; color: #00ff88;">Click any pattern category to load live setups with terminal-style displays</p>
                </div>
                <div class="flashcard-tags">
                    <span class="tag">WIN RATE Metrics</span>
                    <span class="tag">PROFIT FACTOR</span>
                    <span class="tag">11 Categories</span>
                    <span class="tag">Live Patterns</span>
                </div>
            </div>

            <!-- ===== ELITE RESEARCH TOOLS SECTION ===== -->
            <div class="category-header" style="background: linear-gradient(90deg, rgba(211, 47, 47, 0.05), transparent); padding: 25px 20px; border-radius: 8px; border: 1px solid rgba(211, 47, 47, 0.2); margin-top: 40px;">
                <span class="category-icon">üî¨</span>
                <h2 class="category-title" style="font-size: 1.8em;">Elite Research Tools</h2>
                <span class="category-count">21 Tools</span>
            </div>

            <!-- 1. Symbol Research -->
            <div class="flashcard" data-id="symbol-research" data-category="tools" data-connections="all-markets">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üîç</span>
                    <h3 class="flashcard-title">Symbol Research</h3>
                </div>
                <div class="flashcard-description">
                    Search and analyze 22,195+ global symbols across 15 countries and 25+ exchanges with instant insights
                </div>
                <div class="flashcard-tags">
                    <span class="tag">Global Search</span>
                    <span class="tag">Real-time Data</span>
                    <span class="tag">22,195 Symbols</span>
                </div>
            </div>

            <!-- 4. Daily Planet -->
            <div class="flashcard" data-id="daily-planet" data-category="tools" data-connections="all-markets">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üì∞</span>
                    <h3 class="flashcard-title">Daily Planet</h3>
                </div>
                <div class="flashcard-description">
                    Real-time global market news aggregation with AI sentiment analysis across all sessions and sectors
                </div>
                <div class="flashcard-tags">
                    <span class="tag">Breaking News</span>
                    <span class="tag">Billion$ Moves</span>
                    <span class="tag">Real-time</span>
                </div>
            </div>

            <!-- Breakthrough Insights Arsenal -->
            <div class="flashcard" data-id="breakthrough-insights" data-category="intelligence" data-connections="all-analysis">
                <div class="flashcard-header">
                    <span class="flashcard-icon">‚öîÔ∏è</span>
                    <h3 class="flashcard-title">Breakthrough Insights Arsenal</h3>
                </div>
                <div class="flashcard-description">
                    Battle-tested intelligence from 4 parallel AI agents: Breakthrough, Discovery, Pattern & Timing. All insights accumulate - nothing is ever abandoned.
                </div>
                <div class="flashcard-tags">
                    <span class="tag">üõ°Ô∏è Parallel Agents</span>
                    <span class="tag">‚öîÔ∏è Accumulating Intel</span>
                    <span class="tag">üí• High Impact</span>
                </div>
                <div id="breakthroughInsightsPreview" style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255, 255, 255, 0.1);">
                    <div style="display: flex; justify-content: space-between; align-items: center; font-size: 0.9em;">
                        <span style="color: var(--text-secondary);">
                            üìä <span id="totalInsightsCount">0</span> insights collected
                        </span>
                        <span style="color: var(--gold); font-weight: 700;">
                            ‚ö° <span id="highImpactCount">0</span> high impact
                        </span>
                    </div>
                </div>
            </div>

            <!-- Deal Hunters -->
            <div class="flashcard" data-id="deal-hunters" data-category="tools" data-connections="all-markets">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üéØ</span>
                    <h3 class="flashcard-title">Deal Hunters</h3>
                </div>
                <div class="flashcard-description">
                    Lightning-fast scanner for high-profit opportunities ready to pop. Auto-scans every 5 minutes across 4 timeframes, accumulating results.
                </div>
                <div class="flashcard-tags">
                    <span class="tag">‚ö° Auto-Refresh 5min</span>
                    <span class="tag">üöÄ Fast Profits</span>
                    <span class="tag">üìä Multi-Timeframe</span>
                </div>
                <div id="dealHuntersPreview" style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255, 255, 255, 0.1);">
                    <div style="display: flex; justify-content: space-between; align-items: center; font-size: 0.9em;">
                        <span style="color: var(--text-secondary);">
                            üéØ <span id="dealsFoundCount">0</span> opportunities found
                        </span>
                        <span style="color: var(--green); font-weight: 700;">
                            üí∞ <span id="topDealPercent">0</span>% top gain
                        </span>
                    </div>
                </div>
            </div>

            <!-- Inflation Dashboard -->
            <div class="flashcard" data-id="inflation-dashboard" data-category="intelligence" data-connections="all-markets">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üìä</span>
                    <h3 class="flashcard-title">Inflation Dashboard</h3>
                </div>
                <div class="flashcard-description">
                    Official US inflation data from Bureau of Labor Statistics. Real-time CPI tracking with 3-5-10 year charts and month-over-month analysis.
                </div>
                <div class="flashcard-tags">
                    <span class="tag">üá∫üá∏ BLS Official</span>
                    <span class="tag">üìà CPI-U Series</span>
                    <span class="tag">üìÖ 10 Years Data</span>
                </div>
                <div id="inflationPreview" style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255, 255, 255, 0.1);">
                    <div style="display: flex; justify-content: space-between; align-items: center; font-size: 0.9em;">
                        <span style="color: var(--text-secondary);">
                            üìä CPI: <span id="inflationCPI">Loading...</span>
                        </span>
                        <span style="color: var(--gold); font-weight: 700;">
                            üìà <span id="inflationRate">--%</span> YoY
                        </span>
                    </div>
                </div>
            </div>

            <!-- Boom or Bust Indicators -->
            <div class="flashcard" data-id="boom-bust" data-category="intelligence" data-connections="all-markets">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üö®</span>
                    <h3 class="flashcard-title">Boom or Bust Indicators</h3>
                </div>
                <div class="flashcard-description">
                    Elite market top/bottom detection across 18 global indices. 10+ indicators with 95%+ extreme alerts and historical accuracy tracking.
                </div>
                <div class="flashcard-tags">
                    <span class="tag">‚ö†Ô∏è Extreme Alerts</span>
                    <span class="tag">üìä 10+ Indicators</span>
                    <span class="tag">üåç 18 Indices</span>
                </div>
                <div id="boomBustPreview" style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255, 255, 255, 0.1);">
                    <div style="display: flex; justify-content: space-between; align-items: center; font-size: 0.9em;">
                        <span style="color: var(--text-secondary);">
                            üéØ <span id="boomBustScore">50</span>/100 Composite
                        </span>
                        <span style="color: var(--gold); font-weight: 700;" id="boomBustStatus">
                            ‚öñÔ∏è Neutral
                        </span>
                    </div>
                </div>
            </div>

            <!-- 2. COT Intelligence -->
            <div class="flashcard" data-id="cot-intelligence" data-category="intelligence" data-connections="futures,commodities">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üìä</span>
                    <h3 class="flashcard-title">COT Intelligence</h3>
                </div>
                <div class="flashcard-description">
                    CFTC Commitment of Traders analysis with 95%+ extreme positioning detection. Click flashcards for inline histograms with Open Interest overlay.
                </div>
                <div class="flashcard-tags">
                    <span class="tag">üî• 95%+ Extremes</span>
                    <span class="tag">üìà Smart Money</span>
                    <span class="tag">üíπ 50+ Symbols</span>
                </div>
                <div id="cotPreview" style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255, 255, 255, 0.1);">
                    <div style="display: flex; justify-content: space-between; align-items: center; font-size: 0.9em;">
                        <span style="color: var(--text-secondary);">
                            üìä Real-time CFTC positioning
                        </span>
                        <span style="color: var(--gold); font-weight: 700;">
                            üî• Inline histograms
                        </span>
                    </div>
                </div>
            </div>

            <!-- 3. Econometrics Intelligence -->
            <div class="flashcard highlighted" data-id="econometrics" data-category="tools" data-connections="all-markets">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üìä</span>
                    <h3 class="flashcard-title">Econometrics Intelligence</h3>
                    <span class="flashcard-count" style="background: rgba(211, 47, 47, 0.2); color: #FF5252; padding: 4px 12px; border-radius: 12px; font-size: 0.85em; margin-left: auto;">10</span>
                </div>
                <div class="flashcard-description">
                    Real-time economic indicators with autonomous data collection, AI insights in simple English, and deep research analysis powered by Mojo parallel service
                </div>
                <div class="flashcard-tags">
                    <span class="tag">Auto-Refresh</span>
                    <span class="tag">AI Insights</span>
                    <span class="tag">Mojo Powered</span>
                </div>
            </div>

            <!-- 4. Fundamental Analysis -->
            <div class="flashcard" data-id="fundamental" data-category="analytics" data-connections="all-markets">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üìà</span>
                    <h3 class="flashcard-title">Fundamental Analysis</h3>
                </div>
                <div class="flashcard-description">
                    AI-powered discovery of exceptional fundamental value with 96%+ confidence growth potential
                </div>
                <div class="flashcard-tags">
                    <span class="tag">96%+ Confidence</span>
                    <span class="tag">Multi-Asset</span>
                    <span class="tag">Growth Focus</span>
                </div>
            </div>

            <!-- 5. Emerging Sectors -->
            <div class="flashcard" data-id="emerging-sectors" data-category="intelligence" data-connections="all-markets">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üöÄ</span>
                    <h3 class="flashcard-title">Emerging Sectors</h3>
                </div>
                <div class="flashcard-description">
                    Top 20 cutting-edge stocks from breakthrough sectors: AI, Genetics, Robotics, Nanotechnology, Healthcare Innovation
                </div>
                <div class="flashcard-tags">
                    <span class="tag">üß¨ Genetics</span>
                    <span class="tag">ü§ñ AI & Robotics</span>
                    <span class="tag">‚ö° Nanotech</span>
                    <span class="tag">üíâ Healthcare</span>
                </div>
                <div id="emergingSectorsContent" style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255, 255, 255, 0.1);">
                    <div style="display: flex; justify-content: space-between; align-items: center; font-size: 0.9em; margin-bottom: 10px;">
                        <span style="color: var(--text-secondary);">
                            üöÄ <span id="emergingSectorsCount">Loading...</span> breakthrough stocks
                        </span>
                        <button onclick="refreshEmergingSectors()" style="background: rgba(34, 139, 34, 0.2); border: 1px solid rgba(34, 139, 34, 0.5); color: #228B22; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 0.85em;">
                            üîÑ Refresh
                        </button>
                    </div>
                    <div id="emergingSectorsList" style="max-height: 400px; overflow-y: auto; font-size: 0.85em;">
                        <div style="text-align: center; color: var(--text-secondary); padding: 20px;">
                            Loading emerging sector stocks...
                        </div>
                    </div>
                </div>
            </div>

            <!-- FRED Economic Data -->
            <div class="flashcard" data-id="fred-economic" data-category="tools" data-connections="all-markets">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üåç</span>
                    <h3 class="flashcard-title">FRED Global Economic Data</h3>
                </div>
                <div class="flashcard-description">
                    24 countries ‚Ä¢ 144 indicators ‚Ä¢ Educational explanations for traders, markets, consumers & government ‚Ä¢ G7, BRICS+, Asia-Pacific coverage
                </div>
                <div class="flashcard-tags">
                    <span class="tag">24 Countries</span>
                    <span class="tag">Educational</span>
                    <span class="tag">Real-time FRED API</span>
                </div>
            </div>

            <!-- VIX Analysis -->
            <div class="flashcard" data-id="vix-analysis" data-category="tools" data-connections="usa-stocks">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üìâ</span>
                    <h3 class="flashcard-title">VIX Correlation</h3>
                </div>
                <div class="flashcard-description">
                    Elite volatility analysis discovering inverse relationships for optimal buy/sell opportunities at 95%+ confidence
                </div>
                <div class="flashcard-tags">
                    <span class="tag">95%+ Confidence</span>
                    <span class="tag">VIX Inverse</span>
                    <span class="tag">Buy Signals</span>
                </div>
            </div>

            <!-- Seasonality Research -->
            <div class="flashcard" data-id="seasonality" data-category="analytics" data-connections="usa-stocks,japan-stocks">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üìÖ</span>
                    <h3 class="flashcard-title">Seasonality Research</h3>
                </div>
                <div class="flashcard-description">
                    AI-powered seasonal patterns with 95%+ confidence. Discover best/worst months based on 30+ years of data
                </div>
                <div class="flashcard-tags">
                    <span class="tag">30+ Years Data</span>
                    <span class="tag">Best Months</span>
                    <span class="tag">Precise Timing</span>
                </div>
            </div>

            <!-- Intermarket Relationships -->
            <div class="flashcard" data-id="intermarket" data-category="analytics" data-connections="all-markets">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üîó</span>
                    <h3 class="flashcard-title">Intermarket Relationships</h3>
                </div>
                <div class="flashcard-description">
                    24/7 AI discovering correlations, divergences, and causal relationships between global instruments
                </div>
                <div class="flashcard-tags">
                    <span class="tag">24/7 Learning</span>
                    <span class="tag">Correlations</span>
                    <span class="tag">Global</span>
                </div>
            </div>

            <!-- GARP Analysis -->
            <div class="flashcard" data-id="garp" data-category="analytics" data-connections="usa-stocks,uk-stocks,germany-stocks">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üìä</span>
                    <h3 class="flashcard-title">GARP - Growth at Reasonable Price</h3>
                </div>
                <div class="flashcard-description">
                    24/7 AI discovering stocks with strong growth potential at reasonable valuations - 95%+ confidence
                </div>
                <div class="flashcard-tags">
                    <span class="tag">95%+ Confidence</span>
                    <span class="tag">Value Growth</span>
                    <span class="tag">Long & Short</span>
                </div>
            </div>

            <!-- 14. ROCE Research -->
            <div class="flashcard" data-id="roce" data-category="analytics" data-connections="all-markets">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üíé</span>
                    <h3 class="flashcard-title">ROCE Research</h3>
                </div>
                <div class="flashcard-description">
                    Companies with higher than industry Return on Capital Employed from worldwide stock markets
                </div>
                <div class="flashcard-tags">
                    <span class="tag">High ROCE</span>
                    <span class="tag">Global Markets</span>
                    <span class="tag">Capital Efficiency</span>
                </div>
            </div>

            <!-- Market Cycles -->
            <div class="flashcard" data-id="cycles" data-category="analytics" data-connections="all-markets">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üîÑ</span>
                    <h3 class="flashcard-title">Market Cycles</h3>
                </div>
                <div class="flashcard-description">
                    Elite cycle discovery identifying turning points at 95%+ confidence for optimal entry/exit
                </div>
                <div class="flashcard-tags">
                    <span class="tag">Cycle Analysis</span>
                    <span class="tag">Turning Points</span>
                    <span class="tag">95%+ Confidence</span>
                </div>
            </div>

            <!-- Harmonic Cycles -->
            <div class="flashcard" data-id="harmonic-cycles" data-category="analytics" data-connections="all-markets">
                <div class="flashcard-header">
                    <span class="flashcard-icon">‚ö°</span>
                    <h3 class="flashcard-title">Harmonic Cycles</h3>
                </div>
                <div class="flashcard-description">
                    AI-powered cycle detection using FFT, Hilbert Transform & advanced mathematics
                </div>
                <div class="flashcard-tags">
                    <span class="tag">AI Analysis</span>
                    <span class="tag">FFT/Hilbert</span>
                    <span class="tag">Predictions</span>
                </div>
            </div>

            <!-- Market Hub -->
            <div class="flashcard" data-id="market-hub" data-category="tools" data-connections="all-markets">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üìä</span>
                    <h3 class="flashcard-title">Market Hub</h3>
                </div>
                <div class="flashcard-description">
                    Real-time monitoring, news alerts, trading journal, and AI analysis dashboard
                </div>
                <div class="flashcard-tags">
                    <span class="tag">Market Moves</span>
                    <span class="tag">News</span>
                    <span class="tag">AI Analysis</span>
                </div>
            </div>

            <!-- Chart Analytics -->
            <div class="flashcard" data-id="chart-analytics" data-category="tools" data-connections="all-markets">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üìá</span>
                    <h3 class="flashcard-title">Chart Analytics</h3>
                </div>
                <div class="flashcard-description">
                    Technical indicators, custom scripts, and multi-asset analysis with advanced charting
                </div>
                <div class="flashcard-tags">
                    <span class="tag">Indicators</span>
                    <span class="tag">Charts</span>
                    <span class="tag">Mojo Powered</span>
                </div>
            </div>

            <!-- Trading Journal -->
            <div class="flashcard" data-id="trading-journal" data-category="tools" data-connections="all-markets">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üìî</span>
                    <h3 class="flashcard-title">Trading Journal</h3>
                </div>
                <div class="flashcard-description">
                    Performance analytics, risk management, trade tracking, and AI coaching system
                </div>
                <div class="flashcard-tags">
                    <span class="tag">Metrics</span>
                    <span class="tag">Risk Management</span>
                    <span class="tag">AI Coach</span>
                </div>
            </div>

            <!-- Pattern Finders -->
            <div class="flashcard" data-id="pattern-finders" data-category="tools" data-connections="all-markets">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üîÆ</span>
                    <h3 class="flashcard-title">Pattern Finders</h3>
                </div>
                <div class="flashcard-description">
                    AI-powered pattern detection across global trading sessions with Python/Mojo
                </div>
                <div class="flashcard-tags">
                    <span class="tag">Asian Session</span>
                    <span class="tag">US Session</span>
                    <span class="tag">London</span>
                </div>
            </div>

            <!-- ===== MAJOR SECTION BREAK ===== -->
            <div style="grid-column: 1 / -1; height: 60px; margin: 40px 0; border-top: 3px solid rgba(211, 47, 47, 0.3); position: relative;">
                <div style="position: absolute; top: -15px; left: 50%; transform: translateX(-50%); background: var(--bg-dark); padding: 0 20px; color: var(--text-secondary); font-size: 0.9em;">
                    ‚¨áÔ∏è Market Coverage
                </div>
            </div>

            <!-- ===== GLOBAL STOCK MARKETS CATEGORY ===== -->
            <div class="category-header" style="margin-top: 0; padding-top: 0; background: linear-gradient(90deg, rgba(0, 255, 136, 0.05), transparent); padding: 25px 20px; border-radius: 8px; border: 1px solid rgba(0, 255, 136, 0.2);">
                <span class="category-icon">üåç</span>
                <h2 class="category-title" style="font-size: 1.8em;">Global Stock Markets</h2>
                <span class="category-count">15 Countries ¬∑ 22,195 Symbols</span>
            </div>

            <!-- USA Stocks -->
            <div class="flashcard" data-id="usa-stocks" data-category="markets" data-connections="vix-analysis,seasonality,garp">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üá∫üá∏</span>
                    <h3 class="flashcard-title">USA Markets</h3>
                    <span class="flashcard-count">11,877</span>
                </div>
                <div class="flashcard-description">
                    Complete NASDAQ and NYSE listings including mega-caps, tech giants, and all US-listed securities
                </div>
                <div class="flashcard-tags">
                    <span class="tag">NASDAQ</span>
                    <span class="tag">NYSE</span>
                    <span class="tag">Official FTP</span>
                </div>
            </div>

            <!-- Japan Stocks -->
            <div class="flashcard" data-id="japan-stocks" data-category="markets" data-connections="seasonality,fundamental">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üáØüáµ</span>
                    <h3 class="flashcard-title">Japan Markets</h3>
                    <span class="flashcard-count">4,151</span>
                </div>
                <div class="flashcard-description">
                    Tokyo Stock Exchange (TSE/JPX) complete listings from official Excel sources
                </div>
                <div class="flashcard-tags">
                    <span class="tag">TSE</span>
                    <span class="tag">JPX Official</span>
                    <span class="tag">Asia Pacific</span>
                </div>
            </div>

            <!-- India Stocks -->
            <div class="flashcard" data-id="india-stocks" data-category="markets" data-connections="fundamental,roce">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üáÆüá≥</span>
                    <h3 class="flashcard-title">India Markets</h3>
                    <span class="flashcard-count">4,378</span>
                </div>
                <div class="flashcard-description">
                    National Stock Exchange (NSE) complete listings from official CSV sources
                </div>
                <div class="flashcard-tags">
                    <span class="tag">NSE</span>
                    <span class="tag">Official CSV</span>
                    <span class="tag">Emerging</span>
                </div>
            </div>

            <!-- Australia Stocks -->
            <div class="flashcard" data-id="australia-stocks" data-category="markets" data-connections="fundamental,roce">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üá¶üá∫</span>
                    <h3 class="flashcard-title">Australia Markets</h3>
                    <span class="flashcard-count">1,460</span>
                </div>
                <div class="flashcard-description">
                    Australian Securities Exchange (ASX) from official CSV sources
                </div>
                <div class="flashcard-tags">
                    <span class="tag">ASX</span>
                    <span class="tag">Official CSV</span>
                    <span class="tag">Pacific</span>
                </div>
            </div>

            <!-- UK Stocks -->
            <div class="flashcard" data-id="uk-stocks" data-category="markets" data-connections="garp,fundamental">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üá¨üáß</span>
                    <h3 class="flashcard-title">UK Markets</h3>
                    <span class="flashcard-count">100</span>
                </div>
                <div class="flashcard-description">
                    FTSE 100 Index constituents from Wikipedia curated sources
                </div>
                <div class="flashcard-tags">
                    <span class="tag">FTSE 100</span>
                    <span class="tag">London</span>
                    <span class="tag">Blue Chip</span>
                </div>
            </div>

            <!-- Hong Kong Stocks -->
            <div class="flashcard" data-id="hongkong-stocks" data-category="markets" data-connections="fundamental">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üá≠üá∞</span>
                    <h3 class="flashcard-title">Hong Kong Markets</h3>
                    <span class="flashcard-count">65</span>
                </div>
                <div class="flashcard-description">
                    Hong Kong Exchange (HKEX) top stocks - curated premium listings
                </div>
                <div class="flashcard-tags">
                    <span class="tag">HKEX</span>
                    <span class="tag">Asia Hub</span>
                    <span class="tag">Curated</span>
                </div>
            </div>

            <!-- Germany Stocks -->
            <div class="flashcard" data-id="germany-stocks" data-category="markets" data-connections="garp,fundamental">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üá©üá™</span>
                    <h3 class="flashcard-title">Germany Markets</h3>
                    <span class="flashcard-count">41</span>
                </div>
                <div class="flashcard-description">
                    DAX Index constituents from Wikipedia - German blue chips
                </div>
                <div class="flashcard-tags">
                    <span class="tag">DAX</span>
                    <span class="tag">XETRA</span>
                    <span class="tag">Europe</span>
                </div>
            </div>

            <!-- France Stocks -->
            <div class="flashcard" data-id="france-stocks" data-category="markets" data-connections="fundamental">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üá´üá∑</span>
                    <h3 class="flashcard-title">France Markets</h3>
                    <span class="flashcard-count">40</span>
                </div>
                <div class="flashcard-description">
                    CAC 40 Index constituents - French market leaders
                </div>
                <div class="flashcard-tags">
                    <span class="tag">CAC 40</span>
                    <span class="tag">Euronext</span>
                    <span class="tag">Europe</span>
                </div>
            </div>

            <!-- China Stocks -->
            <div class="flashcard" data-id="china-stocks" data-category="markets" data-connections="fundamental">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üá®üá≥</span>
                    <h3 class="flashcard-title">China Markets</h3>
                    <span class="flashcard-count">30</span>
                </div>
                <div class="flashcard-description">
                    Top Chinese stocks - curated premium A-share listings
                </div>
                <div class="flashcard-tags">
                    <span class="tag">SSE/SZSE</span>
                    <span class="tag">A-Shares</span>
                    <span class="tag">Curated</span>
                </div>
            </div>

            <!-- Canada Stocks -->
            <div class="flashcard" data-id="canada-stocks" data-category="markets" data-connections="fundamental">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üá®üá¶</span>
                    <h3 class="flashcard-title">Canada Markets</h3>
                    <span class="flashcard-count">20</span>
                </div>
                <div class="flashcard-description">
                    Top Canadian stocks - curated TSX listings
                </div>
                <div class="flashcard-tags">
                    <span class="tag">TSX</span>
                    <span class="tag">Americas</span>
                    <span class="tag">Curated</span>
                </div>
            </div>

            <!-- Switzerland Stocks -->
            <div class="flashcard" data-id="switzerland-stocks" data-category="markets" data-connections="fundamental">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üá®üá≠</span>
                    <h3 class="flashcard-title">Switzerland Markets</h3>
                    <span class="flashcard-count">10</span>
                </div>
                <div class="flashcard-description">
                    Top Swiss stocks - SIX Swiss Exchange curated premium listings
                </div>
                <div class="flashcard-tags">
                    <span class="tag">SIX</span>
                    <span class="tag">Europe</span>
                    <span class="tag">Quality</span>
                </div>
            </div>

            <!-- Netherlands Stocks -->
            <div class="flashcard" data-id="netherlands-stocks" data-category="markets" data-connections="fundamental">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üá≥üá±</span>
                    <h3 class="flashcard-title">Netherlands Markets</h3>
                    <span class="flashcard-count">6</span>
                </div>
                <div class="flashcard-description">
                    Top Dutch stocks - Euronext Amsterdam curated listings
                </div>
                <div class="flashcard-tags">
                    <span class="tag">Euronext</span>
                    <span class="tag">Amsterdam</span>
                    <span class="tag">Europe</span>
                </div>
            </div>

            <!-- Spain Stocks -->
            <div class="flashcard" data-id="spain-stocks" data-category="markets" data-connections="fundamental">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üá™üá∏</span>
                    <h3 class="flashcard-title">Spain Markets</h3>
                    <span class="flashcard-count">6</span>
                </div>
                <div class="flashcard-description">
                    Top Spanish stocks - BME Madrid curated listings
                </div>
                <div class="flashcard-tags">
                    <span class="tag">BME</span>
                    <span class="tag">Madrid</span>
                    <span class="tag">Europe</span>
                </div>
            </div>

            <!-- Italy Stocks -->
            <div class="flashcard" data-id="italy-stocks" data-category="markets" data-connections="fundamental">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üáÆüáπ</span>
                    <h3 class="flashcard-title">Italy Markets</h3>
                    <span class="flashcard-count">6</span>
                </div>
                <div class="flashcard-description">
                    Top Italian stocks - Borsa Italiana curated listings
                </div>
                <div class="flashcard-tags">
                    <span class="tag">BIT</span>
                    <span class="tag">Milan</span>
                    <span class="tag">Europe</span>
                </div>
            </div>

            <!-- Sweden Stocks -->
            <div class="flashcard" data-id="sweden-stocks" data-category="markets" data-connections="fundamental">
                <div class="flashcard-header">
                    <span class="flashcard-icon">üá∏üá™</span>
                    <h3 class="flashcard-title">Sweden Markets</h3>
                    <span class="flashcard-count">5</span>
                </div>
                <div class="flashcard-description">
                    Top Swedish stocks - OMX Stockholm curated listings
                </div>
                <div class="flashcard-tags">
                    <span class="tag">OMX</span>
                    <span class="tag">Stockholm</span>
                    <span class="tag">Nordic</span>
                </div>
            </div>

        </div>
    </div>

    <!-- Legend -->
    <div class="legend">
        <div class="legend-title">Connection Types</div>
        <div class="legend-item">
            <div class="legend-line"></div>
            <span>Data Flow</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: var(--gold);"></div>
            <span>Analysis Link</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: var(--green);"></div>
            <span>Tool Integration</span>
        </div>
    </div>

    <script>
        // Flashcard Network System
        class FlashcardNetwork {
            constructor() {
                this.flashcards = document.querySelectorAll('.flashcard');
                this.canvas = document.getElementById('networkCanvas');
                this.searchInput = document.getElementById('searchInput');
                this.filterBtns = document.querySelectorAll('.filter-btn');
                this.viewBtns = document.querySelectorAll('.view-btn');
                this.connectionCount = 0;

                this.init();
            }

            init() {
                this.setupEventListeners();
                this.updateConnectionCount();
                this.drawConnections();
                window.addEventListener('resize', () => this.drawConnections());
            }

            setupEventListeners() {
                // Search
                this.searchInput.addEventListener('input', (e) => this.handleSearch(e.target.value));

                // Enter key handler for search
                this.searchInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.keyCode === 13) {
                        e.preventDefault();
                        // Navigate to first visible flashcard
                        const firstVisible = Array.from(this.flashcards).find(
                            card => card.style.display !== 'none'
                        );
                        if (firstVisible) {
                            this.handleCardClick(firstVisible);
                        }
                    }
                });

                // Filter buttons
                this.filterBtns.forEach(btn => {
                    btn.addEventListener('click', () => {
                        this.filterBtns.forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        this.handleFilter(btn.dataset.filter);
                    });
                });

                // View toggle
                this.viewBtns.forEach(btn => {
                    btn.addEventListener('click', () => {
                        this.viewBtns.forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        this.handleView(btn.dataset.view);
                    });
                });

                // Flashcard hover
                this.flashcards.forEach(card => {
                    card.addEventListener('mouseenter', () => this.highlightConnections(card));
                    card.addEventListener('mouseleave', () => this.clearHighlights());
                    card.addEventListener('click', () => this.handleCardClick(card));
                });
            }

            handleSearch(query) {
                // Sanitize search input
                const sanitizedQuery = SpartanValidator.sanitizeInput(query);

                // Validate query length
                if (sanitizedQuery.length > 100) {
                    console.warn('Search query too long, truncating');
                    return;
                }

                const lowerQuery = sanitizedQuery.toLowerCase();
                this.flashcards.forEach(card => {
                    const text = card.textContent.toLowerCase();
                    if (text.includes(lowerQuery)) {
                        card.style.display = '';
                    } else {
                        card.style.display = 'none';
                    }
                });
            }

            handleFilter(filter) {
                this.flashcards.forEach(card => {
                    if (filter === 'all') {
                        card.style.display = '';
                    } else {
                        const category = card.dataset.category;
                        card.style.display = category === filter ? '' : 'none';
                    }
                });
            }

            handleView(view) {
                if (view === 'connections') {
                    this.showAllConnections();
                } else {
                    this.hideAllConnections();
                }
            }

            highlightConnections(card) {
                const connections = card.dataset.connections;
                if (!connections) return;

                card.classList.add('highlighted');
                const connectedIds = connections.split(',');

                connectedIds.forEach(id => {
                    const connectedCard = document.querySelector(`[data-id="${id}"]`);
                    if (connectedCard) {
                        connectedCard.classList.add('highlighted');
                        this.drawLine(card, connectedCard, true);
                    }
                });
            }

            clearHighlights() {
                this.flashcards.forEach(card => card.classList.remove('highlighted'));
                this.canvas.querySelectorAll('.connection-line').forEach(line => {
                    line.classList.remove('active');
                });
            }

            showAllConnections() {
                this.flashcards.forEach(card => {
                    const connections = card.dataset.connections;
                    if (connections) {
                        const connectedIds = connections.split(',');
                        connectedIds.forEach(id => {
                            const connectedCard = document.querySelector(`[data-id="${id}"]`);
                            if (connectedCard) {
                                this.drawLine(card, connectedCard, true);
                            }
                        });
                    }
                });
            }

            hideAllConnections() {
                this.clearHighlights();
            }

            drawConnections() {
                this.canvas.innerHTML = '';
                const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                svg.style.width = '100%';
                svg.style.height = '100%';
                this.canvas.appendChild(svg);
            }

            drawLine(card1, card2, active = false) {
                const rect1 = card1.getBoundingClientRect();
                const rect2 = card2.getBoundingClientRect();

                const x1 = rect1.left + rect1.width / 2;
                const y1 = rect1.top + rect1.height / 2;
                const x2 = rect2.left + rect2.width / 2;
                const y2 = rect2.top + rect2.height / 2;

                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                line.setAttribute('x1', x1);
                line.setAttribute('y1', y1);
                line.setAttribute('x2', x2);
                line.setAttribute('y2', y2);
                line.classList.add('connection-line');
                if (active) line.classList.add('active');

                this.canvas.querySelector('svg').appendChild(line);
            }

            updateConnectionCount() {
                let count = 0;
                this.flashcards.forEach(card => {
                    const connections = card.dataset.connections;
                    if (connections) {
                        count += connections.split(',').length;
                    }
                });
                document.getElementById('connectionCount').textContent = count;
                this.connectionCount = count;
            }

            handleCardClick(card) {
                // Prevent multiple clicks (debouncing)
                if (card.classList.contains('navigating')) {
                    return; // Already navigating, ignore additional clicks
                }

                const cardId = card.dataset.id;
                const pages = {
                    // Core Research Tools
                    'symbol-research': 'symbol_research.html',
                    'vix-analysis': 'symbol_search_connections.html',
                    'seasonality': 'seasonality_research.html',
                    'intermarket': 'intermarket_relationships.html',
                    'garp': 'garp.html',
                    'fundamental': 'fundamental_analysis.html',
                    'roce': 'roce_research.html',
                    'cycles': 'market_cycles.html',
                    'harmonic-cycles': 'harmonic_cycles.html',
                    'market-hub': 'unified_market_dashboard.html',
                    'chart-analytics': 'flashcard_dashboard.html',
                    'trading-journal': 'COMPREHENSIVE_TRADING_JOURNAL.html',
                    'pattern-finders': 'pattern_finder_hub.html',
                    'pattern-discovery': 'pattern_discovery_terminal.html',

                    // Intelligence Tools
                    'econometrics': 'econometrics.html',
                    'daily-planet': 'daily_planet.html',
                    'breakthrough-insights': 'breakthrough_insights.html',
                    'fred-economic': 'fred_global_complete.html',
                    'cot-intelligence': 'complete_cftc_cot_terminal.html',
                    'deal-hunters': 'deal_hunters.html',
                    'boom-bust': 'boom_or_bust.html',
                    'inflation-dashboard': 'inflation_dashboard.html',

                    // Country-Specific Market Overviews (all redirect to symbol research)
                    'usa-stocks': 'symbol_research.html',
                    'india-stocks': 'symbol_research.html',
                    'japan-stocks': 'symbol_research.html',
                    'china-stocks': 'symbol_research.html',
                    'hongkong-stocks': 'symbol_research.html',
                    'australia-stocks': 'symbol_research.html',
                    'uk-stocks': 'symbol_research.html',
                    'germany-stocks': 'symbol_research.html',
                    'france-stocks': 'symbol_research.html',
                    'netherlands-stocks': 'symbol_research.html',
                    'switzerland-stocks': 'symbol_research.html',
                    'spain-stocks': 'symbol_research.html',
                    'italy-stocks': 'symbol_research.html',
                    'sweden-stocks': 'symbol_research.html',
                    'canada-stocks': 'symbol_research.html',

                    // Emerging Sectors
                    'emerging-sectors': 'deal_hunters.html'
                };

                if (pages[cardId]) {
                    // Mark as navigating to prevent double-clicks
                    card.classList.add('navigating');

                    // Add visual feedback
                    card.style.opacity = '0.6';

                    // Open in SEPARATE TAB with unique name (reuses tab if already open!)
                    // Each page gets its own named window - clicking again will reuse that tab
                    const tabName = `spartan_${cardId}`;
                    window.open(pages[cardId], tabName);

                    // Reset visual state after brief delay
                    setTimeout(() => {
                        card.classList.remove('navigating');
                        card.style.opacity = '1';
                    }, 300);
                }
            }
        }

        // Update Breakthrough Insights Stats
        function updateBreakthroughStats() {
            try {
                const data = JSON.parse(localStorage.getItem('novel_insights_data') || '{}');
                let totalInsights = 0;
                let highImpact = 0;

                Object.values(data).forEach(pageData => {
                    if (pageData.insights && Array.isArray(pageData.insights)) {
                        totalInsights += pageData.insights.length;
                        highImpact += pageData.insights.filter(i => i.impact === 'high').length;
                    }
                });

                document.getElementById('totalInsightsCount').textContent = totalInsights;
                document.getElementById('highImpactCount').textContent = highImpact;
            } catch (error) {
                console.error('Error updating breakthrough stats:', error);
            }
        }

        // Update Deal Hunters Stats
        function updateDealHuntersStats() {
            try {
                const deals = JSON.parse(localStorage.getItem('deal_hunters_opportunities') || '[]');
                const dealsCount = deals.length;
                const topDeal = deals.length > 0 ? Math.max(...deals.map(d => d.potentialGain || 0)) : 0;

                document.getElementById('dealsFoundCount').textContent = dealsCount;
                document.getElementById('topDealPercent').textContent = topDeal.toFixed(2);
            } catch (error) {
                console.error('Error updating deal hunters stats:', error);
            }
        }

        // Update Boom or Bust Stats
        function updateBoomBustStats() {
            try {
                const data = JSON.parse(localStorage.getItem('boom_bust_data') || '{"composite": 50, "status": "Neutral"}');
                const score = data.composite || 50;

                document.getElementById('boomBustScore').textContent = score;

                const statusEl = document.getElementById('boomBustStatus');
                if (score >= 85) {
                    statusEl.textContent = 'üö® EXTREME BOOM';
                    statusEl.style.color = '#DC143C';
                } else if (score <= 15) {
                    statusEl.textContent = 'üö® EXTREME BUST';
                    statusEl.style.color = '#DC143C';
                } else if (score >= 70) {
                    statusEl.textContent = '‚ö†Ô∏è Boom Warning';
                    statusEl.style.color = '#FFD700';
                } else if (score <= 30) {
                    statusEl.textContent = '‚ö†Ô∏è Bust Warning';
                    statusEl.style.color = '#FFD700';
                } else {
                    statusEl.textContent = '‚öñÔ∏è Neutral';
                    statusEl.style.color = '#228B22';
                }
            } catch (error) {
                console.error('Error updating boom/bust stats:', error);
            }
        }

        // Update Inflation Stats
        function updateInflationStats() {
            try {
                const data = JSON.parse(localStorage.getItem('inflation_data') || '{}');
                if (data.latestCPI) {
                    document.getElementById('inflationCPI').textContent = data.latestCPI.toFixed(1);
                    document.getElementById('inflationRate').textContent = data.latestInflation.toFixed(2) + '%';
                } else {
                    document.getElementById('inflationCPI').textContent = 'N/A';
                    document.getElementById('inflationRate').textContent = 'N/A';
                }
            } catch (error) {
                console.error('Error updating inflation stats:', error);
            }
        }

        // Initialize the network
        // Symbol Database Status Checker
        async function updateSymbolDatabaseStatus() {
            try {
                // Fetch database stats from PostgreSQL
                const response = await fetch('/api/db/stats');
                const data = await response.json();

                if (data.total_symbols) {
                    // Update status badge
                    const badge = document.getElementById('symbolDbBadge');
                    if (badge) {
                        badge.style.background = 'rgba(34, 139, 34, 0.2)';
                        badge.style.color = '#00ff88';
                        badge.innerHTML = `‚óè ${data.total_symbols.toLocaleString()} READY`;
                    }

                    // Update database stats
                    const totalSymbols = document.getElementById('totalSymbols');
                    if (totalSymbols) {
                        totalSymbols.textContent = data.total_symbols.toLocaleString();
                    }

                    const totalCountries = document.getElementById('totalCountries');
                    if (totalCountries) {
                        totalCountries.textContent = data.countries || '25';
                    }

                    const totalExchanges = document.getElementById('totalExchanges');
                    if (totalExchanges) {
                        totalExchanges.textContent = (data.exchanges || '26') + '+';
                    }

                    console.log('‚úÖ Symbol Database: ' + data.total_symbols.toLocaleString() + ' symbols loaded');
                } else {
                    throw new Error('Database stats unavailable');
                }
            } catch (error) {
                // Database is offline or unavailable
                const badge = document.getElementById('symbolDbBadge');
                if (badge) {
                    badge.style.background = 'rgba(211, 47, 47, 0.2)';
                    badge.style.color = '#FF5252';
                    badge.innerHTML = '‚óè OFFLINE';
                }

                console.warn('‚ö†Ô∏è Symbol Database: Unavailable');
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            new FlashcardNetwork();
            updateBreakthroughStats();
            updateDealHuntersStats();
            updateBoomBustStats();
            updateInflationStats();
            updateSymbolDatabaseStatus(); // Check symbol database on load

            // Update stats every 10 seconds
            setInterval(updateBreakthroughStats, 10000);
            setInterval(updateDealHuntersStats, 10000);
            setInterval(updateBoomBustStats, 10000);
            setInterval(updateInflationStats, 10000);
            setInterval(updateSymbolDatabaseStatus, 30000); // Check database every 30 seconds
        });

        // ===== PATTERN DISCOVERY SYSTEM =====

        // Pattern Discovery - Refresh Pattern Function
        window.refreshPattern = async function(category) {
            // Map category to terminal ID and badge ID
            const categoryMap = {
                'stocks': 'stocks',
                'penny_stocks': 'pennystocks',
                'crypto': 'crypto',
                'forex': 'forex',
                'futures': 'futures',
                'cfds': 'cfds',
                'special_alert': 'special',
                'unique_daily': 'unique',
                'rare_gem': 'raregem',
                'billion_dollar': 'billion',
                'high_growth': 'highgrowth'
            };

            const terminalPrefix = categoryMap[category] || category;
            const terminalId = `${terminalPrefix}-pattern-terminal`;
            const badgeId = `${terminalPrefix}-pattern-badge`;

            const terminal = document.getElementById(terminalId);
            const badge = document.getElementById(badgeId);

            if (!terminal) {
                console.error(`Terminal not found: ${terminalId}`);
                return;
            }

            // Show loading state
            terminal.textContent = 'Discovering patterns...';
            if (badge) badge.textContent = 'Loading...';

            try {
                // Fetch pattern from API
                const response = await fetch(`/api/patterns/discover?type=${category}&count=1`);

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const data = await response.json();

                if (data.patterns && data.patterns.length > 0) {
                    const pattern = data.patterns[0];

                    // Format pattern based on category
                    let formattedOutput;
                    if (category === 'special_alert') {
                        formattedOutput = formatSpecialAlert(pattern);
                    } else if (category === 'billion_dollar') {
                        formattedOutput = formatBillionDollarMove(pattern);
                    } else if (category === 'high_growth') {
                        formattedOutput = formatHighGrowthSector(pattern);
                    } else {
                        formattedOutput = formatStandardPattern(pattern);
                    }

                    terminal.textContent = formattedOutput;

                    // Update badge
                    if (badge) {
                        badge.textContent = 'Click to refresh';
                        badge.style.background = 'rgba(0, 255, 136, 0.2)';
                        badge.style.color = '#00ff88';
                    }

                    console.log(`‚úÖ Pattern loaded for ${category}`);
                } else {
                    terminal.textContent = 'No patterns available for this market.\n\nClick to try again.';
                    if (badge) badge.textContent = 'No patterns';
                }
            } catch (error) {
                console.error(`Pattern discovery error for ${category}:`, error);
                terminal.textContent = `Error loading pattern: ${error.message}\n\nClick to retry.`;
                terminal.style.color = '#FF5252';
                if (badge) {
                    badge.textContent = 'Error';
                    badge.style.background = 'rgba(255, 82, 82, 0.2)';
                    badge.style.color = '#FF5252';
                }
            }
        };

        // Format Standard Pattern (Stocks, Penny Stocks, Crypto, Forex, Futures, CFDs, Unique Daily, Rare Gems)
        function formatStandardPattern(pattern) {
            const sep = '='.repeat(80);
            const now = new Date().toLocaleString('en-AU', {timeZone: 'Australia/Melbourne'});

            return `${sep}
>>> TRADE SETUP - ${now} MELBOURNE TIME
${sep}

MARKET:     ${pattern.market || 'N/A'}

SYMBOL:     ${pattern.symbol || 'N/A'}

DIRECTION:  ${pattern.direction || 'LONG'}  <--- ${(pattern.direction || 'LONG').toUpperCase()}

STRATEGY:   ${pattern.strategy || 'Pattern Recognition'}

SESSION:    ${pattern.session || 'US SESSION'}
            ${'='.repeat((pattern.session || 'US SESSION').length)}
ENTRY TIME: ${pattern.entry_time || 'Market Open'}

SIMPLE EXPLANATION:
  ${pattern.simple_explanation || pattern.catalyst || 'Pattern-based trade setup.'}

DETAILED SETUP:
  ${pattern.detailed_setup || pattern.simple_explanation || 'Follow entry rules and risk management.'}

PROFIT POTENTIAL: ${pattern.profit_potential || 'MODERATE'}
WIN RATE: ${pattern.win_rate || 'N/A'} | PROFIT FACTOR: ${pattern.profit_factor || 'N/A'}
AVG PROFIT: ${pattern.avg_winner || 'N/A'} | AVG LOSS: ${pattern.avg_loser || 'N/A'}

Source: ${pattern.source || 'Pattern Discovery System'}
Pattern ID: ${pattern.pattern_id || 'N/A'}
${sep}

>>> Click flashcard again for next UNIQUE pattern
`;
        }

        // Format SPECIAL ALERT (GAP/PLUMMET)
        function formatSpecialAlert(pattern) {
            const sep = '#'.repeat(80);

            return `${sep}
###                                                                          ###
###                      *** SPECIAL ALERT ***                               ###
###              EXTREME PRICE MOVEMENT EXPECTED                             ###
###                                                                          ###
${sep}

MARKET:     ${pattern.market || 'N/A'}
SYMBOL:     ${pattern.symbol || 'N/A'}
MOVEMENT:   ${pattern.movement || 'GAP UP'}  <--- ${(pattern.movement || 'GAP UP').toUpperCase()}
ENTRY TIME: ${pattern.entry_time || 'Pre-market'}

WHY IT WILL MOVE:
  ${pattern.catalyst || 'Extreme catalyst expected.'}

EXPECTED MOVE: ${pattern.expected_move || 'Significant'}
WIN RATE: ${pattern.win_rate || 'N/A'} | PROFIT FACTOR: ${pattern.profit_factor || 'N/A'}
AVG PROFIT: ${pattern.avg_winner || 'N/A'}

Source: ${pattern.source || 'Special Alert System'}
${sep}

>>> EXTREME MOVEMENT - Click for next ALERT
`;
        }

        // Format BILLION DOLLAR MOVE
        function formatBillionDollarMove(pattern) {
            const sep = '#'.repeat(80);

            return `${sep}
###                   BILLION DOLLAR MOVE DETECTED                          ###
${sep}

SYMBOL:          ${pattern.symbol || 'N/A'}
MARKET CAP:      ${pattern.market_cap || 'N/A'}
CHANGE:          $${pattern.change_billions || 'N/A'} BILLION
CHANGE %:        ${pattern.change_percent || 'N/A'}%
TRIGGER:         ${pattern.trigger || 'Market catalyst'}
TIMESTAMP:       ${pattern.timestamp || new Date().toLocaleString('en-AU')}
SEVERITY:        ${pattern.severity || 'EXTREME'}

OPPORTUNITY:     ${pattern.opportunity || 'Massive market cap change detected.'}

Source: Billion Dollar Move Detector
${sep}

>>> Click for next BILLION DOLLAR MOVE
`;
        }

        // Format HIGH-GROWTH SECTOR
        function formatHighGrowthSector(pattern) {
            const sep = '='.repeat(80);
            const now = new Date().toLocaleString('en-AU', {timeZone: 'Australia/Melbourne'});

            return `${sep}
>>> HIGH-GROWTH OPPORTUNITY - ${now}
${sep}

SECTOR:     ${pattern.sector || 'High-Growth'}
SYMBOL:     ${pattern.symbol || 'N/A'}
DIRECTION:  ${pattern.direction || 'LONG'}  <--- ${(pattern.direction || 'LONG').toUpperCase()}
SESSION:    ${pattern.session || 'US SESSION'}
            ${'='.repeat((pattern.session || 'US SESSION').length)}
ENTRY TIME: ${pattern.entry_time || 'Market Open'}

GROWTH CATALYST:
  ${pattern.catalyst || pattern.simple_explanation || 'High-growth sector opportunity.'}

PROFIT POTENTIAL: ${pattern.profit_potential || 'EXTREME - 200-500% potential over 12 months'}
WIN RATE: ${pattern.win_rate || 'N/A'} | PROFIT FACTOR: ${pattern.profit_factor || 'N/A'}
AVG PROFIT: ${pattern.avg_winner || 'N/A'} | AVG LOSS: ${pattern.avg_loser || 'N/A'}

Source: ${pattern.source || 'High-Growth Sectors Research'}
${sep}

>>> Click for next HIGH-GROWTH SECTOR opportunity
`;
        }

        // Auto-load patterns on page load
        document.addEventListener('DOMContentLoaded', () => {
            // Load one pattern for each category on page load
            const categories = [
                'stocks', 'penny_stocks', 'crypto', 'forex', 'futures', 'cfds',
                'special_alert', 'unique_daily', 'rare_gem', 'billion_dollar', 'high_growth'
            ];

            // Load patterns with staggered timing to avoid overwhelming the server
            categories.forEach((category, index) => {
                setTimeout(() => {
                    window.refreshPattern(category);
                }, index * 200); // 200ms delay between each
            });

            console.log('‚úÖ Pattern Discovery System initialized - 11 categories loaded');
        });

        // Cache busting
        console.log('Spartan Flashcard Network - Cache-Busting Active - ' + new Date().toISOString());
    </script>

    <!-- Global Keyboard Controls -->
    <script src="global_keyboard_controls.js"></script>

    <!-- Spartan Ticker System -->
    <script src="js/spartan_ticker.js"></script>
    <script>
        // Initialize ticker with ordered symbols: Indices ‚Üí Futures ‚Üí Stocks ‚Üí Forex ‚Üí Crypto ‚Üí CFDs
        document.addEventListener('DOMContentLoaded', () => {
            const ticker = new SpartanTicker('spartan-ticker', {
                scrollSpeed: 50,
                updateInterval: 60000,
                pauseOnHover: true
            });
        });
    </script>

    <!-- Initialize Market Regime Component -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize market regime indicator (pinned at top)
            const regime = new MarketRegimeComponent('market-regime-indicator', {
                pinned: true,
                showMetrics: true,
                showConfidence: true
            });

            // Auto-refresh every 5 minutes
            setInterval(() => regime.refresh(), 300000);
        });
    </script>

    <!-- Flashcard Manager - Drag & Drop, Editable, Pinned Sections -->
    <script src="flashcard_manager.js"></script>

    <!-- Emerging Sectors Scanner - 95% Overbought/Oversold Detection -->
    <script src="emerging_sectors.js"></script>
</body>
</html>
<!-- Cache bust 1761275922 -->
