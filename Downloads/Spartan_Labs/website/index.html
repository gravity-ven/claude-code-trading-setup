<!DOCTYPE html>
<html lang="en">
<head>
    <!-- ULTRA-AGGRESSIVE Cache Prevention -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate, max-age=0, post-check=0, pre-check=0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="cache-control" content="max-age=0">
    <meta name="last-modified" content="2025-10-24 15:05:00">
    <meta name="build-version" content="v2.3-HIGHLIGHTS-SECTION-ADDED">
    <!-- NEW: Highlights section with scrollable key insights from all tools - 2025-10-24 15:05 -->

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Intermarket Barometer Ticker -->
    <link rel="stylesheet" href="intermarket_ticker.css">
    <title>Spartan Research Station - Global Market Intelligence Network</title>

    <!-- üöÄ RAPID LOADING: Resource Hints -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- üöÄ RAPID LOADING: Optimized Font Loading -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="spartan_theme.css">

    <!-- Chart.js for Advanced Visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- üöÄ RAPID LOADING: Critical Scripts -->
    <script src="spartan_validator.js" defer></script>

    <!-- üöÄ BACKGROUND DATA PRELOADER: Loads ALL market data in background -->
    <script src="js/spartan-preloader.js"></script>
    <script src="js/no-na-integration.js"></script>

    <!-- Market Regime Component Scripts - DISABLED TO PREVENT DATA ERROR -->
    <!-- <script src="data_validator.js"></script> -->
    <!-- <script src="real_data_fetcher.js"></script> -->
    <!-- <script src="market_regime_component.js"></script> -->

    <!-- PostgreSQL Database API (replaces symbols_database.json) - DISABLED -->
    <!-- <script src="database_api.js"></script> -->

    <!-- Claude AI Chat Widget - Intelligent symbol search and analysis - DISABLED -->
    <!-- <script src="claude_chat.js"></script> -->

    <style>
        :root {
            /* Spartan Color Palette */
            --primary-color: #8B0000;        /* Spartan Red (Dark Red) */
            --secondary-color: #B22222;      /* Spartan Firebrick */
            --accent-color: #DC143C;         /* Spartan Crimson */
            --bg-dark: #0a1628;
            --bg-darker: #050b14;
            --bg-card: #12203a;
            --text-primary: #ffffff;
            --text-secondary: #b0b8c8;
            --border-color: #1e3a5f;
            --hover-glow: rgba(139, 0, 0, 0.3);  /* Spartan Red glow */
            --gold: #DC143C;
            --green: #228B22;                /* Forest Green */
            --blue: #000080;                 /* Navy Blue */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, var(--bg-dark) 0%, #1a1f3a 50%, #0a0e27 100%);
            color: var(--text-primary);
            min-height: 100vh;
            position: relative;
            padding-top: 0; /* Removed - market regime header disabled */
        }

        /* Header */
        .header {
            background: rgba(18, 32, 58, 0.98);
            backdrop-filter: blur(20px);
            padding: 20px 40px;
            border-bottom: 2px solid rgba(139, 0, 0, 0.3);  /* Spartan Red */
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-title {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header-title img {
            height: 50px;
        }

        .header-title h1 {
            font-size: 1.8em;
            color: var(--text-primary);
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        .header-subtitle {
            color: var(--text-secondary);
            font-size: 0.9em;
            margin-top: 4px;
        }

        .header-stats {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 1.6em;
            font-weight: 700;
            color: var(--gold);
            display: block;
        }

        .stat-label {
            font-size: 0.75em;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Controls */
        .controls {
            background: rgba(18, 32, 58, 0.95);
            padding: 15px 40px;
            border-bottom: 1px solid var(--border-color);
        }

        .controls-content {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            min-width: 300px;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 12px 45px 12px 20px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 0.95em;
            transition: all 0.2s;
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .search-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            font-size: 1.2em;
        }

        /* Navigation Tabs */
        .nav-tabs {
            background: var(--bg-card);
            border-bottom: 2px solid var(--border-color);
            padding: 0;
            margin: 0;
            position: relative;
            backdrop-filter: blur(20px);
        }

        .nav-tabs-container {
            width: 100%;
            margin: 0;
            display: flex;
            gap: 0;
            padding: 0;
        }

        .nav-tab {
            flex: 1;
            padding: 22px 32px;
            background: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            color: var(--text-secondary);
            font-size: 1.35em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            text-align: center;
        }

        .nav-tab:hover {
            color: var(--primary-color);
            background: rgba(139, 0, 0, 0.1);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(139, 0, 0, 0.3);
        }

        .nav-tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
            background: linear-gradient(180deg, rgba(139, 0, 0, 0.15), rgba(139, 0, 0, 0.08));
            box-shadow: 0 2px 10px rgba(139, 0, 0, 0.2);
        }

        .nav-tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg,
                transparent,
                var(--primary-color),
                transparent);
            animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        /* Tab Content Containers */
        .tab-content {
            display: none;
            padding: 40px;
            max-width: 1600px;
            margin: 0 auto;
        }

        .tab-content.active {
            display: block;
        }

        .indicator-section {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .indicator-section h2 {
            font-size: 1.8em;
            color: var(--primary-color);
            margin-bottom: 20px;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
        }

        .indicator-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .indicator-card {
            background: rgba(139, 0, 0, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .indicator-card:hover {
            border-color: var(--primary-color);
            box-shadow: 0 4px 12px rgba(139, 0, 0, 0.2);
            transform: translateY(-2px);
        }

        .indicator-card h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .pathway-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .pathway-card {
            background: linear-gradient(135deg, rgba(139, 0, 0, 0.08), rgba(178, 34, 34, 0.05));
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .pathway-card:hover {
            border-color: var(--primary-color);
            box-shadow: 0 8px 24px rgba(139, 0, 0, 0.3);
            transform: translateY(-4px);
        }

        .pathway-card h3 {
            color: var(--primary-color);
            font-size: 1.3em;
            margin-bottom: 10px;
        }

        .pathway-card p {
            color: var(--text-secondary);
            font-size: 0.9em;
        }

        .filter-btn {
            padding: 12px 20px;
            background: transparent;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-secondary);
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
        }

        .filter-btn:hover, .filter-btn.active {
            background: rgba(139, 0, 0, 0.1);  /* Spartan Red */
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .view-toggle {
            display: flex;
            gap: 5px;
            background: var(--bg-card);
            padding: 4px;
            border-radius: 8px;
        }

        .view-btn {
            padding: 8px 16px;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s;
            font-size: 0.9em;
        }

        .view-btn.active {
            background: var(--primary-color);
            color: white;
        }

        /* Edit Mode Toggle */
        .edit-mode-btn {
            padding: 10px 20px;
            background: rgba(255, 215, 0, 0.2);
            border: 1px solid var(--gold);
            border-radius: 8px;
            color: var(--gold);
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 600;
        }

        .edit-mode-btn:hover {
            background: rgba(255, 215, 0, 0.3);
            transform: translateY(-2px);
        }

        .edit-mode-btn.active {
            background: var(--gold);
            color: var(--bg-dark);
        }

        /* Main Container */
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 30px 40px;
        }

        /* Network Canvas */
        #networkCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        /* Flashcard Grid */
        .flashcard-network {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
            position: relative;
            z-index: 2;
        }

        /* Flashcard */
        .flashcard {
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            padding: 24px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .flashcard.draggable {
            cursor: grab;
        }

        .flashcard.dragging {
            opacity: 0.5;
            cursor: grabbing;
            transform: scale(1.05);
            z-index: 1000;
        }

        .flashcard.drag-over {
            border: 2px dashed var(--gold);
            background: rgba(255, 215, 0, 0.1);
        }

        .drag-handle {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.2em;
            color: var(--gold);
            opacity: 0;
            transition: opacity 0.2s;
            cursor: grab;
            z-index: 10;
        }

        .flashcard.draggable:hover .drag-handle {
            opacity: 1;
        }

        .edit-mode-active .drag-handle {
            opacity: 1 !important;
        }

        .flashcard::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            transform: scaleX(0);
            transition: transform 0.3s;
        }

        .flashcard:hover {
            transform: translateY(-4px);
            border-color: var(--primary-color);
        }

        .flashcard:hover::before {
            transform: scaleX(1);
        }

        .flashcard.highlighted {
            border-color: var(--gold);
        }

        /* Navigating State - Instant Visual Feedback */
        .flashcard.navigating {
            pointer-events: none;
            opacity: 0.6;
            transform: scale(0.98);
            transition: all 0.2s;
        }

        /* Pinned Flashcard (Daily Planet) */
        .flashcard.pinned {
            background: linear-gradient(135deg, var(--bg-card) 0%, rgba(139, 0, 0, 0.15) 100%);
            border: 2px solid var(--primary-color);
            box-shadow: 0 8px 32px rgba(139, 0, 0, 0.3);
            position: relative;
        }

        .flashcard.pinned::before {
            background: linear-gradient(90deg, var(--accent-color), var(--gold));
            transform: scaleX(1);
            height: 4px;
        }

        .flashcard.pinned::after {
            content: 'üìå';
            position: absolute;
            top: 12px;
            right: 12px;
            font-size: 1.5em;
            opacity: 0.7;
            animation: pulse 2s infinite;
        }

        .flashcard.pinned:hover {
            transform: translateY(-6px);
            box-shadow: 0 12px 40px rgba(139, 0, 0, 0.5);
        }

        .flashcard.pinned .flashcard-title {
            color: var(--accent-color);
            font-weight: 800;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.7; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.1); }
        }

        .flashcard-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .flashcard-icon {
            font-size: 2em;
            line-height: 1;
        }

        .flashcard-title {
            font-size: 1.2em;
            font-weight: 600;
            color: var(--text-primary);
        }

        .flashcard-count {
            background: rgba(139, 0, 0, 0.2);  /* Spartan Red */
            color: var(--gold);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin-left: auto;
        }

        .flashcard-description {
            color: var(--text-secondary);
            font-size: 0.9em;
            line-height: 1.6;
            margin-bottom: 16px;
        }

        .flashcard-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .tag {
            background: rgba(139, 0, 0, 0.1);  /* Spartan Red */
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 0.75em;
            color: var(--text-secondary);
            border: 1px solid rgba(139, 0, 0, 0.2);  /* Spartan Red */
        }

        /* Category Headers */
        .category-header {
            grid-column: 1 / -1;
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px 0 10px;
            border-bottom: 2px solid var(--border-color);
            margin-top: 30px;
        }

        .category-header:first-child {
            margin-top: 0;
        }

        .category-icon {
            font-size: 2em;
        }

        .category-title {
            font-size: 1.5em;
            font-weight: 700;
            color: var(--gold);
        }

        .category-count {
            background: rgba(255, 215, 0, 0.2);
            color: var(--gold);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
        }

        /* Connection Lines */
        .connection-line {
            stroke: var(--primary-color);
            stroke-width: 2;
            stroke-dasharray: 5, 5;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .connection-line.active {
            opacity: 0.6;
            animation: dash 20s linear infinite;
        }

        @keyframes dash {
            to {
                stroke-dashoffset: -1000;
            }
        }

        /* Legend */
        .legend {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(18, 32, 58, 0.95);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            z-index: 1000;
        }

        .legend-title {
            font-size: 0.9em;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 10px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
            font-size: 0.85em;
            color: var(--text-secondary);
        }

        .legend-line {
            width: 30px;
            height: 2px;
            background: var(--primary-color);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-stats {
                display: none;
            }

            .flashcard-network {
                grid-template-columns: 1fr;
            }

            .controls-content {
                flex-direction: column;
            }

            .search-box {
                width: 100%;
            }
        }

        /* AlphaStream Omni-Terminal Styles */
        .alphastream-terminal {
            background: linear-gradient(135deg, #0a0a1a 0%, #1a1a2e 100%);
            border: 2px solid #00F0FF;
            border-radius: 16px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 0 30px rgba(0, 240, 255, 0.2), inset 0 0 60px rgba(0, 240, 255, 0.05);
            position: relative;
            overflow: hidden;
        }

        .alphastream-terminal::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, transparent, #00F0FF, transparent);
            animation: terminalScan 3s linear infinite;
        }

        @keyframes terminalScan {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .terminal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0, 240, 255, 0.3);
        }

        .terminal-title {
            font-size: 28px;
            font-weight: 700;
            color: #00F0FF;
            text-shadow: 0 0 20px rgba(0, 240, 255, 0.5);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .terminal-status {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            animation: statusPulse 2s ease-in-out infinite;
        }

        .status-live { background: #00F0FF; box-shadow: 0 0 10px #00F0FF; }
        .status-stale { background: #888888; animation: none; }
        .status-error { background: #FF2A2A; box-shadow: 0 0 10px #FF2A2A; }

        @keyframes statusPulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(0.9); }
        }

        .terminal-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .terminal-card {
            background: rgba(0, 240, 255, 0.05);
            border: 1px solid rgba(0, 240, 255, 0.2);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .terminal-card:hover {
            border-color: #00F0FF;
            box-shadow: 0 0 20px rgba(0, 240, 255, 0.2);
            transform: translateY(-3px);
        }

        .terminal-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .terminal-card-title {
            font-size: 14px;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .terminal-card-badge {
            font-size: 10px;
            padding: 3px 8px;
            border-radius: 4px;
            text-transform: uppercase;
        }

        .badge-live { background: rgba(0, 240, 255, 0.2); color: #00F0FF; }
        .badge-stale { background: rgba(136, 136, 136, 0.2); color: #888888; }
        .badge-error { background: rgba(255, 42, 42, 0.2); color: #FF2A2A; }

        .terminal-value {
            font-size: 32px;
            font-weight: 700;
            font-family: 'Courier New', monospace;
            margin-bottom: 8px;
        }

        .value-live { color: #00F0FF; }
        .value-stale { color: #888888; }
        .value-error { color: #FF2A2A; }

        .terminal-change {
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .change-positive { color: #00ff88; }
        .change-negative { color: #FF2A2A; }

        .terminal-timestamp {
            font-size: 11px;
            color: #555;
            margin-top: 10px;
        }

        .terminal-footer {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid rgba(0, 240, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .data-integrity-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: #00F0FF;
            background: rgba(0, 240, 255, 0.1);
            padding: 8px 15px;
            border-radius: 20px;
            border: 1px solid rgba(0, 240, 255, 0.3);
        }

        .api-sources {
            display: flex;
            gap: 15px;
            font-size: 11px;
            color: #666;
        }

        .api-source {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .api-source-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }
    </style>

    <!-- Spartan Ticker Tape CSS - DISABLED -->
    <!-- <link rel="stylesheet" href="js/spartan_ticker.css"> -->
    <script src="/phantom/phantom_guardian.js"></script>
</head>
<body>
    <!-- Market Regime Indicator (Pinned at Top) - DISABLED TO PREVENT DATA ERROR -->
    <!-- <div id="market-regime-indicator"></div> -->

    <!-- SVG Canvas for Connections -->
    <svg id="networkCanvas"></svg>

    <!-- Header -->
    <div class="header">
        <div class="header-content">
            <div class="header-title">
                <img src="spartan_logo.png" alt="Spartan">
                <div>
                    <h1>Spartan Research Station</h1>
                    <div class="header-subtitle">Global Market Intelligence Network</div>
                </div>
            </div>
            <div class="header-stats">
                <div class="stat-item">
                    <span class="stat-number" id="totalSymbols">22,195</span>
                    <span class="stat-label">Symbols</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">15</span>
                    <span class="stat-label">Countries</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">25+</span>
                    <span class="stat-label">Exchanges</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="connectionCount">0</span>
                    <span class="stat-label">Connections</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Spartan Ticker Tape - DISABLED TO PREVENT DATA ERROR -->
    <!-- <div id="spartan-ticker" class="spartan-ticker-container"></div> -->

    <!-- Navigation Tabs -->
    <div class="nav-tabs">
        <div class="nav-tabs-container">
            <button class="nav-tab active" data-tab="summary">üìä Summary</button>
            <button class="nav-tab" data-tab="markets">üåç Markets</button>
            <button class="nav-tab" data-tab="research-tools">üî¨ Research Tools</button>
            <button class="nav-tab" data-tab="intelligence">üß† Intelligence</button>
            <button class="nav-tab" data-tab="news">üì∞ News</button>
            <button class="nav-tab" data-tab="research">üî¨ Research</button>
        </div>
    </div>

    <!-- Edit Layout Button -->
    <div style="position: fixed; bottom: 30px; left: 30px; z-index: 1000;">
        <button class="edit-mode-btn" id="editModeBtn" onclick="toggleEditMode()" style="padding: 12px 24px; font-size: 1.1em; background: rgba(139, 0, 0, 0.9); border: 2px solid #FFD700; border-radius: 8px; color: #FFD700; cursor: pointer; font-weight: 700; box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3); transition: all 0.3s ease;">
            ‚úèÔ∏è Edit Layout
        </button>
    </div>

    <!-- AlphaStream Omni-Terminal -->
    <section class="alphastream-terminal fade-in">
        <div class="terminal-header">
            <h2 class="terminal-title">
                <span>‚ö° AlphaStream Omni-Terminal</span>
            </h2>
            <div class="terminal-status">
                <span class="status-dot status-live" id="terminal-status-dot"></span>
                <span id="terminal-status-text">CONNECTING...</span>
            </div>
        </div>

        <div class="terminal-grid">
            <!-- Bitcoin -->
            <div class="terminal-card">
                <div class="terminal-card-header">
                    <span class="terminal-card-title">Bitcoin (BTC)</span>
                    <span class="terminal-card-badge badge-live" id="btc-badge">LIVE</span>
                </div>
                <div class="terminal-value value-live" id="alpha-btc-value">---</div>
                <div class="terminal-change" id="alpha-btc-change">
                    <span>---</span>
                </div>
                <div class="terminal-timestamp" id="alpha-btc-timestamp">Awaiting data...</div>
            </div>

            <!-- Ethereum -->
            <div class="terminal-card">
                <div class="terminal-card-header">
                    <span class="terminal-card-title">Ethereum (ETH)</span>
                    <span class="terminal-card-badge badge-live" id="eth-badge">LIVE</span>
                </div>
                <div class="terminal-value value-live" id="alpha-eth-value">---</div>
                <div class="terminal-change" id="alpha-eth-change">
                    <span>---</span>
                </div>
                <div class="terminal-timestamp" id="alpha-eth-timestamp">Awaiting data...</div>
            </div>

            <!-- Gold -->
            <div class="terminal-card">
                <div class="terminal-card-header">
                    <span class="terminal-card-title">Gold (XAU/USD)</span>
                    <span class="terminal-card-badge badge-live" id="gold-badge">LIVE</span>
                </div>
                <div class="terminal-value value-live" id="alpha-gold-value">---</div>
                <div class="terminal-change" id="alpha-gold-change">
                    <span>---</span>
                </div>
                <div class="terminal-timestamp" id="alpha-gold-timestamp">Awaiting data...</div>
            </div>

            <!-- S&P 500 -->
            <div class="terminal-card">
                <div class="terminal-card-header">
                    <span class="terminal-card-title">S&P 500 (SPY)</span>
                    <span class="terminal-card-badge badge-live" id="spy-badge">LIVE</span>
                </div>
                <div class="terminal-value value-live" id="alpha-spy-value">---</div>
                <div class="terminal-change" id="alpha-spy-change">
                    <span>---</span>
                </div>
                <div class="terminal-timestamp" id="alpha-spy-timestamp">Awaiting data...</div>
            </div>
        </div>

        <div class="terminal-footer">
            <div class="data-integrity-badge">
                <span>üîí ZERO-SIMULATION POLICY</span>
                <span style="color: #00ff88;">ACTIVE</span>
            </div>
            <div class="api-sources">
                <div class="api-source">
                    <span class="api-source-dot" id="coingecko-status" style="background: #888;"></span>
                    <span>CoinGecko</span>
                </div>
                <div class="api-source">
                    <span class="api-source-dot" id="alphavantage-status" style="background: #888;"></span>
                    <span>AlphaVantage</span>
                </div>
            </div>
        </div>
    </section>

    <!-- üéØ STEALTH MACRO INDICATOR -->
    <div id="stealthMacroSection" style="background: linear-gradient(135deg, rgba(18, 32, 58, 0.95), rgba(13, 27, 42, 0.95));
                border-top: 3px solid #bc13fe;
                border-bottom: 3px solid #bc13fe;
                padding: 40px 40px;
                margin: 0;
                box-shadow: 0 8px 32px rgba(188, 19, 254, 0.25);">
        <div style="max-width: 1600px; margin: 0 auto;">
            <!-- Title -->
            <div style="text-align: center; margin-bottom: 30px;">
                <h2 style="font-size: 2.4em; color: #bc13fe; margin-bottom: 12px; font-weight: 900; text-transform: uppercase; letter-spacing: 3px; text-shadow: 0 0 20px rgba(188, 19, 254, 0.5);">
                    üéØ Stealth Macro
                </h2>
                <p style="font-size: 1.2em; color: #ffffff; line-height: 1.6; max-width: 1000px; margin: 0 auto;">
                    <strong>Hidden Regime Detector</strong> ‚Äî Tracks subtle shifts in Dollar strength, Treasury yields, commodity flows, and equity risk appetite to identify macro regime changes <em>before</em> they become obvious.
                </p>
            </div>

            <!-- Macro Regime Status (Central Indicator) -->
            <div style="background: rgba(0, 0, 0, 0.4);
                        border: 2px solid var(--border-color);
                        border-radius: 15px;
                        padding: 25px;
                        margin-bottom: 30px;
                        text-align: center;
                        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);">
                <div style="font-size: 1.1em; color: var(--text-secondary); margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px;">
                    Current Macro Regime
                </div>
                <div id="macroRegimeStatus" style="font-size: 3em; font-weight: 900; margin-bottom: 10px; color: #FFD700;">
                    ‚ü≥ LOADING...
                </div>
                <div id="macroRegimeDescription" style="font-size: 1.1em; color: var(--text-secondary); line-height: 1.5; max-width: 700px; margin: 0 auto;">
                    Analyzing macro drivers...
                </div>
            </div>

            <!-- Six Macro Drivers Grid -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-bottom: 30px;">

                <!-- Dollar Strength (DXY) -->
                <div id="stealthDollarCard" style="background: rgba(18, 32, 58, 0.9);
                            border-left: 4px solid var(--accent-color);
                            border-radius: 10px;
                            padding: 20px;
                            box-shadow: 0 4px 15px rgba(220, 20, 60, 0.2);
                            transition: transform 0.3s ease;">
                    <div style="font-size: 1.8em; margin-bottom: 10px;">üíµ</div>
                    <h3 style="color: var(--accent-color); font-size: 1.3em; margin-bottom: 10px; font-weight: 700;">
                        Dollar (DXY) <span id="stealth-dxy-value" style="font-size: 1.1em; font-weight: 800; color: #FFD700;">--</span> <span id="stealth-dxy-arrow" style="font-size: 1.2em;">‚ü≥</span>
                    </h3>
                    <p style="color: #b0b8c8; font-size: 0.95em; line-height: 1.5;">
                        <strong id="stealth-dxy-signal">--</strong><br>
                        <span id="stealth-dxy-description">Strong Dollar = Risk-Off (commodities/EM down)</span>
                    </p>
                    <div id="stealth-dxy-change" style="margin-top: 10px; font-size: 0.9em; color: var(--text-secondary);">
                        5-day: <span id="stealth-dxy-5d">--</span>
                    </div>
                </div>

                <!-- Treasury Yields (10Y) -->
                <div id="stealthYieldCard" style="background: rgba(18, 32, 58, 0.9);
                            border-left: 4px solid #FFD700;
                            border-radius: 10px;
                            padding: 20px;
                            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.2);
                            transition: transform 0.3s ease;">
                    <div style="font-size: 1.8em; margin-bottom: 10px;">üìà</div>
                    <h3 style="color: #FFD700; font-size: 1.3em; margin-bottom: 10px; font-weight: 700;">
                        10Y Yield <span id="stealth-yield-value" style="font-size: 1.1em; font-weight: 800; color: #FFD700;">--</span> <span id="stealth-yield-arrow" style="font-size: 1.2em;">‚ü≥</span>
                    </h3>
                    <p style="color: #b0b8c8; font-size: 0.95em; line-height: 1.5;">
                        <strong id="stealth-yield-signal">--</strong><br>
                        <span id="stealth-yield-description">Rising yields = Growth expectations</span>
                    </p>
                    <div id="stealth-yield-change" style="margin-top: 10px; font-size: 0.9em; color: var(--text-secondary);">
                        5-day: <span id="stealth-yield-5d">--</span>
                    </div>
                </div>

                <!-- Gold (Safe Haven) -->
                <div id="stealthGoldCard" style="background: rgba(18, 32, 58, 0.9);
                            border-left: 4px solid #FFD700;
                            border-radius: 10px;
                            padding: 20px;
                            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.2);
                            transition: transform 0.3s ease;">
                    <div style="font-size: 1.8em; margin-bottom: 10px;">ü•á</div>
                    <h3 style="color: #FFD700; font-size: 1.3em; margin-bottom: 10px; font-weight: 700;">
                        Gold (GLD) <span id="stealth-gold-value" style="font-size: 1.1em; font-weight: 800; color: #FFD700;">--</span> <span id="stealth-gold-arrow" style="font-size: 1.2em;">‚ü≥</span>
                    </h3>
                    <p style="color: #b0b8c8; font-size: 0.95em; line-height: 1.5;">
                        <strong id="stealth-gold-signal">--</strong><br>
                        <span id="stealth-gold-description">Gold up = Fear/uncertainty rising</span>
                    </p>
                    <div id="stealth-gold-change" style="margin-top: 10px; font-size: 0.9em; color: var(--text-secondary);">
                        5-day: <span id="stealth-gold-5d">--</span>
                    </div>
                </div>

                <!-- Oil (Economic Activity) -->
                <div id="stealthOilCard" style="background: rgba(18, 32, 58, 0.9);
                            border-left: 4px solid var(--success-color);
                            border-radius: 10px;
                            padding: 20px;
                            box-shadow: 0 4px 15px rgba(0, 255, 136, 0.2);
                            transition: transform 0.3s ease;">
                    <div style="font-size: 1.8em; margin-bottom: 10px;">üõ¢Ô∏è</div>
                    <h3 style="color: var(--success-color); font-size: 1.3em; margin-bottom: 10px; font-weight: 700;">
                        Oil (USO) <span id="stealth-oil-value" style="font-size: 1.1em; font-weight: 800; color: #FFD700;">--</span> <span id="stealth-oil-arrow" style="font-size: 1.2em;">‚ü≥</span>
                    </h3>
                    <p style="color: #b0b8c8; font-size: 0.95em; line-height: 1.5;">
                        <strong id="stealth-oil-signal">--</strong><br>
                        <span id="stealth-oil-description">Oil up = Economic growth/inflation</span>
                    </p>
                    <div id="stealth-oil-change" style="margin-top: 10px; font-size: 0.9em; color: var(--text-secondary);">
                        5-day: <span id="stealth-oil-5d">--</span>
                    </div>
                </div>

                <!-- Equity Risk (SPY) -->
                <div id="stealthEquityCard" style="background: rgba(18, 32, 58, 0.9);
                            border-left: 4px solid var(--success-color);
                            border-radius: 10px;
                            padding: 20px;
                            box-shadow: 0 4px 15px rgba(0, 255, 136, 0.2);
                            transition: transform 0.3s ease;">
                    <div style="font-size: 1.8em; margin-bottom: 10px;">üìä</div>
                    <h3 style="color: var(--success-color); font-size: 1.3em; margin-bottom: 10px; font-weight: 700;">
                        SPY <span id="stealth-spy-value" style="font-size: 1.1em; font-weight: 800; color: #FFD700;">--</span> <span id="stealth-spy-arrow" style="font-size: 1.2em;">‚ü≥</span>
                    </h3>
                    <p style="color: #b0b8c8; font-size: 0.95em; line-height: 1.5;">
                        <strong id="stealth-spy-signal">--</strong><br>
                        <span id="stealth-spy-description">Equity strength = Risk appetite</span>
                    </p>
                    <div id="stealth-spy-change" style="margin-top: 10px; font-size: 0.9em; color: var(--text-secondary);">
                        5-day: <span id="stealth-spy-5d">--</span>
                    </div>
                </div>

                <!-- VIX (Fear Gauge) -->
                <div id="stealthVixCard" style="background: rgba(18, 32, 58, 0.9);
                            border-left: 4px solid #bc13fe;
                            border-radius: 10px;
                            padding: 20px;
                            box-shadow: 0 4px 15px rgba(188, 19, 254, 0.2);
                            transition: transform 0.3s ease;">
                    <div style="font-size: 1.8em; margin-bottom: 10px;">‚ö°</div>
                    <h3 style="color: #bc13fe; font-size: 1.3em; margin-bottom: 10px; font-weight: 700;">
                        VIX <span id="stealth-vix-value" style="font-size: 1.1em; font-weight: 800; color: #FFD700;">--</span> <span id="stealth-vix-arrow" style="font-size: 1.2em;">‚ü≥</span>
                    </h3>
                    <p style="color: #b0b8c8; font-size: 0.95em; line-height: 1.5;">
                        <strong id="stealth-vix-signal">--</strong><br>
                        <span id="stealth-vix-description">VIX spike = Market fear rising</span>
                    </p>
                    <div id="stealth-vix-change" style="margin-top: 10px; font-size: 0.9em; color: var(--text-secondary);">
                        5-day: <span id="stealth-vix-5d">--</span>
                    </div>
                </div>

            </div>

            <!-- Regime Interpretation Guide -->
            <div style="background: rgba(0, 0, 0, 0.3);
                        border: 1px solid var(--border-color);
                        border-radius: 10px;
                        padding: 20px;
                        margin-top: 20px;">
                <h3 style="color: var(--accent-color); font-size: 1.2em; margin-bottom: 15px; font-weight: 700;">
                    üìñ Regime Decoder
                </h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; font-size: 0.95em; line-height: 1.6; color: var(--text-secondary);">
                    <div>
                        <strong style="color: var(--success-color);">üü¢ RISK-ON:</strong> Weak Dollar + Rising Yields + Oil/SPY up + VIX down + Gold down
                    </div>
                    <div>
                        <strong style="color: var(--danger-color);">üî¥ RISK-OFF:</strong> Strong Dollar + Falling Yields + Oil/SPY down + VIX up + Gold up
                    </div>
                    <div>
                        <strong style="color: #FFD700;">üü° STAGFLATION:</strong> Rising Yields + Oil up + Gold up + SPY weak
                    </div>
                    <div>
                        <strong style="color: #bc13fe;">üü£ TRANSITION:</strong> Mixed signals ‚Äî regime change in progress
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ‚ö° VIX COMPOSITE INDICATOR (Markets + Crypto) -->
    <div id="vixCompositeSection" style="background: linear-gradient(135deg, rgba(13, 27, 42, 0.95), rgba(18, 32, 58, 0.95));
                border-top: 3px solid #FF5252;
                border-bottom: 3px solid #FF5252;
                padding: 35px 40px;
                margin: 0;
                box-shadow: 0 8px 32px rgba(255, 82, 82, 0.25);">
        <div style="max-width: 1600px; margin: 0 auto;">
            <!-- Title -->
            <div style="text-align: center; margin-bottom: 30px;">
                <h2 style="font-size: 2.2em; color: #FF5252; margin-bottom: 12px; font-weight: 900; text-transform: uppercase; letter-spacing: 3px; text-shadow: 0 0 20px rgba(255, 82, 82, 0.5);">
                    ‚ö° Volatility Composite
                </h2>
                <p style="font-size: 1.15em; color: #ffffff; line-height: 1.6; max-width: 1000px; margin: 0 auto;">
                    <strong>Markets + Crypto Fear Gauge</strong> ‚Äî Real-time volatility tracking across traditional markets (VIX) and crypto (BTC/ETH). High volatility = opportunity or danger depending on your strategy.
                </p>
            </div>

            <!-- Composite Score Display -->
            <div style="background: rgba(0, 0, 0, 0.4);
                        border: 2px solid var(--border-color);
                        border-radius: 15px;
                        padding: 25px;
                        margin-bottom: 25px;
                        text-align: center;
                        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);">
                <div style="font-size: 1.05em; color: var(--text-secondary); margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px;">
                    Composite Volatility Score
                </div>
                <div id="vixCompositeScore" style="font-size: 3.5em; font-weight: 900; margin-bottom: 10px; color: #FFD700;">
                    --
                </div>
                <div id="vixCompositeLabel" style="font-size: 1.2em; color: var(--text-secondary); font-weight: 700; margin-bottom: 15px;">
                    LOADING...
                </div>
                <!-- Volatility Bar -->
                <div style="width: 100%; max-width: 800px; height: 12px; background: rgba(255, 255, 255, 0.1); border-radius: 6px; margin: 0 auto; position: relative; overflow: hidden;">
                    <div id="vixCompositeBar" style="height: 100%; background: linear-gradient(90deg, #00ff88, #FFD700, #FF5252); border-radius: 6px; width: 50%; transition: width 0.5s ease;"></div>
                </div>
                <div style="display: flex; justify-content: space-between; max-width: 800px; margin: 10px auto 0; font-size: 0.85em; color: var(--text-secondary);">
                    <span>üü¢ Low (0-25)</span>
                    <span>üü° Normal (25-50)</span>
                    <span>üü† Elevated (50-75)</span>
                    <span>üî¥ Extreme (75-100)</span>
                </div>
            </div>

            <!-- Dual Volatility Sources -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 20px;">

                <!-- Traditional Markets VIX -->
                <div style="background: rgba(18, 32, 58, 0.9);
                            border: 2px solid #FF5252;
                            border-radius: 12px;
                            padding: 25px;
                            box-shadow: 0 4px 15px rgba(255, 82, 82, 0.2);">
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
                        <h3 style="color: #FF5252; font-size: 1.4em; margin: 0; font-weight: 700;">
                            üìà Market Volatility (VIX)
                        </h3>
                        <span id="vix-trend-arrow" style="font-size: 2em; color: #FFD700;">‚ü≥</span>
                    </div>

                    <!-- VIX Current Value -->
                    <div style="text-align: center; padding: 20px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                        <div style="font-size: 0.95em; color: var(--text-secondary); margin-bottom: 5px;">Current VIX</div>
                        <div id="vix-current-value" style="font-size: 2.8em; font-weight: 900; color: #FFD700;">--</div>
                    </div>

                    <!-- VIX Metrics -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                        <div>
                            <div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 5px;">Daily Change</div>
                            <div id="vix-daily-change" style="font-size: 1.3em; font-weight: 700; color: #FFD700;">--</div>
                        </div>
                        <div>
                            <div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 5px;">5-Day Change</div>
                            <div id="vix-5day-change" style="font-size: 1.3em; font-weight: 700; color: #FFD700;">--</div>
                        </div>
                    </div>

                    <!-- VIX Interpretation -->
                    <div style="margin-top: 15px; padding: 12px; background: rgba(0, 0, 0, 0.3); border-radius: 8px; border-left: 3px solid #FF5252;">
                        <div style="font-size: 0.9em; color: var(--text-secondary); margin-bottom: 5px;">Interpretation:</div>
                        <div id="vix-interpretation" style="font-size: 0.95em; color: #ffffff; line-height: 1.5;">
                            VIX measures expected S&P 500 volatility. Below 20 = calm, 20-30 = normal uncertainty, above 30 = fear.
                        </div>
                    </div>
                </div>

                <!-- Crypto Volatility -->
                <div style="background: rgba(18, 32, 58, 0.9);
                            border: 2px solid #bc13fe;
                            border-radius: 12px;
                            padding: 25px;
                            box-shadow: 0 4px 15px rgba(188, 19, 254, 0.2);">
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
                        <h3 style="color: #bc13fe; font-size: 1.4em; margin: 0; font-weight: 700;">
                            ‚Çø Crypto Volatility
                        </h3>
                        <span id="crypto-vol-trend-arrow" style="font-size: 2em; color: #FFD700;">‚ü≥</span>
                    </div>

                    <!-- Crypto Vol Score -->
                    <div style="text-align: center; padding: 20px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                        <div style="font-size: 0.95em; color: var(--text-secondary); margin-bottom: 5px;">Crypto Vol Index</div>
                        <div id="crypto-vol-score" style="font-size: 2.8em; font-weight: 900; color: #bc13fe;">--</div>
                    </div>

                    <!-- BTC and ETH Volatility -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                        <div>
                            <div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 5px;">BTC 5-Day Vol</div>
                            <div id="btc-volatility" style="font-size: 1.3em; font-weight: 700; color: #FFD700;">--</div>
                        </div>
                        <div>
                            <div style="font-size: 0.85em; color: var(--text-secondary); margin-bottom: 5px;">ETH 5-Day Vol</div>
                            <div id="eth-volatility" style="font-size: 1.3em; font-weight: 700; color: #FFD700;">--</div>
                        </div>
                    </div>

                    <!-- Crypto Vol Interpretation -->
                    <div style="margin-top: 15px; padding: 12px; background: rgba(0, 0, 0, 0.3); border-radius: 8px; border-left: 3px solid #bc13fe;">
                        <div style="font-size: 0.9em; color: var(--text-secondary); margin-bottom: 5px;">Interpretation:</div>
                        <div id="crypto-vol-interpretation" style="font-size: 0.95em; color: #ffffff; line-height: 1.5;">
                            Crypto volatility measures BTC/ETH price swings. High volatility = larger price moves (opportunity + risk).
                        </div>
                    </div>
                </div>

            </div>

            <!-- Volatility Thresholds Guide -->
            <div style="background: rgba(0, 0, 0, 0.3);
                        border: 1px solid var(--border-color);
                        border-radius: 10px;
                        padding: 20px;
                        margin-top: 25px;">
                <h3 style="color: var(--accent-color); font-size: 1.15em; margin-bottom: 15px; font-weight: 700;">
                    üìä Volatility Trading Guide
                </h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px; font-size: 0.95em; line-height: 1.6; color: var(--text-secondary);">
                    <div>
                        <strong style="color: #00ff88;">üü¢ LOW (0-25):</strong> Complacent markets, tight ranges, low option premiums
                    </div>
                    <div>
                        <strong style="color: #FFD700;">üü° NORMAL (25-50):</strong> Healthy volatility, normal trading conditions
                    </div>
                    <div>
                        <strong style="color: #FFA500;">üü† ELEVATED (50-75):</strong> Increased uncertainty, wider price swings
                    </div>
                    <div>
                        <strong style="color: #FF5252;">üî¥ EXTREME (75-100):</strong> Panic or euphoria, large intraday moves
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- üèÜ BEST COMPOSITE INDICATOR HIGHLIGHT -->
    <div style="background: linear-gradient(135deg, rgba(139, 0, 0, 0.15), rgba(178, 34, 34, 0.1));
                border-top: 3px solid #8B0000;
                border-bottom: 3px solid #8B0000;
                padding: 30px 40px;
                margin: 0;
                box-shadow: 0 8px 32px rgba(139, 0, 0, 0.3);">
        <div style="max-width: 1600px; margin: 0 auto;">
            <!-- Title -->
            <div style="text-align: center; margin-bottom: 25px;">
                <h2 style="font-size: 2.2em; color: #FFD700; margin-bottom: 8px; font-weight: 800; text-transform: uppercase; letter-spacing: 2px;">
                    üèÜ Best Composite Indicator
                </h2>
                <p style="font-size: 1.15em; color: #ffffff; line-height: 1.6; max-width: 900px; margin: 0 auto;">
                    <strong>AUD/JPY + HYG + US 10-Year Yield</strong> ‚Äî The ultimate risk sentiment barometer.
                    When all three align, they reveal institutional money flow between safety (bonds) and risk (stocks/credit).
                </p>
            </div>

            <!-- Three Indicators in Color-Coded Grid -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">

                <!-- AUD/JPY -->
                <div style="background: rgba(18, 32, 58, 0.9);
                            border-left: 4px solid #00ff88;
                            border-radius: 10px;
                            padding: 20px;
                            box-shadow: 0 4px 15px rgba(0, 255, 136, 0.2);">
                    <div style="font-size: 1.8em; margin-bottom: 10px;">üåè</div>
                    <h3 style="color: #00ff88; font-size: 1.3em; margin-bottom: 10px; font-weight: 700;">
                        AUD/JPY <span id="audjpy-value" style="font-size: 1.1em; font-weight: 800; color: #FFD700;">--</span> <span id="audjpy-arrow" style="font-size: 1.2em;">‚ü≥</span>
                    </h3>
                    <p style="color: #b0b8c8; font-size: 0.95em; line-height: 1.5;">
                        <strong>Risk-On/Risk-Off Barometer</strong><br>
                        Rising = Risk appetite (growth optimism)<br>
                        Falling = Risk aversion (safety seeking)
                    </p>
                </div>

                <!-- HYG (High Yield Bonds) -->
                <div style="background: rgba(18, 32, 58, 0.9);
                            border-left: 4px solid #DC143C;
                            border-radius: 10px;
                            padding: 20px;
                            box-shadow: 0 4px 15px rgba(220, 20, 60, 0.2);">
                    <div style="font-size: 1.8em; margin-bottom: 10px;">üí∞</div>
                    <h3 style="color: #DC143C; font-size: 1.3em; margin-bottom: 10px; font-weight: 700;">
                        HYG <span id="hyg-value" style="font-size: 1.1em; font-weight: 800; color: #FFD700;">--</span> <span id="hyg-arrow" style="font-size: 1.2em;">‚ü≥</span>
                    </h3>
                    <p style="color: #b0b8c8; font-size: 0.95em; line-height: 1.5;">
                        <strong>Credit Market Health</strong><br>
                        Rising = Junk bonds bid (risk-on)<br>
                        Falling = Credit stress (risk-off)
                    </p>
                </div>

                <!-- US 10-Year Yield -->
                <div style="background: rgba(18, 32, 58, 0.9);
                            border-left: 4px solid #FFD700;
                            border-radius: 10px;
                            padding: 20px;
                            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.2);">
                    <div style="font-size: 1.8em; margin-bottom: 10px;">üìà</div>
                    <h3 style="color: #FFD700; font-size: 1.3em; margin-bottom: 10px; font-weight: 700;">
                        US 10-Year Yield <span id="yield-value" style="font-size: 1.1em; font-weight: 800; color: #00ff88;">--</span> <span id="yield-arrow" style="font-size: 1.2em;">‚ü≥</span>
                    </h3>
                    <p style="color: #b0b8c8; font-size: 0.95em; line-height: 1.5;">
                        <strong>Bond Market Expectations</strong><br>
                        Rising = Growth/inflation bets<br>
                        Falling = Safety demand (deflationary)
                    </p>
                </div>

            </div>

            <!-- Composite Score -->
            <div style="margin-top: 25px;
                        text-align: center;
                        padding: 25px;
                        background: linear-gradient(135deg, rgba(139, 0, 0, 0.2), rgba(178, 34, 34, 0.15));
                        border-radius: 10px;
                        border: 2px solid rgba(255, 215, 0, 0.4);
                        box-shadow: 0 6px 20px rgba(255, 215, 0, 0.25);">
                <p style="color: #FFD700; font-size: 1.2em; font-weight: 700; margin-bottom: 12px; text-transform: uppercase; letter-spacing: 1px;">
                    üìä Composite Risk Score
                </p>
                <div style="display: flex; align-items: center; justify-content: center; gap: 15px;">
                    <div style="font-size: 3.5em; font-weight: 800; color: #FFD700;" id="composite-score">50</div>
                    <div style="text-align: left;">
                        <div style="font-size: 1.3em; font-weight: 600; color: #ffffff;" id="composite-label">NEUTRAL</div>
                        <div style="font-size: 0.9em; color: #b0b8c8;">out of 100</div>
                    </div>
                </div>
                <div style="margin-top: 15px; height: 8px; background: rgba(0, 0, 0, 0.3); border-radius: 4px; overflow: hidden;">
                    <div id="composite-bar" style="height: 100%; width: 50%; background: linear-gradient(90deg, #FF5252, #FFD700, #00ff88); transition: width 0.5s ease;"></div>
                </div>
                <p style="color: #b0b8c8; font-size: 0.85em; margin-top: 10px; font-style: italic;">
                    Live calculation based on AUD/JPY, HYG, and 10Y Yield movements
                </p>
            </div>

            <!-- Why This Matters -->
            <div style="margin-top: 20px;
                        text-align: center;
                        padding: 20px;
                        background: rgba(255, 215, 0, 0.08);
                        border-radius: 10px;
                        border: 1px solid rgba(255, 215, 0, 0.3);">
                <p style="color: #FFD700; font-size: 1.1em; font-weight: 600; margin-bottom: 8px;">
                    ‚ö° Why This Triple Combo Works
                </p>
                <p style="color: #ffffff; font-size: 1em; line-height: 1.6; max-width: 1000px; margin: 0 auto;">
                    When <strong>AUD/JPY rallies</strong>, <strong>HYG strengthens</strong>, and <strong>10-year yields rise</strong> together = Strong risk-on (buy stocks).
                    When all three fall together = Flee to safety (sell risk assets, buy bonds/yen/gold).
                </p>
            </div>
        </div>
    </div>

    <!-- Crypto Best Composite Indicator Section -->
    <div style="background: linear-gradient(135deg, rgba(0, 0, 0, 0.95), rgba(18, 32, 58, 0.9));
                padding: 50px 20px;
                margin-top: 0;">
        <div style="max-width: 1200px; margin: 0 auto;">
            <!-- Header -->
            <div style="text-align: center; margin-bottom: 30px;">
                <h2 style="font-size: 2.8em; color: #00ff88; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 2px; font-weight: 900;">
                    üöÄ Crypto Best Composite Indicator
                </h2>
                <p style="font-size: 1.15em; color: #ffffff; line-height: 1.6; max-width: 900px; margin: 0 auto;">
                    <strong>Bitcoin + Ethereum + Solana</strong> ‚Äî The ultimate crypto risk sentiment barometer.
                    When all three align, they reveal institutional and retail money flow in the digital asset ecosystem.
                </p>
            </div>

            <!-- Three Crypto Indicators in Color-Coded Grid -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">

                <!-- Bitcoin (BTC-USD) -->
                <div style="background: rgba(18, 32, 58, 0.9);
                            border-left: 4px solid #F7931A;
                            border-radius: 10px;
                            padding: 20px;
                            box-shadow: 0 4px 15px rgba(247, 147, 26, 0.2);">
                    <div style="font-size: 1.8em; margin-bottom: 10px;">‚Çø</div>
                    <h3 style="color: #F7931A; font-size: 1.3em; margin-bottom: 10px; font-weight: 700;">
                        Bitcoin <span id="crypto-btc-value" style="font-size: 1.1em; font-weight: 800; color: #FFD700;">--</span> <span id="crypto-btc-arrow" style="font-size: 1.2em;">‚ü≥</span>
                    </h3>
                    <p style="color: #b0b8c8; font-size: 0.95em; line-height: 1.5;">
                        <strong>Crypto Market Leader</strong><br>
                        Rising = Crypto risk-on (bull market)<br>
                        Falling = Crypto risk-off (bear market)
                    </p>
                </div>

                <!-- Ethereum (ETH-USD) -->
                <div style="background: rgba(18, 32, 58, 0.9);
                            border-left: 4px solid #627EEA;
                            border-radius: 10px;
                            padding: 20px;
                            box-shadow: 0 4px 15px rgba(98, 126, 234, 0.2);">
                    <div style="font-size: 1.8em; margin-bottom: 10px;">‚ü†</div>
                    <h3 style="color: #627EEA; font-size: 1.3em; margin-bottom: 10px; font-weight: 700;">
                        Ethereum <span id="crypto-eth-value" style="font-size: 1.1em; font-weight: 800; color: #FFD700;">--</span> <span id="crypto-eth-arrow" style="font-size: 1.2em;">‚ü≥</span>
                    </h3>
                    <p style="color: #b0b8c8; font-size: 0.95em; line-height: 1.5;">
                        <strong>Smart Contract Platform Health</strong><br>
                        Rising = DeFi/NFT ecosystem growth<br>
                        Falling = Altcoin weakness (risk-off)
                    </p>
                </div>

                <!-- Solana (SOL-USD) -->
                <div style="background: rgba(18, 32, 58, 0.9);
                            border-left: 4px solid #14F195;
                            border-radius: 10px;
                            padding: 20px;
                            box-shadow: 0 4px 15px rgba(20, 241, 149, 0.2);">
                    <div style="font-size: 1.8em; margin-bottom: 10px;">‚óé</div>
                    <h3 style="color: #14F195; font-size: 1.3em; margin-bottom: 10px; font-weight: 700;">
                        Solana <span id="crypto-sol-value" style="font-size: 1.1em; font-weight: 800; color: #FFD700;">--</span> <span id="crypto-sol-arrow" style="font-size: 1.2em;">‚ü≥</span>
                    </h3>
                    <p style="color: #b0b8c8; font-size: 0.95em; line-height: 1.5;">
                        <strong>High-Beta Altcoin Sentiment</strong><br>
                        Rising = Aggressive crypto risk-on<br>
                        Falling = Flight to BTC quality
                    </p>
                </div>

            </div>

            <!-- Crypto Composite Score -->
            <div style="margin-top: 25px;
                        text-align: center;
                        padding: 25px;
                        background: linear-gradient(135deg, rgba(0, 255, 136, 0.15), rgba(20, 241, 149, 0.1));
                        border-radius: 10px;
                        border: 2px solid rgba(0, 255, 136, 0.4);
                        box-shadow: 0 6px 20px rgba(0, 255, 136, 0.25);">
                <p style="color: #00ff88; font-size: 1.2em; font-weight: 700; margin-bottom: 12px; text-transform: uppercase; letter-spacing: 1px;">
                    üöÄ Crypto Risk Score
                </p>
                <div style="display: flex; align-items: center; justify-content: center; gap: 15px;">
                    <div style="font-size: 3.5em; font-weight: 800; color: #00ff88;" id="crypto-composite-score">50</div>
                    <div style="text-align: left;">
                        <div style="font-size: 1.3em; font-weight: 600; color: #ffffff;" id="crypto-composite-label">NEUTRAL</div>
                        <div style="font-size: 0.9em; color: #b0b8c8;">out of 100</div>
                    </div>
                </div>
                <div style="margin-top: 15px; height: 8px; background: rgba(0, 0, 0, 0.3); border-radius: 4px; overflow: hidden;">
                    <div id="crypto-composite-bar" style="height: 100%; width: 50%; background: linear-gradient(90deg, #FF5252, #F7931A, #00ff88); transition: width 0.5s ease;"></div>
                </div>
                <p style="color: #b0b8c8; font-size: 0.85em; margin-top: 10px; font-style: italic;">
                    Live calculation based on Bitcoin, Ethereum, and Solana movements
                </p>
            </div>

            <!-- Why This Crypto Combo Works -->
            <div style="margin-top: 20px;
                        text-align: center;
                        padding: 20px;
                        background: rgba(0, 255, 136, 0.08);
                        border-radius: 10px;
                        border: 1px solid rgba(0, 255, 136, 0.3);">
                <p style="color: #00ff88; font-size: 1.1em; font-weight: 600; margin-bottom: 8px;">
                    ‚ö° Why This Crypto Triple Combo Works
                </p>
                <p style="color: #ffffff; font-size: 1em; line-height: 1.6; max-width: 1000px; margin: 0 auto;">
                    When <strong>Bitcoin rallies</strong>, <strong>Ethereum strengthens</strong>, and <strong>Solana pumps</strong> together = Strong crypto risk-on (bull market).
                    When all three fall together = Crypto risk-off (sell altcoins, move to stablecoins/fiat).
                </p>
            </div>
        </div>
    </div>

    <!-- Probabilistic Recession Model Section -->
    <div style="background: linear-gradient(135deg, rgba(139, 0, 0, 0.3), rgba(0, 0, 0, 0.95));
                padding: 50px 20px;
                margin-top: 0;">
        <div style="max-width: 1200px; margin: 0 auto;">
            <!-- Header -->
            <div style="text-align: center; margin-bottom: 30px;">
                <h2 style="font-size: 2.8em; color: #DC143C; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 2px; font-weight: 900;">
                    üìâ Probabilistic Recession Model
                </h2>
                <p style="font-size: 1.15em; color: #ffffff; line-height: 1.6; max-width: 900px; margin: 0 auto;">
                    <strong>NY Fed Methodology</strong> ‚Äî Logistic regression using the 10Y-3M Treasury yield spread.
                    Predicts recession probability 12 months ahead with 80%+ historical accuracy.
                </p>
            </div>

            <!-- Key Metrics Grid -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-bottom: 25px;">

                <!-- 10Y-3M Spread -->
                <div style="background: rgba(18, 32, 58, 0.9);
                            border-left: 4px solid #FFD700;
                            border-radius: 10px;
                            padding: 20px;
                            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.2);">
                    <div style="font-size: 1.8em; margin-bottom: 10px;">üìä</div>
                    <h3 style="color: #FFD700; font-size: 1.3em; margin-bottom: 10px; font-weight: 700;">
                        10Y-3M Spread <span id="recession-spread-arrow" style="font-size: 1.2em;">‚ü≥</span>
                    </h3>
                    <div style="font-size: 2em; color: #ffffff; font-weight: 700;" id="recession-spread">--</div>
                    <p style="color: #b0b8c8; font-size: 0.9em; line-height: 1.4; margin-top: 8px;">
                        Yield curve spread. Negative = inverted (bearish signal)
                    </p>
                </div>

                <!-- Recession Probability -->
                <div style="background: rgba(18, 32, 58, 0.9);
                            border-left: 4px solid #DC143C;
                            border-radius: 10px;
                            padding: 20px;
                            box-shadow: 0 4px 15px rgba(220, 20, 60, 0.2);">
                    <div style="font-size: 1.8em; margin-bottom: 10px;">‚ö†Ô∏è</div>
                    <h3 style="color: #DC143C; font-size: 1.3em; margin-bottom: 10px; font-weight: 700;">
                        Recession Probability
                    </h3>
                    <div style="font-size: 2em; color: #DC143C; font-weight: 700;" id="recession-probability">--</div>
                    <p style="color: #b0b8c8; font-size: 0.9em; line-height: 1.4; margin-top: 8px;">
                        12-month forward probability using logistic regression
                    </p>
                </div>

                <!-- Risk Level -->
                <div style="background: rgba(18, 32, 58, 0.9);
                            border-left: 4px solid #FF5252;
                            border-radius: 10px;
                            padding: 20px;
                            box-shadow: 0 4px 15px rgba(255, 82, 82, 0.2);">
                    <div style="font-size: 1.8em; margin-bottom: 10px;" id="recession-risk-emoji">üü¢</div>
                    <h3 style="color: #FF5252; font-size: 1.3em; margin-bottom: 10px; font-weight: 700;">
                        Risk Level
                    </h3>
                    <div style="font-size: 1.6em; color: #ffffff; font-weight: 700;" id="recession-risk-level">LOADING</div>
                    <p style="color: #b0b8c8; font-size: 0.9em; line-height: 1.4; margin-top: 8px;" id="recession-risk-desc">
                        Calculating...
                    </p>
                </div>

            </div>

            <!-- Probability Visualization -->
            <div style="margin-top: 25px;
                        text-align: center;
                        padding: 25px;
                        background: linear-gradient(135deg, rgba(220, 20, 60, 0.2), rgba(139, 0, 0, 0.15));
                        border-radius: 10px;
                        border: 2px solid rgba(220, 20, 60, 0.4);
                        box-shadow: 0 6px 20px rgba(220, 20, 60, 0.25);">
                <p style="color: #DC143C; font-size: 1.2em; font-weight: 700; margin-bottom: 12px; text-transform: uppercase; letter-spacing: 1px;">
                    üìà Recession Risk Barometer
                </p>
                <div style="margin-top: 15px; height: 12px; background: rgba(0, 0, 0, 0.3); border-radius: 6px; overflow: hidden; position: relative;">
                    <!-- Risk zones -->
                    <div style="position: absolute; width: 15%; height: 100%; background: #00ff88; opacity: 0.3;"></div>
                    <div style="position: absolute; left: 15%; width: 15%; height: 100%; background: #FFD700; opacity: 0.3;"></div>
                    <div style="position: absolute; left: 30%; width: 20%; height: 100%; background: #ff9966; opacity: 0.3;"></div>
                    <div style="position: absolute; left: 50%; width: 20%; height: 100%; background: #FF5252; opacity: 0.3;"></div>
                    <div style="position: absolute; left: 70%; width: 30%; height: 100%; background: #8B0000; opacity: 0.3;"></div>
                    <!-- Probability indicator -->
                    <div id="recession-bar" style="position: absolute; height: 100%; width: 2px; background: #ffffff; box-shadow: 0 0 10px rgba(255,255,255,0.8); transition: left 0.5s ease; left: 0%;"></div>
                </div>
                <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 0.75em; color: #b0b8c8;">
                    <span>0% LOW</span>
                    <span>15%</span>
                    <span>30%</span>
                    <span>50%</span>
                    <span>70%</span>
                    <span>100% CRITICAL</span>
                </div>
                <p style="color: #b0b8c8; font-size: 0.85em; margin-top: 15px; font-style: italic;">
                    Model trained on 40+ years of economic data (1985-2024). 30%+ = elevated risk.
                </p>
            </div>

            <!-- Methodology Summary -->
            <div style="margin-top: 20px;
                        text-align: center;
                        padding: 20px;
                        background: rgba(220, 20, 60, 0.08);
                        border-radius: 10px;
                        border: 1px solid rgba(220, 20, 60, 0.3);">
                <p style="color: #DC143C; font-size: 1.1em; font-weight: 600; margin-bottom: 8px;">
                    üìö Industry-Standard Methodology
                </p>
                <p style="color: #ffffff; font-size: 1em; line-height: 1.6; max-width: 1000px; margin: 0 auto;">
                    Uses the same <strong>logistic regression model</strong> employed by the <strong>New York Federal Reserve</strong>.
                    When the 10Y-3M spread inverts (goes negative), recession risk increases dramatically.
                    <strong>Successfully predicted all 4 major recessions since 1985</strong> with 12-18 month lead time.
                </p>
            </div>
        </div>
    </div>

    <!-- üåê COMPREHENSIVE ECONOMIC CYCLE INTELLIGENCE DASHBOARD -->
    <div style="background: linear-gradient(135deg, rgba(0, 100, 200, 0.15), rgba(0, 50, 100, 0.25));
                border-top: 3px solid #00A8E8;
                border-bottom: 3px solid #00A8E8;
                padding: 50px 20px;
                margin: 0;">
        <div style="max-width: 1600px; margin: 0 auto;">

            <!-- Header -->
            <div style="text-align: center; margin-bottom: 40px;">
                <h2 style="font-size: 2.6em; color: #00A8E8; margin-bottom: 15px; font-weight: 900; text-transform: uppercase; letter-spacing: 3px; text-shadow: 0 0 25px rgba(0, 168, 232, 0.4);">
                    üåê Economic Cycle Intelligence
                </h2>
                <p style="font-size: 1.2em; color: #ffffff; line-height: 1.7; max-width: 1100px; margin: 0 auto;">
                    <strong>Comprehensive Business Cycle Analysis</strong> ‚Äî Real-time economic indicators, cycle phase detection, recession probability timeline, and sector rotation guidance powered by FRED economic data.
                </p>
            </div>

            <!-- Business Cycle Phase Indicator (Large Visual) -->
            <div style="background: rgba(0, 0, 0, 0.5);
                        border: 3px solid #00A8E8;
                        border-radius: 20px;
                        padding: 35px;
                        margin-bottom: 35px;
                        text-align: center;
                        box-shadow: 0 8px 30px rgba(0, 168, 232, 0.3);">
                <p style="color: #00A8E8; font-size: 1.3em; font-weight: 700; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 2px;">
                    Current Business Cycle Phase
                </p>
                <div style="font-size: 5em; margin: 15px 0;" id="cycle-phase-emoji">‚ü≥</div>
                <div style="font-size: 2.5em; font-weight: 900; color: #FFD700; margin-bottom: 10px;" id="cycle-phase-name">LOADING...</div>
                <div style="font-size: 1.1em; color: #b0b8c8; max-width: 700px; margin: 0 auto 15px;" id="cycle-phase-description">Analyzing economic indicators...</div>
                <div style="display: inline-block; background: rgba(0, 168, 232, 0.2); border: 1px solid #00A8E8; border-radius: 20px; padding: 8px 20px;">
                    <span style="color: #00A8E8; font-size: 0.95em; font-weight: 600;">Confidence: </span>
                    <span style="color: #FFD700; font-size: 1.1em; font-weight: 700;" id="cycle-phase-confidence">--</span>
                    <span style="color: #FFD700; font-size: 1.1em; font-weight: 700;">%</span>
                </div>
            </div>

            <!-- Key Economic Indicators Grid -->
            <div style="margin-bottom: 35px;">
                <p style="color: #00A8E8; font-size: 1.4em; font-weight: 700; margin-bottom: 20px; text-align: center; text-transform: uppercase; letter-spacing: 1px;">
                    üìä Key Economic Indicators
                </p>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 18px;">

                    <!-- GDP Growth -->
                    <div style="background: rgba(18, 32, 58, 0.9);
                                border-left: 4px solid #00ff88;
                                border-radius: 12px;
                                padding: 20px;
                                box-shadow: 0 4px 15px rgba(0, 255, 136, 0.2);">
                        <div style="font-size: 1.6em; margin-bottom: 8px;">üìà</div>
                        <h4 style="color: #00ff88; font-size: 1.1em; margin-bottom: 8px; font-weight: 700;">GDP Growth</h4>
                        <div style="font-size: 2.2em; color: #ffffff; font-weight: 700; margin-bottom: 5px;" id="econ-gdp-value">--</div>
                        <p style="color: #888; font-size: 0.85em;">Year-over-year</p>
                    </div>

                    <!-- Unemployment -->
                    <div style="background: rgba(18, 32, 58, 0.9);
                                border-left: 4px solid #FFD700;
                                border-radius: 12px;
                                padding: 20px;
                                box-shadow: 0 4px 15px rgba(255, 215, 0, 0.2);">
                        <div style="font-size: 1.6em; margin-bottom: 8px;">üë∑</div>
                        <h4 style="color: #FFD700; font-size: 1.1em; margin-bottom: 8px; font-weight: 700;">Unemployment</h4>
                        <div style="font-size: 2.2em; color: #ffffff; font-weight: 700; margin-bottom: 5px;" id="econ-unemployment-value">--</div>
                        <p style="color: #888; font-size: 0.85em;">Current rate</p>
                    </div>

                    <!-- CPI Inflation -->
                    <div style="background: rgba(18, 32, 58, 0.9);
                                border-left: 4px solid #FF5252;
                                border-radius: 12px;
                                padding: 20px;
                                box-shadow: 0 4px 15px rgba(255, 82, 82, 0.2);">
                        <div style="font-size: 1.6em; margin-bottom: 8px;">üí∞</div>
                        <h4 style="color: #FF5252; font-size: 1.1em; margin-bottom: 8px; font-weight: 700;">CPI Inflation</h4>
                        <div style="font-size: 2.2em; color: #ffffff; font-weight: 700; margin-bottom: 5px;" id="econ-cpi-value">--</div>
                        <p style="color: #888; font-size: 0.85em;">Year-over-year</p>
                    </div>

                    <!-- PCE Inflation -->
                    <div style="background: rgba(18, 32, 58, 0.9);
                                border-left: 4px solid #FFA500;
                                border-radius: 12px;
                                padding: 20px;
                                box-shadow: 0 4px 15px rgba(255, 165, 0, 0.2);">
                        <div style="font-size: 1.6em; margin-bottom: 8px;">üìä</div>
                        <h4 style="color: #FFA500; font-size: 1.1em; margin-bottom: 8px; font-weight: 700;">PCE Inflation</h4>
                        <div style="font-size: 2.2em; color: #ffffff; font-weight: 700; margin-bottom: 5px;" id="econ-pce-value">--</div>
                        <p style="color: #888; font-size: 0.85em;">Fed preferred</p>
                    </div>

                    <!-- Consumer Confidence -->
                    <div style="background: rgba(18, 32, 58, 0.9);
                                border-left: 4px solid #00A8E8;
                                border-radius: 12px;
                                padding: 20px;
                                box-shadow: 0 4px 15px rgba(0, 168, 232, 0.2);">
                        <div style="font-size: 1.6em; margin-bottom: 8px;">üòä</div>
                        <h4 style="color: #00A8E8; font-size: 1.1em; margin-bottom: 8px; font-weight: 700;">Consumer Confidence</h4>
                        <div style="font-size: 2.2em; color: #ffffff; font-weight: 700; margin-bottom: 5px;" id="econ-confidence-value">--</div>
                        <p style="color: #888; font-size: 0.85em;">UM Sentiment</p>
                    </div>

                    <!-- Leading Economic Index -->
                    <div style="background: rgba(18, 32, 58, 0.9);
                                border-left: 4px solid #9C27B0;
                                border-radius: 12px;
                                padding: 20px;
                                box-shadow: 0 4px 15px rgba(156, 39, 176, 0.2);">
                        <div style="font-size: 1.6em; margin-bottom: 8px;">üîÆ</div>
                        <h4 style="color: #9C27B0; font-size: 1.1em; margin-bottom: 8px; font-weight: 700;">Leading Index</h4>
                        <div style="font-size: 2.2em; color: #ffffff; font-weight: 700; margin-bottom: 5px;" id="econ-lei-value">--</div>
                        <p style="color: #888; font-size: 0.85em;">Forward looking</p>
                    </div>

                </div>
            </div>

            <!-- Recession Probability Timeline -->
            <div style="background: linear-gradient(135deg, rgba(139, 0, 0, 0.25), rgba(220, 20, 60, 0.15));
                        border: 2px solid #DC143C;
                        border-radius: 15px;
                        padding: 30px;
                        margin-bottom: 35px;
                        box-shadow: 0 6px 25px rgba(220, 20, 60, 0.3);">
                <p style="color: #DC143C; font-size: 1.5em; font-weight: 700; margin-bottom: 20px; text-align: center; text-transform: uppercase; letter-spacing: 1px;">
                    üìâ Recession Probability Timeline
                </p>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px;">

                    <!-- 3-Month -->
                    <div style="text-align: center; background: rgba(0, 0, 0, 0.3); border-radius: 10px; padding: 18px;">
                        <p style="color: #FFD700; font-size: 1.1em; font-weight: 600; margin-bottom: 8px;">3-Month</p>
                        <div style="font-size: 2.8em; color: #00ff88; font-weight: 900; margin-bottom: 5px;" id="recession-3m">--</div>
                        <p style="color: #888; font-size: 0.9em;">Near-term risk</p>
                    </div>

                    <!-- 6-Month -->
                    <div style="text-align: center; background: rgba(0, 0, 0, 0.3); border-radius: 10px; padding: 18px;">
                        <p style="color: #FFD700; font-size: 1.1em; font-weight: 600; margin-bottom: 8px;">6-Month</p>
                        <div style="font-size: 2.8em; color: #FFA500; font-weight: 900; margin-bottom: 5px;" id="recession-6m">--</div>
                        <p style="color: #888; font-size: 0.9em;">Medium-term risk</p>
                    </div>

                    <!-- 12-Month -->
                    <div style="text-align: center; background: rgba(0, 0, 0, 0.3); border-radius: 10px; padding: 18px;">
                        <p style="color: #FFD700; font-size: 1.1em; font-weight: 600; margin-bottom: 8px;">12-Month</p>
                        <div style="font-size: 2.8em; color: #DC143C; font-weight: 900; margin-bottom: 5px;" id="recession-12m">--</div>
                        <p style="color: #888; font-size: 0.9em;">Full model probability</p>
                    </div>

                </div>
                <p style="text-align: center; color: #b0b8c8; font-size: 0.95em; font-style: italic;">
                    Based on NY Fed yield curve model. 10Y-3M spread: <span id="recession-spread" style="color: #FFD700; font-weight: 700;">--</span>%
                </p>
            </div>

            <!-- Economic Regime Matrix (4-Quadrant) -->
            <div style="background: rgba(0, 0, 0, 0.5);
                        border: 2px solid #00A8E8;
                        border-radius: 15px;
                        padding: 30px;
                        margin-bottom: 35px;
                        box-shadow: 0 6px 25px rgba(0, 168, 232, 0.25);">
                <p style="color: #00A8E8; font-size: 1.5em; font-weight: 700; margin-bottom: 25px; text-align: center; text-transform: uppercase; letter-spacing: 1px;">
                    üå°Ô∏è Economic Regime Matrix
                </p>

                <!-- Current Regime Status -->
                <div style="text-align: center; margin-bottom: 25px; padding: 20px; background: rgba(0, 168, 232, 0.1); border-radius: 10px;">
                    <div style="font-size: 3.5em; margin-bottom: 10px;" id="regime-emoji">‚ü≥</div>
                    <div style="font-size: 2em; font-weight: 900; color: #FFD700; margin-bottom: 8px;" id="regime-name">LOADING...</div>
                    <div style="font-size: 1.1em; color: #ffffff; margin-bottom: 12px;" id="regime-description">Analyzing growth and inflation...</div>
                    <div style="background: rgba(0, 168, 232, 0.2); display: inline-block; padding: 8px 20px; border-radius: 20px; border: 1px solid #00A8E8;">
                        <span style="color: #00A8E8; font-size: 0.95em;" id="regime-quadrant">-- / --</span>
                    </div>
                </div>

                <!-- 4-Quadrant Visual Grid -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; max-width: 600px; margin: 0 auto 20px;">

                    <!-- Quadrant 1: Goldilocks (High Growth, Low Inflation) -->
                    <div style="background: linear-gradient(135deg, rgba(0, 255, 136, 0.15), rgba(0, 168, 232, 0.15));
                                border: 2px solid rgba(0, 255, 136, 0.4);
                                border-radius: 12px;
                                padding: 18px;
                                text-align: center;
                                transition: all 0.3s ease;"
                         id="regime-quad-goldilocks">
                        <div style="font-size: 2em; margin-bottom: 5px;">‚ú®</div>
                        <div style="font-size: 1em; font-weight: 700; color: #00ff88; margin-bottom: 5px;">GOLDILOCKS</div>
                        <div style="font-size: 0.75em; color: #b0b8c8;">High Growth<br>Low Inflation</div>
                    </div>

                    <!-- Quadrant 2: Reflation (High Growth, High Inflation) -->
                    <div style="background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(255, 165, 0, 0.15));
                                border: 2px solid rgba(255, 215, 0, 0.4);
                                border-radius: 12px;
                                padding: 18px;
                                text-align: center;
                                transition: all 0.3s ease;"
                         id="regime-quad-reflation">
                        <div style="font-size: 2em; margin-bottom: 5px;">üî•</div>
                        <div style="font-size: 1em; font-weight: 700; color: #FFD700; margin-bottom: 5px;">REFLATION</div>
                        <div style="font-size: 0.75em; color: #b0b8c8;">High Growth<br>High Inflation</div>
                    </div>

                    <!-- Quadrant 3: Deflation (Low Growth, Low Inflation) -->
                    <div style="background: linear-gradient(135deg, rgba(0, 168, 232, 0.15), rgba(100, 149, 237, 0.15));
                                border: 2px solid rgba(0, 168, 232, 0.4);
                                border-radius: 12px;
                                padding: 18px;
                                text-align: center;
                                transition: all 0.3s ease;"
                         id="regime-quad-deflation">
                        <div style="font-size: 2em; margin-bottom: 5px;">‚ùÑÔ∏è</div>
                        <div style="font-size: 1em; font-weight: 700; color: #00A8E8; margin-bottom: 5px;">DEFLATION</div>
                        <div style="font-size: 0.75em; color: #b0b8c8;">Low Growth<br>Low Inflation</div>
                    </div>

                    <!-- Quadrant 4: Stagflation (Low Growth, High Inflation) -->
                    <div style="background: linear-gradient(135deg, rgba(220, 20, 60, 0.15), rgba(255, 82, 82, 0.15));
                                border: 2px solid rgba(220, 20, 60, 0.4);
                                border-radius: 12px;
                                padding: 18px;
                                text-align: center;
                                transition: all 0.3s ease;"
                         id="regime-quad-stagflation">
                        <div style="font-size: 2em; margin-bottom: 5px;">üå°Ô∏è</div>
                        <div style="font-size: 1em; font-weight: 700; color: #FF5252; margin-bottom: 5px;">STAGFLATION</div>
                        <div style="font-size: 0.75em; color: #b0b8c8;">Low Growth<br>High Inflation</div>
                    </div>

                </div>

                <!-- Investment Strategy -->
                <div style="background: rgba(0, 168, 232, 0.1); border-radius: 10px; padding: 18px; text-align: center;">
                    <p style="color: #00A8E8; font-size: 1em; font-weight: 600; margin-bottom: 8px;">üí° Recommended Strategy</p>
                    <p style="color: #ffffff; font-size: 1.1em; font-weight: 700;" id="regime-strategy">--</p>
                </div>
            </div>

            <!-- Sector Rotation Guidance -->
            <div style="background: rgba(0, 0, 0, 0.5);
                        border: 2px solid #FFD700;
                        border-radius: 15px;
                        padding: 30px;
                        box-shadow: 0 6px 25px rgba(255, 215, 0, 0.25);">
                <p style="color: #FFD700; font-size: 1.5em; font-weight: 700; margin-bottom: 20px; text-align: center; text-transform: uppercase; letter-spacing: 1px;">
                    üîÑ Sector Rotation Guidance
                </p>
                <p style="text-align: center; color: #b0b8c8; margin-bottom: 25px; font-size: 1em;">
                    Based on <strong style="color: #FFD700;" id="rotation-cycle-phase">--</strong> phase
                </p>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;">

                    <!-- Buy Sectors -->
                    <div style="background: rgba(0, 255, 136, 0.1);
                                border: 2px solid #00ff88;
                                border-radius: 12px;
                                padding: 20px;">
                        <div style="display: flex; align-items: center; margin-bottom: 15px;">
                            <div style="font-size: 2em; margin-right: 10px;">‚úÖ</div>
                            <h4 style="color: #00ff88; font-size: 1.3em; font-weight: 700; margin: 0;">BUY</h4>
                        </div>
                        <ul style="list-style: none; padding: 0; margin: 0;" id="sector-buy">
                            <li style="color: #b0b8c8; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">Loading...</li>
                        </ul>
                    </div>

                    <!-- Hold Sectors -->
                    <div style="background: rgba(255, 215, 0, 0.1);
                                border: 2px solid #FFD700;
                                border-radius: 12px;
                                padding: 20px;">
                        <div style="display: flex; align-items: center; margin-bottom: 15px;">
                            <div style="font-size: 2em; margin-right: 10px;">‚è∏Ô∏è</div>
                            <h4 style="color: #FFD700; font-size: 1.3em; font-weight: 700; margin: 0;">HOLD</h4>
                        </div>
                        <ul style="list-style: none; padding: 0; margin: 0;" id="sector-hold">
                            <li style="color: #b0b8c8; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">Loading...</li>
                        </ul>
                    </div>

                    <!-- Sell Sectors -->
                    <div style="background: rgba(220, 20, 60, 0.1);
                                border: 2px solid #DC143C;
                                border-radius: 12px;
                                padding: 20px;">
                        <div style="display: flex; align-items: center; margin-bottom: 15px;">
                            <div style="font-size: 2em; margin-right: 10px;">‚ùå</div>
                            <h4 style="color: #DC143C; font-size: 1.3em; font-weight: 700; margin: 0;">SELL / AVOID</h4>
                        </div>
                        <ul style="list-style: none; padding: 0; margin: 0;" id="sector-sell">
                            <li style="color: #b0b8c8; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">Loading...</li>
                        </ul>
                    </div>

                </div>

                <p style="text-align: center; color: #888; font-size: 0.9em; margin-top: 20px; font-style: italic;">
                    Sector rotation based on business cycle phase. Adjust for risk tolerance and time horizon.
                </p>
            </div>

            <!-- Data Source & Timestamp -->
            <div style="text-align: center; margin-top: 25px; padding: 15px; background: rgba(0, 168, 232, 0.05); border-radius: 10px;">
                <p style="color: #00A8E8; font-size: 0.95em; margin-bottom: 5px;">
                    <strong>üîí ZERO-SIMULATION POLICY:</strong> All data from FRED API (Federal Reserve Economic Data)
                </p>
                <p style="color: #888; font-size: 0.85em;">
                    Last Updated: <span id="econ-dashboard-timestamp" style="color: #FFD700;">--</span>
                </p>
            </div>

        </div>
    </div>

    <!-- Global Multi-Asset Market Sentiment Dashboard (Markets Tab) -->
    <div id="global-markets-dashboard" style="display: none; background: linear-gradient(135deg, var(--bg-dark) 0%, #1a1f3a 50%, #0a0e27 100%); padding: 50px 20px;">
        <div style="max-width: 1600px; margin: 0 auto;">

            <!-- Header -->
            <div style="margin-bottom: 60px; text-align: center; border-bottom: 2px solid var(--border-color); padding-bottom: 30px;">
                <div style="display: flex; flex-direction: column; md:flex-direction: row; justify-content: space-between; align-items: center;">
                    <div>
                        <h1 style="font-size: 3.5em; font-weight: 900; background: linear-gradient(to right, #60A5FA, #A855F7); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 10px;">
                            Global Markets
                        </h1>
                        <h2 style="font-size: 1.5em; color: var(--text-secondary); font-weight: 300;">Composite Sentiment & 14-Day Outlook</h2>
                    </div>
                    <div style="margin-top: 20px;">
                        <div style="display: inline-block; background: var(--bg-card); border-radius: 8px; padding: 15px 25px; border: 1px solid var(--border-color);">
                            <span style="display: block; font-size: 0.75em; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1.5px;">Dominant Narrative</span>
                            <span id="dominant-narrative" style="display: block; font-size: 1.2em; font-weight: 700; color: #00ff88;">Risk-On / Inflation Hedge</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 1: The Big Picture (Overview) -->
            <section style="margin-bottom: 80px;">
                <div style="display: grid; grid-template-columns: 1fr; lg:grid-template-columns: 1fr 2fr; gap: 40px;">
                    <!-- Intro Text -->
                    <div style="space-y: 20px;">
                        <h3 style="font-size: 1.8em; font-weight: 700; color: #ffffff; border-left: 4px solid var(--primary-color); padding-left: 15px;">Market Pulse</h3>
                        <p style="color: var(--text-secondary); line-height: 1.8;">
                            While Crypto exhibits "Greed," traditional markets are painting a more nuanced picture. <strong>Gold and Silver</strong> are catching a bid as inflation hedges, while <strong>Energy (Oil)</strong> lags due to supply gluts.
                        </p>
                        <p style="color: var(--text-secondary); line-height: 1.8;">
                            <strong>Equity Futures</strong> remain strong, correlating with the risk-on sentiment, but <strong>Bonds</strong> are suffering as yields creep higher, signaling investors expect rates to stay elevated.
                        </p>
                        <div style="background: rgba(139, 0, 0, 0.2); padding: 20px; border-radius: 8px; border: 1px solid rgba(139, 0, 0, 0.3); margin-top: 20px;">
                            <h4 style="color: var(--primary-color); font-weight: 700; margin-bottom: 5px;">Key Takeaway</h4>
                            <p style="font-size: 0.9em; color: var(--text-secondary);">Commodities are decoupling. Industrial metals are waiting for manufacturing data, while precious metals join the liquidity rally.</p>
                        </div>
                    </div>

                    <!-- Main Bar Chart: Sentiment Ranking -->
                    <div style="background: var(--bg-card); border-radius: 12px; border: 1px solid var(--border-color); padding: 30px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);">
                        <h4 style="font-size: 1.2em; font-weight: 600; color: var(--text-primary); margin-bottom: 20px;">Composite Sentiment Score (0 = Extreme Fear, 100 = Extreme Greed)</h4>
                        <div style="position: relative; height: 400px;">
                            <canvas id="overviewBarChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 2: Precious Metals (Gold, Silver, Platinum) -->
            <section style="margin-bottom: 80px;">
                <div style="display: flex; align-items: center; margin-bottom: 30px;">
                    <div style="width: 40px; height: 4px; background: #FFD700; margin-right: 15px;"></div>
                    <h3 style="font-size: 2em; font-weight: 700; color: #ffffff;">Precious Metals: The Hedge Trade</h3>
                </div>

                <div style="display: grid; grid-template-columns: 1fr; md:grid-template-columns: 1fr 1fr; gap: 40px;">
                    <!-- Left: Chart -->
                    <div style="background: var(--bg-card); border-radius: 12px; border: 1px solid var(--border-color); padding: 30px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);">
                        <div style="display: flex; justify-content: space-between; align-items: end; margin-bottom: 20px;">
                            <h4 style="font-size: 1.2em; font-weight: 600; color: #FFD700;">Price Action Divergence (14-Day)</h4>
                            <span style="font-size: 0.75em; color: var(--text-secondary);">Normalized % Change</span>
                        </div>
                        <div style="position: relative; height: 350px;">
                            <canvas id="metalsLineChart"></canvas>
                        </div>
                    </div>

                    <!-- Right: Context & Breakdown -->
                    <div style="display: flex; flex-direction: column; gap: 30px;">
                        <div style="background: var(--bg-card); border-radius: 12px; padding: 25px; border-left: 4px solid #FFD700; border: 1px solid var(--border-color);">
                            <h4 style="font-size: 1.3em; font-weight: 700; color: #ffffff; margin-bottom: 10px;">Gold (XAU)</h4>
                            <p style="color: var(--text-secondary); font-size: 0.9em; margin-bottom: 15px;">
                                Trading near ATHs. The composite score is <strong style="color: #00ff88;">68 (Bullish)</strong> driven by central bank buying and geopolitical uncertainty. It is acting as the primary safe haven.
                            </p>
                            <div style="display: flex; gap: 10px;">
                                <span style="padding: 6px 12px; background: rgba(0, 255, 136, 0.2); color: #00ff88; font-size: 0.75em; border-radius: 4px; border: 1px solid rgba(0, 255, 136, 0.3);">Trend: Strong Up</span>
                                <span style="padding: 6px 12px; background: var(--bg-darker); color: var(--text-secondary); font-size: 0.75em; border-radius: 4px; border: 1px solid var(--border-color);">Vol: Low</span>
                            </div>
                        </div>

                        <div style="background: var(--bg-card); border-radius: 12px; padding: 25px; border-left: 4px solid #b0b8c8; border: 1px solid var(--border-color);">
                            <h4 style="font-size: 1.3em; font-weight: 700; color: #ffffff; margin-bottom: 10px;">Silver (XAG) & Platinum</h4>
                            <p style="color: var(--text-secondary); font-size: 0.9em; margin-bottom: 15px;">
                                Silver is outperforming Gold on a percentage basis (High Beta). Platinum lags due to weak auto-catalyst demand data. Silver sentiment is <strong style="color: #00ff88;">72 (Greed)</strong>.
                            </p>
                            <div style="display: flex; gap: 10px;">
                                <span style="padding: 6px 12px; background: rgba(0, 255, 136, 0.2); color: #00ff88; font-size: 0.75em; border-radius: 4px; border: 1px solid rgba(0, 255, 136, 0.3);">Silver: Breakout</span>
                                <span style="padding: 6px 12px; background: rgba(220, 20, 60, 0.2); color: #DC143C; font-size: 0.75em; border-radius: 4px; border: 1px solid rgba(220, 20, 60, 0.3);">Platinum: Weak</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 3: Industrial & Energy (Copper, Oil) -->
            <section style="margin-bottom: 80px;">
                <div style="display: flex; align-items: center; margin-bottom: 30px;">
                    <div style="width: 40px; height: 4px; background: #f59e0b; margin-right: 15px;"></div>
                    <h3 style="font-size: 2em; font-weight: 700; color: #ffffff;">Industrial & Energy: The Growth Engine</h3>
                </div>

                <div style="display: grid; grid-template-columns: 1fr; lg:grid-template-columns: 1fr 2fr; gap: 40px;">
                     <!-- Narrative -->
                     <div style="color: var(--text-secondary); display: flex; flex-direction: column; gap: 20px;">
                        <p>
                            <strong>Crude Oil (WTI)</strong> is struggling. Despite geopolitical tensions, supply from non-OPEC nations is keeping a lid on prices. The sentiment is effectively <strong style="color: #FFD700;">Neutral (45)</strong>.
                        </p>
                        <p>
                            <strong>Copper ("Dr. Copper")</strong> is flashing mixed signals. While long-term electrification demand is clear, short-term manufacturing PMIs from major economies are soft, keeping sentiment grounded at <strong style="color: #60A5FA;">55</strong>.
                        </p>
                    </div>

                    <!-- Chart: Radar Comparison -->
                    <div style="background: var(--bg-card); border-radius: 12px; border: 1px solid var(--border-color); padding: 30px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);">
                        <h4 style="font-size: 1.2em; font-weight: 600; color: #f59e0b; margin-bottom: 5px;">Factor Analysis: Oil vs. Copper</h4>
                        <p style="font-size: 0.75em; color: var(--text-secondary); margin-bottom: 20px;">Comparing the fundamental drivers (0-100 Strength)</p>
                        <div style="position: relative; height: 350px; max-width: 600px; margin: 0 auto;">
                            <canvas id="industrialRadarChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 4: Financials (Bonds & Futures) -->
            <section style="margin-bottom: 80px;">
                 <div style="display: flex; align-items: center; margin-bottom: 30px;">
                    <div style="width: 40px; height: 4px; background: #A855F7; margin-right: 15px;"></div>
                    <h3 style="font-size: 2em; font-weight: 700; color: #ffffff;">Financials: Rates vs. Equities</h3>
                </div>

                <div style="display: grid; grid-template-columns: 1fr; md:grid-template-columns: 1fr 1fr; gap: 40px;">
                    <!-- S&P Futures -->
                    <div style="background: var(--bg-card); border-radius: 12px; border: 1px solid var(--border-color); padding: 30px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);">
                        <h4 style="font-size: 1.2em; font-weight: 600; color: #A855F7; margin-bottom: 15px;">Equity Futures (S&P 500 / Nasdaq)</h4>
                        <p style="font-size: 0.9em; color: var(--text-secondary); margin-bottom: 20px;">Momentum is high. Futures are pricing in a soft landing, ignoring the bond market's warning signs.</p>
                        <div style="position: relative; height: 250px;">
                            <canvas id="futuresGaugeChart"></canvas>
                        </div>
                        <div style="text-align: center; margin-top: -40px; position: relative; z-index: 10;">
                            <div id="futures-gauge-score" style="font-size: 3em; font-weight: 700; color: #ffffff;">78</div>
                            <div id="futures-gauge-label" style="font-size: 0.9em; color: #A855F7;">Extreme Greed</div>
                        </div>
                    </div>

                    <!-- Bonds Yield Curve -->
                    <div style="background: var(--bg-card); border-radius: 12px; border: 1px solid var(--border-color); padding: 30px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);">
                        <h4 style="font-size: 1.2em; font-weight: 600; color: var(--primary-color); margin-bottom: 15px;">US Treasury Yields (Bearish for Prices)</h4>
                        <p style="font-size: 0.9em; color: var(--text-secondary); margin-bottom: 20px;">Yields remain inverted but are shifting up. High yields = Low Bond Prices.</p>
                         <div style="position: relative; height: 250px;">
                            <canvas id="bondsChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 5: Risk/Reward Map -->
            <section style="margin-bottom: 40px;">
                <h3 style="font-size: 2em; font-weight: 700; color: #ffffff; margin-bottom: 30px; text-align: center;">Cross-Asset Risk Map</h3>
                <div style="background: var(--bg-card); border-radius: 12px; border: 1px solid var(--border-color); padding: 30px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);">
                    <p style="text-align: center; color: var(--text-secondary); font-size: 0.9em; margin-bottom: 30px;">
                        Position Size (Bubble) = Relative Volume | X-Axis = Sentiment | Y-Axis = 14-Day Volatility
                    </p>
                    <div style="position: relative; height: 500px;">
                        <canvas id="riskBubbleChart"></canvas>
                    </div>
                </div>
            </section>

        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <div class="flashcard-network" id="flashcardNetwork">


            <!-- ===== NAVIGATION SECTION ===== -->
            <div style="grid-column: 1 / -1; text-align: center; margin: 40px 0 30px 0;">
                <h2 style="font-size: 2.5em; color: #FFD700; margin-bottom: 10px;">Research Pathways</h2>
                <p style="color: #b0b8c8; font-size: 1.1em;">Select a section to explore professional trading tools and market intelligence</p>
            </div>

            <!-- Navigation Flashcard: Highlights -->
            <div class="flashcard" data-id="nav-highlights" data-category="navigation" data-connections="nav-capital-flow,nav-tools,nav-elite-strategies,nav-daily-planet,nav-breakthrough,nav-daily-dose" onclick="window.location.href='highlights.html'" style="cursor: pointer; border: 2px solid rgba(255, 215, 0, 0.4); background: linear-gradient(135deg, rgba(255, 215, 0, 0.05), rgba(211, 47, 47, 0.05));">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">‚≠ê</span>
                    <h3 class="flashcard-title" style="color: #FFD700; font-size: 1.5em;">Highlights</h3>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Key trading insights and profit opportunities from all research tools. Discover arbitrage plays, VIX signals, seasonal patterns, and high-probability setups with proven win rates.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(255, 215, 0, 0.2); color: #FFD700;">12 Key Insights</span>
                    <span class="tag" style="background: rgba(255, 215, 0, 0.2); color: #FFD700;">Profit Opportunities</span>
                    <span class="tag" style="background: rgba(255, 215, 0, 0.2); color: #FFD700;">Win Rates</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Global Capital Flow -->
            <div class="flashcard" data-id="nav-capital-flow" data-category="navigation" data-connections="nav-highlights,nav-gauges,nav-barometers,nav-market-intelligence,nav-historical,nav-tools" onclick="window.location.href='global_capital_flow_swing_trading.html'" style="cursor: pointer; border: 2px solid rgba(220, 20, 60, 0.6); background: linear-gradient(135deg, rgba(220, 20, 60, 0.08), rgba(139, 0, 0, 0.12)); box-shadow: 0 4px 25px rgba(220, 20, 60, 0.2); transform: translateY(-2px);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üåê</span>
                    <h3 class="flashcard-title" style="color: #DC143C; font-size: 1.5em;">Global Capital Flow</h3>
                    <span class="flashcard-count" style="background: rgba(220, 20, 60, 0.3); color: #DC143C;">6 Markets</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Real-time tracking of capital movement across global markets. Monitor US, European, Asian, and emerging market flows with validated Yahoo Finance data and comprehensive flow analytics.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(220, 20, 60, 0.2); color: #DC143C;">Live Data</span>
                    <span class="tag" style="background: rgba(220, 20, 60, 0.2); color: #DC143C;">Yahoo Finance</span>
                    <span class="tag" style="background: rgba(220, 20, 60, 0.2); color: #DC143C;">Validated</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Elite Research Tools -->
            <div class="flashcard" data-id="nav-tools" data-category="navigation" data-connections="nav-highlights,nav-capital-flow,nav-screeners,nav-elite-strategies,nav-journal,nav-breakthrough" onclick="window.location.href='elite_tools.html'" style="cursor: pointer; border: 2px solid rgba(96, 165, 250, 0.4); background: linear-gradient(135deg, rgba(96, 165, 250, 0.05), rgba(59, 130, 246, 0.05));">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üî¨</span>
                    <h3 class="flashcard-title" style="color: #60A5FA; font-size: 1.5em;">Elite Research Tools</h3>
                    <span class="flashcard-count" style="background: rgba(96, 165, 250, 0.3); color: #60A5FA;">22 Tools</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Professional trading and analysis tools: Symbol Research, VIX Correlation, COT Intelligence, Econometrics, FRED Economic Data, Seasonality, GARP, ROCE, Market Cycles, and more.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(96, 165, 250, 0.2); color: #60A5FA;">22 Professional Tools</span>
                    <span class="tag" style="background: rgba(96, 165, 250, 0.2); color: #60A5FA;">AI-Powered</span>
                    <span class="tag" style="background: rgba(96, 165, 250, 0.2); color: #60A5FA;">Real-time Data</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Trading Journal -->
            <div class="flashcard" data-id="nav-journal" data-category="navigation" data-connections="nav-tools,nav-elite-strategies,nav-breakthrough,nav-screeners,nav-daily-planet" onclick="window.location.href='COMPREHENSIVE_TRADING_JOURNAL.html'" style="cursor: pointer; border: 2px solid rgba(147, 51, 234, 0.4); background: linear-gradient(135deg, rgba(147, 51, 234, 0.05), rgba(168, 85, 247, 0.05));">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üìî</span>
                    <h3 class="flashcard-title" style="color: #A855F7; font-size: 1.5em;">Trading Journal</h3>
                    <span class="flashcard-count" style="background: rgba(147, 51, 234, 0.3); color: #A855F7;">Performance Analytics</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Professional trading journal with performance analytics, risk management, trade tracking, and AI coaching system. Track P&L by setup, timeframe, day-of-week. Identify your best setups and eliminate losing patterns.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(147, 51, 234, 0.2); color: #A855F7;">Performance Metrics</span>
                    <span class="tag" style="background: rgba(147, 51, 234, 0.2); color: #A855F7;">Risk Management</span>
                    <span class="tag" style="background: rgba(147, 51, 234, 0.2); color: #A855F7;">AI Coaching</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Daily Planet (NEWS & INTELLIGENCE) - PRIORITY PLACEMENT -->
            <div class="flashcard" data-id="nav-daily-planet" data-category="navigation" data-connections="nav-highlights,nav-daily-dose,nav-journal,nav-breakthrough" onclick="window.location.href='daily_planet.html'" style="cursor: pointer; border: 2px solid rgba(65, 105, 225, 0.5); background: linear-gradient(135deg, rgba(65, 105, 225, 0.08), rgba(30, 144, 255, 0.08)); box-shadow: 0 4px 20px rgba(65, 105, 225, 0.15);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üì∞</span>
                    <h3 class="flashcard-title" style="color: #4169E1; font-size: 1.5em;">Daily Planet</h3>
                    <span class="flashcard-count" style="background: rgba(65, 105, 225, 0.3); color: #4169E1;">20+ News Articles</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Real-time global market news with AI sentiment analysis. Billion-dollar moves, breaking news, sector updates, emerging technology alerts. Email delivery daily at 6:01 AM Melbourne time to naga.kvv@gmail.com.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(65, 105, 225, 0.2); color: #4169E1;">AI Sentiment</span>
                    <span class="tag" style="background: rgba(65, 105, 225, 0.2); color: #4169E1;">Daily Email</span>
                    <span class="tag" style="background: rgba(65, 105, 225, 0.2); color: #4169E1;">Clickable News</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Breakthrough Insights Arsenal -->
            <div class="flashcard" data-id="nav-breakthrough" data-category="navigation" data-connections="nav-highlights,nav-tools,nav-journal,nav-elite-strategies,nav-daily-planet" onclick="window.location.href='breakthrough_insights.html'" style="cursor: pointer; border: 2px solid rgba(147, 51, 234, 0.5); background: linear-gradient(135deg, rgba(147, 51, 234, 0.08), rgba(168, 85, 247, 0.08)); box-shadow: 0 4px 20px rgba(147, 51, 234, 0.15);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üõ°Ô∏è</span>
                    <h3 class="flashcard-title" style="color: #9333EA; font-size: 1.5em;">Breakthrough Insights Arsenal</h3>
                    <span class="flashcard-count" style="background: rgba(147, 51, 234, 0.3); color: #A855F7;">4 AI Agents</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    4 parallel AI agents analyzing every symbol: Breakthrough Agent (hidden opportunities), Discovery Agent (emerging trends), Pattern Agent (technical setups), and Timing Agent (entry/exit points). Real-time multi-agent intelligence system.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(147, 51, 234, 0.2); color: #A855F7;">4 AI Agents</span>
                    <span class="tag" style="background: rgba(147, 51, 234, 0.2); color: #A855F7;">Parallel Analysis</span>
                    <span class="tag" style="background: rgba(147, 51, 234, 0.2); color: #A855F7;">Real-Time Intel</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Market Gauges (NEW - CRITICAL) -->
            <div class="flashcard" data-id="nav-gauges" data-category="navigation" data-connections="nav-capital-flow,nav-barometers,nav-market-intelligence,nav-historical" onclick="window.location.href='market_gauges.html'" style="cursor: pointer; border: 2px solid rgba(255, 215, 0, 0.5); background: linear-gradient(135deg, rgba(255, 215, 0, 0.08), rgba(139, 0, 0, 0.08)); box-shadow: 0 4px 20px rgba(255, 215, 0, 0.15);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">‚ö°</span>
                    <h3 class="flashcard-title" style="color: #FFD700; font-size: 1.5em;">Market Gauges</h3>
                    <span class="flashcard-count" style="background: rgba(255, 215, 0, 0.3); color: #FFD700;">24 Critical Indicators</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Professional-grade real-time market gauges: VIX, Dollar Index, Treasury Yields, Yield Curve, Put/Call Ratio, Gold, Oil, Bitcoin, Credit Spreads, TED Spread, Currency Strength, Market Breadth. Essential for reading market regime and risk levels.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(255, 215, 0, 0.2); color: #FFD700;">Real-Time Data</span>
                    <span class="tag" style="background: rgba(255, 215, 0, 0.2); color: #FFD700;">Risk Assessment</span>
                    <span class="tag" style="background: rgba(255, 215, 0, 0.2); color: #FFD700;">Market Regime</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Intermarket Barometers (NEW - CRITICAL) -->
            <div class="flashcard" data-id="nav-barometers" data-category="navigation" data-connections="nav-capital-flow,nav-gauges,nav-market-intelligence" onclick="window.location.href='barometers.html'" style="cursor: pointer; border: 2px solid rgba(255, 107, 107, 0.5); background: linear-gradient(135deg, rgba(255, 107, 107, 0.08), rgba(255, 165, 0, 0.08)); box-shadow: 0 4px 20px rgba(255, 107, 107, 0.15);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üìä</span>
                    <h3 class="flashcard-title" style="color: #FF6B6B; font-size: 1.5em;">Intermarket Barometers</h3>
                    <span class="flashcard-count" style="background: rgba(255, 107, 107, 0.3); color: #FF6B6B;">10 Leading Indicators</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Predict market direction 6-18 months in advance with credit spreads, yield curves, copper/gold ratio, AUD/JPY, VIX, and 5 more proven indicators. Composite risk score updated every 15 minutes from FRED & Yahoo Finance. NO FAKE DATA - all verified sources.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(255, 107, 107, 0.2); color: #FF6B6B;">6-18 Month Lead</span>
                    <span class="tag" style="background: rgba(255, 107, 107, 0.2); color: #FF6B6B;">Real-Time Updates</span>
                    <span class="tag" style="background: rgba(255, 107, 107, 0.2); color: #FF6B6B;">Verified Data</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Elite Trading Strategies -->
            <div class="flashcard" data-id="nav-elite-strategies" data-category="navigation" data-connections="nav-highlights,nav-journal,nav-breakthrough,nav-screeners,nav-tools" onclick="window.location.href='elite_trading_strategies.html'" style="cursor: pointer; border: 2px solid rgba(255, 215, 0, 0.6); background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(139, 0, 0, 0.08)); box-shadow: 0 4px 25px rgba(255, 215, 0, 0.3);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üèÜ</span>
                    <h3 class="flashcard-title" style="color: #FFD700; font-size: 1.6em; font-weight: bold;">Elite Trading Strategies</h3>
                    <span class="flashcard-count" style="background: rgba(255, 215, 0, 0.4); color: #FFD700; font-weight: bold;">80%+ CONFIDENCE ONLY</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.1em; font-weight: 500;">
                    üèÜ <b>SPARTAN EXCLUSIVE:</b> 20 hand-picked strategies with 80%+ win rates. From 94% ES Friday Selloff to 89% PLTR Contract Gaps ($8,120 profit). Elite-grade patterns that meet Spartan standards of excellence.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(255, 215, 0, 0.3); color: #FFD700; font-weight: bold;">üèÜ SPARTAN CERTIFIED</span>
                    <span class="tag" style="background: rgba(255, 215, 0, 0.25); color: #FFD700;">94% HIGHEST WIN RATE</span>
                    <span class="tag" style="background: rgba(255, 215, 0, 0.25); color: #FFD700;">$8,120 MAX PROFIT</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Screeners -->
            <div class="flashcard" data-id="nav-screeners" data-category="navigation" data-connections="nav-tools,nav-elite-strategies,nav-journal,nav-breakthrough" onclick="window.location.href='screener/screeners_hub.html'" style="cursor: pointer; border: 2px solid rgba(139, 0, 0, 0.4); background: linear-gradient(135deg, rgba(139, 0, 0, 0.1), rgba(220, 20, 60, 0.05));">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üõ°Ô∏è</span>
                    <h3 class="flashcard-title" style="color: #DC143C; font-size: 1.5em;">Screener Hub</h3>
                    <span class="flashcard-count" style="background: rgba(139, 0, 0, 0.3); color: #FFD700;">9 Screeners</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Triple Timeframe Confluence Strategy using Commitment of Traders data. Follow the "smart money" across 3 timeframes (4-week, 13-week, 52-week) for high-probability setups. 76% win rate, 3.4 Sharpe ratio, only 14% max drawdown.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(139, 0, 0, 0.2); color: #DC143C;">76% Win Rate</span>
                    <span class="tag" style="background: rgba(139, 0, 0, 0.2); color: #DC143C;">3.4 Sharpe Ratio</span>
                    <span class="tag" style="background: rgba(139, 0, 0, 0.2); color: #DC143C;">Smart Money</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Nano Banana Scanner (NEW) -->
            <div class="flashcard" data-id="nav-nano-banana" data-category="navigation" data-connections="nav-screeners,nav-tools,nav-daily-dose,nav-breakthrough" onclick="window.location.href='nano_banana_scanner.html'" style="cursor: pointer; border: 2px solid rgba(250, 204, 21, 0.6); background: linear-gradient(135deg, rgba(250, 204, 21, 0.12), rgba(234, 179, 8, 0.08)); box-shadow: 0 4px 20px rgba(250, 204, 21, 0.25);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üçå</span>
                    <h3 class="flashcard-title" style="color: #FACC15; font-size: 1.5em;">Nano Banana Scanner</h3>
                    <span class="flashcard-count" style="background: rgba(250, 204, 21, 0.3); color: #FACC15;">Polygon.io Powered</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Advanced multi-factor stock scanner with 8-point scoring system. Analyzes trend, volume, relative strength, RSI, weekly trend, stop loss distance, event risk, and volatility squeeze. Get instant ALPHA PRIME, GO, WAIT, or ABORT signals on any ticker list.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(250, 204, 21, 0.2); color: #FACC15;">8-Point Scoring</span>
                    <span class="tag" style="background: rgba(250, 204, 21, 0.2); color: #FACC15;">Real-Time Analysis</span>
                    <span class="tag" style="background: rgba(250, 204, 21, 0.2); color: #FACC15;">Polygon.io API</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Daily Dose (NEW) -->
            <div class="flashcard" data-id="nav-daily-dose" data-category="navigation" data-connections="nav-highlights,nav-daily-planet,nav-breakthrough" onclick="window.location.href='daily_dose.html'" style="cursor: pointer; border: 2px solid rgba(255, 215, 0, 0.5); background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 165, 0, 0.05)); box-shadow: 0 4px 20px rgba(255, 215, 0, 0.2);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">‚ö°</span>
                    <h3 class="flashcard-title" style="color: #FFD700; font-size: 1.5em;">Daily Dose</h3>
                    <span class="flashcard-count" style="background: rgba(255, 215, 0, 0.3); color: #FFD700;">6 Morning Scanners</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Professional-grade morning scanners delivered at 6:00 AM Melbourne time. High momentum stocks, unusual volume alerts, gap up/down, institutional flow, breakout candidates, and options activity. Powered by Polygon.io real-time data.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(255, 215, 0, 0.2); color: #FFD700;">Daily Email Alerts</span>
                    <span class="tag" style="background: rgba(255, 215, 0, 0.2); color: #FFD700;">6:00 AM MEL</span>
                    <span class="tag" style="background: rgba(255, 215, 0, 0.2); color: #FFD700;">Real-Time Data</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Market Intelligence Reports (NEW) -->
            <div class="flashcard" data-id="nav-market-intelligence" data-category="navigation" data-connections="nav-capital-flow,nav-gauges,nav-barometers,nav-historical" onclick="window.location.href='intelligence_reports.html'" style="cursor: pointer; border: 2px solid rgba(218, 165, 32, 0.5); background: linear-gradient(135deg, rgba(218, 165, 32, 0.1), rgba(255, 215, 0, 0.05)); box-shadow: 0 4px 20px rgba(218, 165, 32, 0.2);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">‚öîÔ∏è</span>
                    <h3 class="flashcard-title" style="color: #DAA520; font-size: 1.5em;">Market Intelligence Reports</h3>
                    <span class="flashcard-count" style="background: rgba(218, 165, 32, 0.3); color: #FFD700;">5 Intelligence Dashboards</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Deep-dive intelligence dashboards for strategic assets: Gold ü•á, Bitcoin ‚Çø, Oil üõ¢Ô∏è, Bonds üìà, and Copper üî∂. Comprehensive analysis covering pricing, correlations, supply/demand, and institutional positioning.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(218, 165, 32, 0.2); color: #FFD700;">Gold</span>
                    <span class="tag" style="background: rgba(218, 165, 32, 0.2); color: #FFD700;">Bitcoin</span>
                    <span class="tag" style="background: rgba(218, 165, 32, 0.2); color: #FFD700;">Oil</span>
                    <span class="tag" style="background: rgba(218, 165, 32, 0.2); color: #FFD700;">Bonds</span>
                    <span class="tag" style="background: rgba(218, 165, 32, 0.2); color: #FFD700;">Copper</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Correlation Matrix (NEW) -->
            <div class="flashcard" data-id="nav-correlation-matrix" data-category="tools" data-connections="nav-capital-flow,nav-market-intelligence,nav-gauges,nav-tools" onclick="window.location.href='correlation_matrix.html'" style="cursor: pointer; border: 2px solid rgba(0, 255, 136, 0.5); background: linear-gradient(135deg, rgba(0, 255, 136, 0.08), rgba(34, 197, 94, 0.08)); box-shadow: 0 4px 20px rgba(0, 255, 136, 0.2);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üîó</span>
                    <h3 class="flashcard-title" style="color: #00ff88; font-size: 1.5em;">Correlation Matrix</h3>
                    <span class="flashcard-count" style="background: rgba(0, 255, 136, 0.3); color: #00ff88;">41 Assets - 7 Classes</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Comprehensive correlation analysis across 41 assets: Equity Indices, Bonds, Crypto, Forex, Commodities, Sectors, and International Markets. Filter by category, search assets, and get plain English trading insights with diversification signals.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(0, 255, 136, 0.2); color: #00ff88;">30-Day Rolling</span>
                    <span class="tag" style="background: rgba(0, 255, 136, 0.2); color: #00ff88;">Diversification</span>
                    <span class="tag" style="background: rgba(0, 255, 136, 0.2); color: #00ff88;">Buy Signals</span>
                    <span class="tag" style="background: rgba(0, 255, 136, 0.2); color: #00ff88;">Risk Management</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Bitcoin Correlations (NEW) -->
            <div class="flashcard" data-id="nav-bitcoin-correlations" data-category="tools" data-connections="nav-correlation-matrix,nav-capital-flow,nav-market-intelligence" onclick="window.location.href='bitcoin_correlations.html'" style="cursor: pointer; border: 2px solid rgba(255, 215, 0, 0.5); background: linear-gradient(135deg, rgba(255, 215, 0, 0.08), rgba(255, 165, 0, 0.08)); box-shadow: 0 4px 20px rgba(255, 215, 0, 0.2);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">‚Çø</span>
                    <h3 class="flashcard-title" style="color: #FFD700; font-size: 1.5em;">Bitcoin Futures Correlations</h3>
                    <span class="flashcard-count" style="background: rgba(255, 215, 0, 0.3); color: #FFD700;">25+ Futures Markets</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Bitcoin Universal Futures Correlation Monitor. Track BTC correlations across equity indices (ES, NQ, YM, RTY), metals (Gold, Silver, COPPER), energy (Oil, Gas), forex, rates, and VIX. Multi-timeframe analysis with regime detection for capital flows.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(255, 215, 0, 0.2); color: #FFD700;">Multi-Timeframe</span>
                    <span class="tag" style="background: rgba(255, 215, 0, 0.2); color: #FFD700;">Copper Key</span>
                    <span class="tag" style="background: rgba(255, 215, 0, 0.2); color: #FFD700;">Regime Detection</span>
                    <span class="tag" style="background: rgba(255, 215, 0, 0.2); color: #FFD700;">Risk-On/Off</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Historical Connections -->
            <div class="flashcard" data-id="nav-historical" data-category="navigation" data-connections="nav-capital-flow,nav-gauges,nav-market-intelligence,nav-tools,nav-correlation-matrix" onclick="window.location.href='historical_connections.html'" style="cursor: pointer; border: 2px solid rgba(220, 20, 60, 0.4); background: linear-gradient(135deg, rgba(220, 20, 60, 0.05), rgba(139, 0, 0, 0.05));">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üìä</span>
                    <h3 class="flashcard-title" style="color: #DC143C; font-size: 1.5em;">Historical Connections</h3>
                    <span class="flashcard-count" style="background: rgba(220, 20, 60, 0.3); color: #DC143C;">Pattern Analysis</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Discover profitable patterns in historical price action. Analyze how symbols behave over time and identify recurring setups with high win rates. Includes success rates, risk/reward ratios, and typical duration for 8+ proven patterns.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(220, 20, 60, 0.2); color: #DC143C;">8+ Patterns</span>
                    <span class="tag" style="background: rgba(220, 20, 60, 0.2); color: #DC143C;">Win Rates</span>
                    <span class="tag" style="background: rgba(220, 20, 60, 0.2); color: #DC143C;">Risk/Reward</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Symbol Research -->
            <div class="flashcard" data-id="nav-symbol-research" data-category="tools" data-connections="nav-tools,nav-capital-flow,nav-screeners,nav-market-intelligence" onclick="window.location.href='symbol_research.html'" style="cursor: pointer; border: 2px solid rgba(96, 165, 250, 0.5); background: linear-gradient(135deg, rgba(96, 165, 250, 0.08), rgba(59, 130, 246, 0.08)); box-shadow: 0 4px 20px rgba(96, 165, 250, 0.15);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üîç</span>
                    <h3 class="flashcard-title" style="color: #60A5FA; font-size: 1.5em;">Symbol Research</h3>
                    <span class="flashcard-count" style="background: rgba(96, 165, 250, 0.3); color: #60A5FA;">10,000+ Symbols</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Global stock search across 25+ exchanges. Research stocks, ETFs, indices from USA, India, Japan, China, Hong Kong, Australia, UK, Germany, France, and more. Includes real-time quotes, fundamentals, and technicals.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(96, 165, 250, 0.2); color: #60A5FA;">25+ Exchanges</span>
                    <span class="tag" style="background: rgba(96, 165, 250, 0.2); color: #60A5FA;">Real-Time Data</span>
                    <span class="tag" style="background: rgba(96, 165, 250, 0.2); color: #60A5FA;">Arbitrage Plays</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Seasonality Research -->
            <div class="flashcard" data-id="nav-seasonality" data-category="tools" data-connections="nav-tools,nav-market-cycles,nav-harmonic-cycles,nav-pattern-discovery" onclick="window.location.href='seasonality_research.html'" style="cursor: pointer; border: 2px solid rgba(34, 197, 94, 0.5); background: linear-gradient(135deg, rgba(34, 197, 94, 0.08), rgba(22, 163, 74, 0.08)); box-shadow: 0 4px 20px rgba(34, 197, 94, 0.15);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üìÖ</span>
                    <h3 class="flashcard-title" style="color: #22C55E; font-size: 1.5em;">Seasonality Research</h3>
                    <span class="flashcard-count" style="background: rgba(34, 197, 94, 0.3); color: #22C55E;">12 Months</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Discover seasonal patterns and best trading months. Historical analysis shows "Sell in May" effect, Q4 rally patterns, January Effect, and sector rotation cycles. Includes 50+ year historical data for predictable seasonal edges.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(34, 197, 94, 0.2); color: #22C55E;">50+ Years Data</span>
                    <span class="tag" style="background: rgba(34, 197, 94, 0.2); color: #22C55E;">Monthly Patterns</span>
                    <span class="tag" style="background: rgba(34, 197, 94, 0.2); color: #22C55E;">Sector Rotation</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Intermarket Relationships -->
            <div class="flashcard" data-id="nav-intermarket" data-category="tools" data-connections="nav-correlation-matrix,nav-capital-flow,nav-barometers,nav-gauges" onclick="window.location.href='intermarket_relationships.html'" style="cursor: pointer; border: 2px solid rgba(168, 85, 247, 0.5); background: linear-gradient(135deg, rgba(168, 85, 247, 0.08), rgba(147, 51, 234, 0.08)); box-shadow: 0 4px 20px rgba(168, 85, 247, 0.15);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üîó</span>
                    <h3 class="flashcard-title" style="color: #A855F7; font-size: 1.5em;">Intermarket Relationships</h3>
                    <span class="flashcard-count" style="background: rgba(168, 85, 247, 0.3); color: #A855F7;">Cross-Asset</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Leading and lagging relationships between stocks, bonds, commodities, and currencies. Track Dollar/Gold inverse correlation, Copper/Equities link, VIX/SPY inverse, and yield curve signals for market turning points.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(168, 85, 247, 0.2); color: #A855F7;">Leading Indicators</span>
                    <span class="tag" style="background: rgba(168, 85, 247, 0.2); color: #A855F7;">Correlations</span>
                    <span class="tag" style="background: rgba(168, 85, 247, 0.2); color: #A855F7;">Turning Points</span>
                </div>
            </div>

            <!-- Navigation Flashcard: GARP Screener -->
            <div class="flashcard" data-id="nav-garp" data-category="tools" data-connections="nav-screeners,nav-fundamental,nav-roce,nav-tools" onclick="window.location.href='garp.html'" style="cursor: pointer; border: 2px solid rgba(34, 197, 94, 0.5); background: linear-gradient(135deg, rgba(34, 197, 94, 0.08), rgba(22, 163, 74, 0.08)); box-shadow: 0 4px 20px rgba(34, 197, 94, 0.15);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üìà</span>
                    <h3 class="flashcard-title" style="color: #22C55E; font-size: 1.5em;">GARP Screener</h3>
                    <span class="flashcard-count" style="background: rgba(34, 197, 94, 0.3); color: #22C55E;">Growth + Value</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Growth At Reasonable Price screener. Find companies with 15%+ revenue growth, P/E < 25, ROE > 15%, and strong balance sheets. Peter Lynch's sweet spot: PEG ratio < 1.5 with quality fundamentals.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(34, 197, 94, 0.2); color: #22C55E;">PEG < 1.5</span>
                    <span class="tag" style="background: rgba(34, 197, 94, 0.2); color: #22C55E;">Quality Growth</span>
                    <span class="tag" style="background: rgba(34, 197, 94, 0.2); color: #22C55E;">Lynch Method</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Fundamental Analysis -->
            <div class="flashcard" data-id="nav-fundamental" data-category="tools" data-connections="nav-garp,nav-roce,nav-screeners,nav-tools,nav-market-intelligence" onclick="window.location.href='fundamental_analysis.html'" style="cursor: pointer; border: 2px solid rgba(59, 130, 246, 0.5); background: linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(37, 99, 235, 0.08)); box-shadow: 0 4px 20px rgba(59, 130, 246, 0.15);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üìä</span>
                    <h3 class="flashcard-title" style="color: #3B82F6; font-size: 1.5em;">Fundamental Analysis</h3>
                    <span class="flashcard-count" style="background: rgba(59, 130, 246, 0.3); color: #3B82F6;">Deep Metrics</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Comprehensive fundamental analysis: P/E, P/B, P/S, EV/EBITDA, ROE, ROA, ROIC, Free Cash Flow, Debt/Equity, Current Ratio, Quick Ratio, and more. Warren Buffett quality metrics for value investing.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(59, 130, 246, 0.2); color: #3B82F6;">20+ Metrics</span>
                    <span class="tag" style="background: rgba(59, 130, 246, 0.2); color: #3B82F6;">Value Investing</span>
                    <span class="tag" style="background: rgba(59, 130, 246, 0.2); color: #3B82F6;">Quality Filters</span>
                </div>
            </div>

            <!-- Navigation Flashcard: ROCE Research -->
            <div class="flashcard" data-id="nav-roce" data-category="tools" data-connections="nav-garp,nav-fundamental,nav-screeners,nav-tools" onclick="window.location.href='roce_research.html'" style="cursor: pointer; border: 2px solid rgba(234, 179, 8, 0.5); background: linear-gradient(135deg, rgba(234, 179, 8, 0.08), rgba(202, 138, 4, 0.08)); box-shadow: 0 4px 20px rgba(234, 179, 8, 0.15);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üíé</span>
                    <h3 class="flashcard-title" style="color: #EAB308; font-size: 1.5em;">ROCE Research</h3>
                    <span class="flashcard-count" style="background: rgba(234, 179, 8, 0.3); color: #EAB308;">Quality Stocks</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Return on Capital Employed screener for quality stocks. Find companies with ROCE > 20%, sustainable competitive advantages (moats), and efficient capital allocation. High ROCE = pricing power and market dominance.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(234, 179, 8, 0.2); color: #EAB308;">ROCE > 20%</span>
                    <span class="tag" style="background: rgba(234, 179, 8, 0.2); color: #EAB308;">Moat Stocks</span>
                    <span class="tag" style="background: rgba(234, 179, 8, 0.2); color: #EAB308;">Capital Efficiency</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Market Cycles -->
            <div class="flashcard" data-id="nav-market-cycles" data-category="tools" data-connections="nav-seasonality,nav-harmonic-cycles,nav-boom-bust,nav-fred-economic" onclick="window.location.href='market_cycles.html'" style="cursor: pointer; border: 2px solid rgba(249, 115, 22, 0.5); background: linear-gradient(135deg, rgba(249, 115, 22, 0.08), rgba(234, 88, 12, 0.08)); box-shadow: 0 4px 20px rgba(249, 115, 22, 0.15);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üîÑ</span>
                    <h3 class="flashcard-title" style="color: #F97316; font-size: 1.5em;">Market Cycles</h3>
                    <span class="flashcard-count" style="background: rgba(249, 115, 22, 0.3); color: #F97316;">Long-Term</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Multi-year market cycle analysis: Bull/bear cycles, presidential cycles, Kondratiev waves, and secular trends. Identify where we are in the 4-year cycle and 18-year property cycle for macro positioning.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(249, 115, 22, 0.2); color: #F97316;">4-Year Cycle</span>
                    <span class="tag" style="background: rgba(249, 115, 22, 0.2); color: #F97316;">Presidential</span>
                    <span class="tag" style="background: rgba(249, 115, 22, 0.2); color: #F97316;">Secular Trends</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Harmonic Cycles -->
            <div class="flashcard" data-id="nav-harmonic-cycles" data-category="tools" data-connections="nav-market-cycles,nav-seasonality,nav-pattern-discovery,nav-tools" onclick="window.location.href='harmonic_cycles.html'" style="cursor: pointer; border: 2px solid rgba(139, 92, 246, 0.5); background: linear-gradient(135deg, rgba(139, 92, 246, 0.08), rgba(124, 58, 237, 0.08)); box-shadow: 0 4px 20px rgba(139, 92, 246, 0.15);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üåä</span>
                    <h3 class="flashcard-title" style="color: #8B5CF6; font-size: 1.5em;">Harmonic Cycles</h3>
                    <span class="flashcard-count" style="background: rgba(139, 92, 246, 0.3); color: #8B5CF6;">FFT Analysis</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Fast Fourier Transform (FFT) cycle timing system. SPX dominant cycle = 63 days (78% win rate at cycle lows ¬±3 days). 21-day & 42-day harmonics stack for high-probability entries. Gold shows 180-day cycle with 85% reliability.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(139, 92, 246, 0.2); color: #8B5CF6;">63-Day Cycle</span>
                    <span class="tag" style="background: rgba(139, 92, 246, 0.2); color: #8B5CF6;">78% Win Rate</span>
                    <span class="tag" style="background: rgba(139, 92, 246, 0.2); color: #8B5CF6;">FFT Timing</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Unified Market Dashboard -->
            <div class="flashcard" data-id="nav-market-hub" data-category="tools" data-connections="nav-tools,nav-capital-flow,nav-gauges,nav-barometers" onclick="window.location.href='unified_market_dashboard.html'" style="cursor: pointer; border: 2px solid rgba(236, 72, 153, 0.5); background: linear-gradient(135deg, rgba(236, 72, 153, 0.08), rgba(219, 39, 119, 0.08)); box-shadow: 0 4px 20px rgba(236, 72, 153, 0.15);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üéØ</span>
                    <h3 class="flashcard-title" style="color: #EC4899; font-size: 1.5em;">Market Hub</h3>
                    <span class="flashcard-count" style="background: rgba(236, 72, 153, 0.3); color: #EC4899;">All-in-One</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Unified dashboard combining all major market data: indices, sectors, commodities, forex, crypto, and economic indicators. One-stop view for complete market situational awareness and cross-asset analysis.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(236, 72, 153, 0.2); color: #EC4899;">All Markets</span>
                    <span class="tag" style="background: rgba(236, 72, 153, 0.2); color: #EC4899;">Real-Time</span>
                    <span class="tag" style="background: rgba(236, 72, 153, 0.2); color: #EC4899;">Cross-Asset</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Chart Analytics -->
            <div class="flashcard" data-id="nav-chart-analytics" data-category="tools" data-connections="nav-tools,nav-pattern-finders,nav-pattern-discovery" onclick="window.location.href='flashcard_dashboard.html'" style="cursor: pointer; border: 2px solid rgba(14, 165, 233, 0.5); background: linear-gradient(135deg, rgba(14, 165, 233, 0.08), rgba(2, 132, 199, 0.08)); box-shadow: 0 4px 20px rgba(14, 165, 233, 0.15);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üìö</span>
                    <h3 class="flashcard-title" style="color: #0EA5E9; font-size: 1.5em;">Chart Analytics</h3>
                    <span class="flashcard-count" style="background: rgba(14, 165, 233, 0.3); color: #0EA5E9;">60+ Concepts</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Interactive flashcards for technical analysis education. Learn 60+ concepts: RSI, MACD, Bollinger Bands, Fibonacci, candlestick patterns, support/resistance, trend lines, and more. Quiz yourself on trading concepts.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(14, 165, 233, 0.2); color: #0EA5E9;">Educational</span>
                    <span class="tag" style="background: rgba(14, 165, 233, 0.2); color: #0EA5E9;">Technical Analysis</span>
                    <span class="tag" style="background: rgba(14, 165, 233, 0.2); color: #0EA5E9;">Interactive</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Pattern Finders Hub -->
            <div class="flashcard" data-id="nav-pattern-finders" data-category="tools" data-connections="nav-pattern-discovery,nav-breakthrough,nav-chart-analytics,nav-tools" onclick="window.location.href='pattern_finder_hub.html'" style="cursor: pointer; border: 2px solid rgba(168, 85, 247, 0.5); background: linear-gradient(135deg, rgba(168, 85, 247, 0.08), rgba(147, 51, 234, 0.08)); box-shadow: 0 4px 20px rgba(168, 85, 247, 0.15);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üîç</span>
                    <h3 class="flashcard-title" style="color: #A855F7; font-size: 1.5em;">Pattern Finders Hub</h3>
                    <span class="flashcard-count" style="background: rgba(168, 85, 247, 0.3); color: #A855F7;">8+ Patterns</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Multi-tool pattern discovery hub. Automated detection of Head & Shoulders, Double Tops/Bottoms, Triangles, Flags, Wedges, and more. Includes win rates, risk/reward ratios, and typical duration for each pattern.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(168, 85, 247, 0.2); color: #A855F7;">Auto-Detection</span>
                    <span class="tag" style="background: rgba(168, 85, 247, 0.2); color: #A855F7;">Win Rates</span>
                    <span class="tag" style="background: rgba(168, 85, 247, 0.2); color: #A855F7;">R/R Ratios</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Pattern Discovery Terminal -->
            <div class="flashcard" data-id="nav-pattern-discovery" data-category="tools" data-connections="nav-pattern-finders,nav-breakthrough,nav-harmonic-cycles,nav-tools" onclick="window.location.href='pattern_discovery_terminal.html'" style="cursor: pointer; border: 2px solid rgba(124, 58, 237, 0.5); background: linear-gradient(135deg, rgba(124, 58, 237, 0.08), rgba(109, 40, 217, 0.08)); box-shadow: 0 4px 20px rgba(124, 58, 237, 0.15);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üéØ</span>
                    <h3 class="flashcard-title" style="color: #7C3AED; font-size: 1.5em;">Pattern Discovery</h3>
                    <span class="flashcard-count" style="background: rgba(124, 58, 237, 0.3); color: #7C3AED;">Advanced</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Advanced pattern recognition terminal with machine learning. Discovers novel patterns, hidden correlations, and emerging setups before they become obvious. Real-time scanning across 5,000+ symbols.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(124, 58, 237, 0.2); color: #7C3AED;">ML Powered</span>
                    <span class="tag" style="background: rgba(124, 58, 237, 0.2); color: #7C3AED;">5,000+ Symbols</span>
                    <span class="tag" style="background: rgba(124, 58, 237, 0.2); color: #7C3AED;">Novel Patterns</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Econometrics -->
            <div class="flashcard" data-id="nav-econometrics" data-category="tools" data-connections="nav-fred-economic,nav-inflation,nav-boom-bust,nav-barometers" onclick="window.location.href='econometrics.html'" style="cursor: pointer; border: 2px solid rgba(251, 146, 60, 0.5); background: linear-gradient(135deg, rgba(251, 146, 60, 0.08), rgba(249, 115, 22, 0.08)); box-shadow: 0 4px 20px rgba(251, 146, 60, 0.15);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üìä</span>
                    <h3 class="flashcard-title" style="color: #FB923C; font-size: 1.5em;">Econometrics</h3>
                    <span class="flashcard-count" style="background: rgba(251, 146, 60, 0.3); color: #FB923C;">Fed Policy</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Fed policy trading signals using real-time FRED data. CPI > 3.5% = Fade rallies. Unemployment > 4.5% = Aggressive long positioning. Rising rates favor Financials (XLF), falling rates favor Tech (XLK). PCE prints move markets 1.5% average.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(251, 146, 60, 0.2); color: #FB923C;">FRED Data</span>
                    <span class="tag" style="background: rgba(251, 146, 60, 0.2); color: #FB923C;">Policy Signals</span>
                    <span class="tag" style="background: rgba(251, 146, 60, 0.2); color: #FB923C;">Sector Rotation</span>
                </div>
            </div>

            <!-- Navigation Flashcard: FRED Economic Dashboard -->
            <div class="flashcard" data-id="nav-fred-economic" data-category="tools" data-connections="nav-econometrics,nav-inflation,nav-boom-bust,nav-market-cycles" onclick="window.location.href='fred_global_complete.html'" style="cursor: pointer; border: 2px solid rgba(220, 20, 60, 0.5); background: linear-gradient(135deg, rgba(220, 20, 60, 0.08), rgba(185, 28, 28, 0.08)); box-shadow: 0 4px 20px rgba(220, 20, 60, 0.15);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üèõÔ∏è</span>
                    <h3 class="flashcard-title" style="color: #DC143C; font-size: 1.5em;">FRED Economic Dashboard</h3>
                    <span class="flashcard-count" style="background: rgba(220, 20, 60, 0.3); color: #DC143C;">Recession Signals</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Macro regime trading system with recession indicators. 10Y-2Y yield spread predicts recessions 12-18 months early. LEI below -4% = Exit cyclicals, buy staples. Fed Funds > Inflation = Buy financials. M2 growth, GDP, unemployment tracking.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(220, 20, 60, 0.2); color: #DC143C;">Recession Model</span>
                    <span class="tag" style="background: rgba(220, 20, 60, 0.2); color: #DC143C;">Yield Curve</span>
                    <span class="tag" style="background: rgba(220, 20, 60, 0.2); color: #DC143C;">12-18mo Lead</span>
                </div>
            </div>

            <!-- Navigation Flashcard: COT Intelligence -->
            <div class="flashcard" data-id="nav-cot-intel" data-category="tools" data-connections="nav-tools,nav-breakthrough,nav-daily-planet,nav-market-intelligence" onclick="window.location.href='complete_cftc_cot_terminal.html'" style="cursor: pointer; border: 2px solid rgba(234, 179, 8, 0.5); background: linear-gradient(135deg, rgba(234, 179, 8, 0.08), rgba(202, 138, 4, 0.08)); box-shadow: 0 4px 20px rgba(234, 179, 8, 0.15);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üè¶</span>
                    <h3 class="flashcard-title" style="color: #EAB308; font-size: 1.5em;">COT Intelligence</h3>
                    <span class="flashcard-count" style="background: rgba(234, 179, 8, 0.3); color: #EAB308;">Smart Money</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Commitment of Traders smart money positioning. Commercials net long >60% = Major bottom forming. Net short >60% = Top ahead. Extreme speculative positioning (>80%) predicts reversals within 2-4 weeks. 73% accuracy at inflection points.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(234, 179, 8, 0.2); color: #EAB308;">73% Accuracy</span>
                    <span class="tag" style="background: rgba(234, 179, 8, 0.2); color: #EAB308;">Reversals</span>
                    <span class="tag" style="background: rgba(234, 179, 8, 0.2); color: #EAB308;">2-4 Week Lead</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Deal Hunters -->
            <div class="flashcard" data-id="nav-deal-hunters" data-category="tools" data-connections="nav-screeners,nav-garp,nav-fundamental,nav-breakthrough" onclick="window.location.href='deal_hunters.html'" style="cursor: pointer; border: 2px solid rgba(34, 197, 94, 0.5); background: linear-gradient(135deg, rgba(34, 197, 94, 0.08), rgba(22, 163, 74, 0.08)); box-shadow: 0 4px 20px rgba(34, 197, 94, 0.15);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üí∞</span>
                    <h3 class="flashcard-title" style="color: #22C55E; font-size: 1.5em;">Deal Hunters</h3>
                    <span class="flashcard-count" style="background: rgba(34, 197, 94, 0.3); color: #22C55E;">Value Plays</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Emerging sector opportunities and mispriced assets. Scan for temporary dislocations, oversold quality stocks, post-earnings overreactions, and sector rotation plays. Find stocks trading below intrinsic value with 20-50% upside potential.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(34, 197, 94, 0.2); color: #22C55E;">20-50% Upside</span>
                    <span class="tag" style="background: rgba(34, 197, 94, 0.2); color: #22C55E;">Oversold Quality</span>
                    <span class="tag" style="background: rgba(34, 197, 94, 0.2); color: #22C55E;">Dislocations</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Boom or Bust -->
            <div class="flashcard" data-id="nav-boom-bust" data-category="tools" data-connections="nav-fred-economic,nav-market-cycles,nav-econometrics,nav-barometers" onclick="window.location.href='boom_or_bust.html'" style="cursor: pointer; border: 2px solid rgba(249, 115, 22, 0.5); background: linear-gradient(135deg, rgba(249, 115, 22, 0.08), rgba(234, 88, 12, 0.08)); box-shadow: 0 4px 20px rgba(249, 115, 22, 0.15);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">‚ö°</span>
                    <h3 class="flashcard-title" style="color: #F97316; font-size: 1.5em;">Boom or Bust</h3>
                    <span class="flashcard-count" style="background: rgba(249, 115, 22, 0.3); color: #F97316;">Market Regime</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Composite market regime indicator (0-100 scale). Extreme Boom (>85) = Reduce risk. Extreme Bust (<15) = Buy opportunity. Combines sentiment, momentum, valuation, and credit spreads for regime classification and positioning guidance.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(249, 115, 22, 0.2); color: #F97316;">0-100 Scale</span>
                    <span class="tag" style="background: rgba(249, 115, 22, 0.2); color: #F97316;">5 Regimes</span>
                    <span class="tag" style="background: rgba(249, 115, 22, 0.2); color: #F97316;">Positioning</span>
                </div>
            </div>

            <!-- Navigation Flashcard: Inflation Dashboard -->
            <div class="flashcard" data-id="nav-inflation" data-category="tools" data-connections="nav-fred-economic,nav-econometrics,nav-boom-bust,nav-barometers" onclick="window.location.href='inflation_dashboard.html'" style="cursor: pointer; border: 2px solid rgba(239, 68, 68, 0.5); background: linear-gradient(135deg, rgba(239, 68, 68, 0.08), rgba(220, 38, 38, 0.08)); box-shadow: 0 4px 20px rgba(239, 68, 68, 0.15);">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üî•</span>
                    <h3 class="flashcard-title" style="color: #EF4444; font-size: 1.5em;">Inflation Dashboard</h3>
                    <span class="flashcard-count" style="background: rgba(239, 68, 68, 0.3); color: #EF4444;">CPI/PPI/PCE</span>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    Real-time inflation tracking with recession correlation. CPI, PPI, PCE, wage growth, commodity prices. High inflation (>3.5%) leads to Fed tightening and recession risk within 12-18 months. Track inflation breakevens and TIPS spreads.
                </div>
                <div class="flashcard-tags">
                    <span class="tag" style="background: rgba(239, 68, 68, 0.2); color: #EF4444;">Real-Time</span>
                    <span class="tag" style="background: rgba(239, 68, 68, 0.2); color: #EF4444;">Fed Policy</span>
                    <span class="tag" style="background: rgba(239, 68, 68, 0.2); color: #EF4444;">Recession Risk</span>
                </div>
            </div>

            <!-- Navigation Flashcard: News -->
            <div class="flashcard" data-id="nav-news" data-category="news" style="display: none;">
                <div class="flashcard-header">
                    <span class="flashcard-icon" style="font-size: 2.5em;">üì∞</span>
                    <h3 class="flashcard-title" style="color: #4169E1; font-size: 1.5em;">Swing Trader's News Feed</h3>
                </div>
                <div class="flashcard-description" style="font-size: 1.05em;">
                    <div id="news-loading" class="loading">Loading news...</div>
                    <div id="news-error" class="error-message" style="display: none;"></div>
                    <div id="news-grid" class="news-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 20px;"></div>
                </div>
                <script>
                    document.addEventListener('DOMContentLoaded', function() {
                        const loadingDiv = document.getElementById('news-loading');
                        const errorDiv = document.getElementById('news-error');
                        const grid = document.getElementById('news-grid');

                        // Only fetch news if the news tab is active
                        const newsTab = document.querySelector('.nav-tab[data-tab="news"]');
                        const observer = new MutationObserver((mutations) => {
                            mutations.forEach((mutation) => {
                                if (mutation.attributeName === 'class' && newsTab.classList.contains('active')) {
                                    if (grid.childElementCount === 0) { // Only fetch if grid is empty
                                        fetch('/api/news')
                                            .then(response => response.json())
                                            .then(data => {
                                                loadingDiv.style.display = 'none';
                                                if (data.error) {
                                                    errorDiv.textContent = data.error;
                                                    errorDiv.style.display = 'block';
                                                    return;
                                                }

                                                if (data.data && data.data.length > 0) {
                                                    data.data.forEach(article => {
                                                        const card = document.createElement('div');
                                                        card.className = 'news-card';
                                                        card.style.background = 'var(--bg-card)';
                                                        card.style.border = '1px solid var(--border-color)';
                                                        card.style.borderRadius = '12px';
                                                        card.style.padding = '20px';
                                                        card.style.display = 'flex';
                                                        card.style.flexDirection = 'column';

                                                        const title = document.createElement('h2');
                                                        title.textContent = article.title;
                                                        title.style.fontSize = '1.2em';
                                                        title.style.marginBottom = '10px';
                                                        title.style.color = 'var(--text-primary)';

                                                        const snippet = document.createElement('p');
                                                        snippet.textContent = article.snippet;
                                                        snippet.style.fontSize = '0.9em';
                                                        snippet.style.color = 'var(--text-secondary)';
                                                        snippet.style.flexGrow = '1';

                                                        const link = document.createElement('a');
                                                        link.href = article.url;
                                                        link.textContent = 'Read More';
                                                        link.target = '_blank';
                                                        link.style.color = 'var(--accent-color)';
                                                        link.style.textDecoration = 'none';
                                                        link.style.fontWeight = '600';
                                                        link.style.marginTop = '15px';
                                                        link.style.alignSelf = 'flex-start';

                                                        card.appendChild(title);
                                                        card.appendChild(snippet);
                                                        card.appendChild(link);

                                                        grid.appendChild(card);
                                                    });
                                                } else {
                                                    errorDiv.textContent = 'No news articles found.';
                                                    errorDiv.style.display = 'block';
                                                }
                                            })
                                            .catch(error => {
                                                loadingDiv.style.display = 'none';
                                                errorDiv.textContent = 'Failed to load news. Please try again later.';
                                                errorDiv.style.display = 'block';
                                                console.error('Error fetching news:', error);
                                            });
                                    }
                                }
                            });
                        });

                        observer.observe(newsTab, { attributes: true });
                    });
                </script>
            </div>

        </div>
    </div>

    <!-- Legend - REMOVED per user request -->

    <script>
        // Flashcard Network System
        class FlashcardNetwork {
            constructor() {
                this.flashcards = document.querySelectorAll('.flashcard');
                this.canvas = document.getElementById('networkCanvas');
                this.searchInput = document.getElementById('searchInput');
                this.filterBtns = document.querySelectorAll('.filter-btn');
                this.viewBtns = document.querySelectorAll('.view-btn');
                this.navTabs = document.querySelectorAll('.nav-tab');
                this.connectionCount = 0;
                this.currentTab = 'summary';

                this.init();
            }

            init() {
                this.setupEventListeners();
                this.updateConnectionCount();
                this.drawConnections();
                window.addEventListener('resize', () => this.drawConnections());
                this.moveCompositeIndicatorToSummary();
            }

            moveCompositeIndicatorToSummary() {
                // Move the Best Composite Indicator section into the Summary tab
                const compositeSection = document.querySelector('div[style*="background: linear-gradient(135deg, rgba(139, 0, 0, 0.15)"]');
                const targetContainer = document.getElementById('best-composite-section');

                if (compositeSection && targetContainer) {
                    targetContainer.appendChild(compositeSection);
                }
            }

            setupEventListeners() {
                // Search
                this.searchInput.addEventListener('input', (e) => this.handleSearch(e.target.value));

                // Enter key handler for search
                this.searchInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.keyCode === 13) {
                        e.preventDefault();
                        // Navigate to first visible flashcard
                        const firstVisible = Array.from(this.flashcards).find(
                            card => card.style.display !== 'none'
                        );
                        if (firstVisible) {
                            this.handleCardClick(firstVisible);
                        }
                    }
                });

                // Navigation tabs
                this.navTabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        this.navTabs.forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                        this.handleTabSwitch(tab.dataset.tab);
                    });
                });

                // Filter buttons
                this.filterBtns.forEach(btn => {
                    btn.addEventListener('click', () => {
                        this.filterBtns.forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        this.handleFilter(btn.dataset.filter);
                    });
                });

                // View toggle
                this.viewBtns.forEach(btn => {
                    btn.addEventListener('click', () => {
                        this.viewBtns.forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        this.handleView(btn.dataset.view);
                    });
                });

                // Flashcard hover
                this.flashcards.forEach(card => {
                    card.addEventListener('mouseenter', () => this.highlightConnections(card));
                    card.addEventListener('mouseleave', () => this.clearHighlights());
                    card.addEventListener('click', () => this.handleCardClick(card));
                });
            }

            handleSearch(query) {
                // Sanitize search input
                const sanitizedQuery = SpartanValidator.sanitizeInput(query);

                // Validate query length
                if (sanitizedQuery.length > 100) {
                    console.warn('Search query too long, truncating');
                    return;
                }

                const lowerQuery = sanitizedQuery.toLowerCase();
                this.flashcards.forEach(card => {
                    const text = card.textContent.toLowerCase();
                    if (text.includes(lowerQuery)) {
                        card.style.display = '';
                    } else {
                        card.style.display = 'none';
                    }
                });
            }

            handleTabSwitch(tab) {
                this.currentTab = tab;

                // Define which flashcards belong to each tab based on their data-id and data-category
                const tabMappings = {
                    'summary': (card) => {
                        const id = card.dataset.id || '';
                        // Summary: highlights, capital flow overview, key navigation items
                        return id.includes('highlight') ||
                               id.includes('nav-highlights') ||
                               id.includes('nav-capital-flow') ||
                               id.includes('nav-gauges') ||
                               id.includes('nav-barometers') ||
                               id.includes('nav-market-intelligence');
                    },
                    'markets': (card) => {
                        const id = card.dataset.id || '';
                        // Markets: market analysis, historical, gauges, barometers
                        return id.includes('nav-capital-flow') ||
                               id.includes('nav-gauges') ||
                               id.includes('nav-barometers') ||
                               id.includes('nav-historical') ||
                               id.includes('nav-market-intelligence');
                    },
                    'research-tools': (card) => {
                        const id = card.dataset.id || '';
                        const category = card.dataset.category || '';
                        // Research Tools: correlation, screeners, tools, patterns
                        return id.includes('nav-tools') ||
                               id.includes('nav-screeners') ||
                               id.includes('nav-nano-banana') ||
                               id.includes('nav-correlation') ||
                               id.includes('nav-bitcoin-correlations') ||
                               id.includes('nav-historical') ||
                               category === 'tools';
                    },
                    'intelligence': (card) => {
                        const id = card.dataset.id || '';
                        const category = card.dataset.category || '';
                        // Intelligence: daily planet, insights, strategies, journal
                        return id.includes('nav-daily-planet') ||
                               id.includes('nav-breakthrough') ||
                               id.includes('nav-elite-strategies') ||
                               id.includes('nav-journal') ||
                               id.includes('nav-daily-dose') ||
                               id.includes('nav-market-intelligence') ||
                               category === 'analytics' ||
                               category === 'intelligence';
                    },
                    'news': (card) => {
                        const id = card.dataset.id || '';
                        return id.includes('nav-news');
                    },
                    'research': (card) => {
                        return card.dataset.category === 'navigation';
                    }
                };

                // Filter flashcards based on current tab
                const filterFunction = tabMappings[tab];
                if (filterFunction) {
                    this.flashcards.forEach(card => {
                        if (filterFunction(card)) {
                            card.style.display = '';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                }

                // Reset filter buttons to 'all'
                this.filterBtns.forEach(btn => {
                    if (btn.dataset.filter === 'all') {
                        btn.classList.add('active');
                    } else {
                        btn.classList.remove('active');
                    }
                });

                // Redraw connections for visible flashcards
                this.drawConnections();
            }

            handleFilter(filter) {
                this.flashcards.forEach(card => {
                    if (filter === 'all') {
                        card.style.display = '';
                    } else {
                        const category = card.dataset.category;
                        card.style.display = category === filter ? '' : 'none';
                    }
                });
            }

            handleView(view) {
                if (view === 'connections') {
                    this.showAllConnections();
                } else {
                    this.hideAllConnections();
                }
            }

            highlightConnections(card) {
                const connections = card.dataset.connections;
                if (!connections) return;

                card.classList.add('highlighted');
                const connectedIds = connections.split(',');

                connectedIds.forEach(id => {
                    const connectedCard = document.querySelector(`[data-id="${id}"]`);
                    if (connectedCard) {
                        connectedCard.classList.add('highlighted');
                        this.drawLine(card, connectedCard, true);
                    }
                });
            }

            clearHighlights() {
                this.flashcards.forEach(card => card.classList.remove('highlighted'));
                this.canvas.querySelectorAll('.connection-line').forEach(line => {
                    line.classList.remove('active');
                });
            }

            showAllConnections() {
                this.flashcards.forEach(card => {
                    const connections = card.dataset.connections;
                    if (connections) {
                        const connectedIds = connections.split(',');
                        connectedIds.forEach(id => {
                            const connectedCard = document.querySelector(`[data-id="${id}"]`);
                            if (connectedCard) {
                                this.drawLine(card, connectedCard, true);
                            }
                        });
                    }
                });
            }

            hideAllConnections() {
                this.clearHighlights();
            }

            drawConnections() {
                this.canvas.innerHTML = '';
                const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                svg.style.width = '100%';
                svg.style.height = '100%';
                this.canvas.appendChild(svg);
            }

            drawLine(card1, card2, active = false) {
                const rect1 = card1.getBoundingClientRect();
                const rect2 = card2.getBoundingClientRect();

                const x1 = rect1.left + rect1.width / 2;
                const y1 = rect1.top + rect1.height / 2;
                const x2 = rect2.left + rect2.width / 2;
                const y2 = rect2.top + rect2.height / 2;

                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                line.setAttribute('x1', x1);
                line.setAttribute('y1', y1);
                line.setAttribute('x2', x2);
                line.setAttribute('y2', y2);
                line.classList.add('connection-line');
                if (active) line.classList.add('active');

                this.canvas.querySelector('svg').appendChild(line);
            }

            updateConnectionCount() {
                let count = 0;
                this.flashcards.forEach(card => {
                    const connections = card.dataset.connections;
                    if (connections) {
                        count += connections.split(',').length;
                    }
                });
                document.getElementById('connectionCount').textContent = count;
                this.connectionCount = count;
            }

            handleCardClick(card) {
                // Prevent multiple clicks (debouncing)
                if (card.classList.contains('navigating')) {
                    return; // Already navigating, ignore additional clicks
                }

                const cardId = card.dataset.id;
                const pages = {
                    // Navigation Cards
                    'nav-highlights': 'highlights.html',
                    'nav-capital-flow': 'global_capital_flow_swing_trading.html',
                    'nav-tools': 'elite_tools.html',
                    'nav-journal': 'COMPREHENSIVE_TRADING_JOURNAL.html',
                    'nav-daily-planet': 'daily_planet.html',
                    'nav-breakthrough': 'breakthrough_insights.html',
                    'nav-gauges': 'market_gauges.html',
                    'nav-barometers': 'barometers.html',
                    'nav-elite-strategies': 'elite_trading_strategies.html',
                    'nav-screeners': 'screener/screeners_hub.html',
                    'nav-nano-banana': 'nano_banana_scanner.html',
                    'nav-daily-dose': 'daily_dose.html',
                    'nav-market-intelligence': 'intelligence_reports.html',
                    'nav-correlation-matrix': 'correlation_matrix.html',
                    'nav-bitcoin-correlations': 'bitcoin_correlations.html',
                    'nav-historical': 'historical_connections.html',

                    // Core Research Tools
                    'symbol-research': 'symbol_research.html',
                    'vix-analysis': 'symbol_search_connections.html',
                    'seasonality': 'seasonality_research.html',
                    'intermarket': 'intermarket_relationships.html',
                    'garp': 'garp.html',
                    'fundamental': 'fundamental_analysis.html',
                    'roce': 'roce_research.html',
                    'cycles': 'market_cycles.html',
                    'harmonic-cycles': 'harmonic_cycles.html',
                    'market-hub': 'unified_market_dashboard.html',
                    'chart-analytics': 'flashcard_dashboard.html',
                    'trading-journal': 'COMPREHENSIVE_TRADING_JOURNAL.html',
                    'pattern-finders': 'pattern_finder_hub.html',
                    'pattern-discovery': 'pattern_discovery_terminal.html',

                    // Intelligence Tools
                    'econometrics': 'econometrics.html',
                    'daily-planet': 'daily_planet.html',
                    'breakthrough-insights': 'breakthrough_insights.html',
                    'fred-economic': 'fred_global_complete.html',
                    'cot-intelligence': 'complete_cftc_cot_terminal.html',
                    'deal-hunters': 'deal_hunters.html',
                    'boom-bust': 'boom_or_bust.html',
                    'inflation-dashboard': 'inflation_dashboard.html',

                    // Country-Specific Market Overviews (all redirect to symbol research)
                    'usa-stocks': 'symbol_research.html',
                    'india-stocks': 'symbol_research.html',
                    'japan-stocks': 'symbol_research.html',
                    'china-stocks': 'symbol_research.html',
                    'hongkong-stocks': 'symbol_research.html',
                    'australia-stocks': 'symbol_research.html',
                    'uk-stocks': 'symbol_research.html',
                    'germany-stocks': 'symbol_research.html',
                    'france-stocks': 'symbol_research.html',
                    'netherlands-stocks': 'symbol_research.html',
                    'switzerland-stocks': 'symbol_research.html',
                    'spain-stocks': 'symbol_research.html',
                    'italy-stocks': 'symbol_research.html',
                    'sweden-stocks': 'symbol_research.html',
                    'canada-stocks': 'symbol_research.html',

                    // Emerging Sectors
                    'emerging-sectors': 'deal_hunters.html'
                };

                if (pages[cardId]) {
                    // Mark as navigating to prevent double-clicks
                    card.classList.add('navigating');

                    // Add visual feedback
                    card.style.opacity = '0.6';

                    // Open in SEPARATE TAB with unique name (reuses tab if already open!)
                    // Navigate in the same tab for consistent user experience
                    window.location.href = pages[cardId];

                    // Reset visual state after brief delay
                    setTimeout(() => {
                        card.classList.remove('navigating');
                        card.style.opacity = '1';
                    }, 300);
                }
            }
        }

        // Update Breakthrough Insights Stats
        function updateBreakthroughStats() {
            try {
                const data = JSON.parse(localStorage.getItem('novel_insights_data') || '{}');
                let totalInsights = 0;
                let highImpact = 0;

                Object.values(data).forEach(pageData => {
                    if (pageData.insights && Array.isArray(pageData.insights)) {
                        totalInsights += pageData.insights.length;
                        highImpact += pageData.insights.filter(i => i.impact === 'high').length;
                    }
                });

                document.getElementById('totalInsightsCount').textContent = totalInsights;
                document.getElementById('highImpactCount').textContent = highImpact;
            } catch (error) {
                console.error('Error updating breakthrough stats:', error);
            }
        }

        // Update Deal Hunters Stats
        function updateDealHuntersStats() {
            try {
                const deals = JSON.parse(localStorage.getItem('deal_hunters_opportunities') || '[]');
                const dealsCount = deals.length;
                const topDeal = deals.length > 0 ? Math.max(...deals.map(d => d.potentialGain || 0)) : 0;

                document.getElementById('dealsFoundCount').textContent = dealsCount;
                document.getElementById('topDealPercent').textContent = topDeal.toFixed(2);
            } catch (error) {
                console.error('Error updating deal hunters stats:', error);
            }
        }

        // Update Boom or Bust Stats
        function updateBoomBustStats() {
            try {
                const data = JSON.parse(localStorage.getItem('boom_bust_data') || '{"composite": 50, "status": "Neutral"}');
                const score = data.composite || 50;

                document.getElementById('boomBustScore').textContent = score;

                const statusEl = document.getElementById('boomBustStatus');
                if (score >= 85) {
                    statusEl.textContent = 'üö® EXTREME BOOM';
                    statusEl.style.color = '#DC143C';
                } else if (score <= 15) {
                    statusEl.textContent = 'üö® EXTREME BUST';
                    statusEl.style.color = '#DC143C';
                } else if (score >= 70) {
                    statusEl.textContent = '‚ö†Ô∏è Boom Warning';
                    statusEl.style.color = '#FFD700';
                } else if (score <= 30) {
                    statusEl.textContent = '‚ö†Ô∏è Bust Warning';
                    statusEl.style.color = '#FFD700';
                } else {
                    statusEl.textContent = '‚öñÔ∏è Neutral';
                    statusEl.style.color = '#228B22';
                }
            } catch (error) {
                console.error('Error updating boom/bust stats:', error);
            }
        }

        // Update Inflation Stats
        function updateInflationStats() {
            try {
                const data = JSON.parse(localStorage.getItem('inflation_data') || '{}');
                if (data.latestCPI) {
                    document.getElementById('inflationCPI').textContent = data.latestCPI.toFixed(1);
                    document.getElementById('inflationRate').textContent = data.latestInflation.toFixed(2) + '%';
                } else {
                    document.getElementById('inflationCPI').textContent = 'N/A';
                    document.getElementById('inflationRate').textContent = 'N/A';
                }
            } catch (error) {
                console.error('Error updating inflation stats:', error);
            }
        }

        // Initialize the network
        // Symbol Database Status Checker
        async function updateSymbolDatabaseStatus() {
            try {
                // Fetch database stats from PostgreSQL
                const response = await fetch('/api/db/stats');
                const data = await response.json();

                if (data.total_symbols) {
                    // Update status badge
                    const badge = document.getElementById('symbolDbBadge');
                    if (badge) {
                        badge.style.background = 'rgba(34, 139, 34, 0.2)';
                        badge.style.color = '#00ff88';
                        badge.innerHTML = `‚óè ${data.total_symbols.toLocaleString()} READY`;
                    }

                    // Update database stats
                    const totalSymbols = document.getElementById('totalSymbols');
                    if (totalSymbols) {
                        totalSymbols.textContent = data.total_symbols.toLocaleString();
                    }

                    const totalCountries = document.getElementById('totalCountries');
                    if (totalCountries) {
                        totalCountries.textContent = data.countries || '25';
                    }

                    const totalExchanges = document.getElementById('totalExchanges');
                    if (totalExchanges) {
                        totalExchanges.textContent = (data.exchanges || '26') + '+';
                    }

                    console.log('‚úÖ Symbol Database: ' + data.total_symbols.toLocaleString() + ' symbols loaded');
                } else {
                    throw new Error('Database stats unavailable');
                }
            } catch (error) {
                // Database is offline or unavailable
                const badge = document.getElementById('symbolDbBadge');
                if (badge) {
                    badge.style.background = 'rgba(211, 47, 47, 0.2)';
                    badge.style.color = '#FF5252';
                    badge.innerHTML = '‚óè OFFLINE';
                }

                console.warn('‚ö†Ô∏è Symbol Database: Unavailable');
            }
        }

        // ===== DRAG AND DROP SYSTEM =====
        let editMode = false;
        let draggedElement = null;

        function toggleEditMode() {
            editMode = !editMode;
            const btn = document.getElementById('editModeBtn');
            const container = document.getElementById('flashcardNetwork');
            const flashcards = document.querySelectorAll('.flashcard');

            if (editMode) {
                btn.classList.add('active');
                btn.innerHTML = 'üíæ Save Layout';
                container.classList.add('edit-mode-active');

                // Enable dragging
                flashcards.forEach(card => {
                    card.classList.add('draggable');
                    card.setAttribute('draggable', 'true');

                    // Add drag handle
                    if (!card.querySelector('.drag-handle')) {
                        const handle = document.createElement('div');
                        handle.className = 'drag-handle';
                        handle.innerHTML = '‚ãÆ‚ãÆ';
                        card.insertBefore(handle, card.firstChild);
                    }
                });

                initDragAndDrop();
            } else {
                btn.classList.remove('active');
                btn.innerHTML = '‚úèÔ∏è Edit Layout';
                container.classList.remove('edit-mode-active');

                // Disable dragging
                flashcards.forEach(card => {
                    card.classList.remove('draggable');
                    card.removeAttribute('draggable');
                });

                // Save layout
                saveLayout();
                alert('‚úÖ Layout saved successfully!');
            }
        }

        function initDragAndDrop() {
            const flashcards = document.querySelectorAll('.flashcard');

            flashcards.forEach(card => {
                card.addEventListener('dragstart', handleDragStart);
                card.addEventListener('dragend', handleDragEnd);
                card.addEventListener('dragover', handleDragOver);
                card.addEventListener('drop', handleDrop);
                card.addEventListener('dragenter', handleDragEnter);
                card.addEventListener('dragleave', handleDragLeave);
            });
        }

        function handleDragStart(e) {
            draggedElement = this;
            this.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/html', this.innerHTML);
        }

        function handleDragEnd(e) {
            this.classList.remove('dragging');

            // Remove all drag-over classes
            document.querySelectorAll('.flashcard').forEach(card => {
                card.classList.remove('drag-over');
            });
        }

        function handleDragOver(e) {
            if (e.preventDefault) {
                e.preventDefault();
            }
            e.dataTransfer.dropEffect = 'move';
            return false;
        }

        function handleDragEnter(e) {
            if (this !== draggedElement) {
                this.classList.add('drag-over');
            }
        }

        function handleDragLeave(e) {
            this.classList.remove('drag-over');
        }

        function handleDrop(e) {
            if (e.stopPropagation) {
                e.stopPropagation();
            }

            if (draggedElement !== this) {
                // Swap elements
                const container = this.parentNode;
                const allCards = Array.from(container.querySelectorAll('.flashcard'));
                const draggedIndex = allCards.indexOf(draggedElement);
                const targetIndex = allCards.indexOf(this);

                if (draggedIndex < targetIndex) {
                    container.insertBefore(draggedElement, this.nextSibling);
                } else {
                    container.insertBefore(draggedElement, this);
                }
            }

            this.classList.remove('drag-over');
            return false;
        }

        function saveLayout() {
            const flashcards = document.querySelectorAll('.flashcard');
            const layout = Array.from(flashcards).map(card => card.dataset.id);
            localStorage.setItem('spartan_flashcard_layout', JSON.stringify(layout));
            console.log('‚úÖ Layout saved:', layout);
        }

        function setRecommendedLayout() {
            // Recommended layout: Daily Planet, Daily Dose, Breakthrough Insights on right side
            const recommendedLayout = [
                'nav-highlights',
                'nav-tools',
                'nav-journal',
                'nav-gauges',
                'nav-screeners',
                'nav-nano-banana',
                'nav-daily-dose',
                'nav-patterns',
                'nav-historical',
                'nav-daily-planet',        // Right side - top
                'nav-breakthrough'         // Right side - bottom
            ];

            localStorage.setItem('spartan_flashcard_layout', JSON.stringify(recommendedLayout));
            loadLayout();
            alert('‚úÖ Recommended layout applied! Daily Planet, Daily Dose, and Breakthrough Insights are now grouped together.');
        }

        function loadLayout() {
            const savedLayout = localStorage.getItem('spartan_flashcard_layout');
            if (!savedLayout) return;

            try {
                const layout = JSON.parse(savedLayout);
                const container = document.getElementById('flashcardNetwork');
                const flashcards = Array.from(container.querySelectorAll('.flashcard'));

                // Create a map of flashcards by ID
                const cardMap = {};
                flashcards.forEach(card => {
                    cardMap[card.dataset.id] = card;
                });

                // Reorder flashcards according to saved layout
                layout.forEach(id => {
                    if (cardMap[id]) {
                        container.appendChild(cardMap[id]);
                    }
                });

                console.log('‚úÖ Layout loaded:', layout);
            } catch (error) {
                console.error('Error loading layout:', error);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            new FlashcardNetwork();
            updateBreakthroughStats();
            updateDealHuntersStats();
            updateBoomBustStats();
            updateInflationStats();
            updateSymbolDatabaseStatus(); // Check symbol database on load

            // Load saved layout
            loadLayout();

            // Update stats every 10 seconds
            setInterval(updateBreakthroughStats, 10000);
            setInterval(updateDealHuntersStats, 10000);
            setInterval(updateBoomBustStats, 10000);
            setInterval(updateInflationStats, 10000);
            setInterval(updateSymbolDatabaseStatus, 30000); // Check database every 30 seconds
        });

        // ===== PATTERN DISCOVERY SYSTEM =====

        // Pattern Discovery - Refresh Pattern Function
        window.refreshPattern = async function(category) {
            // Map category to terminal ID and badge ID
            const categoryMap = {
                'stocks': 'stocks',
                'penny_stocks': 'pennystocks',
                'crypto': 'crypto',
                'forex': 'forex',
                'futures': 'futures',
                'cfds': 'cfds',
                'special_alert': 'special',
                'unique_daily': 'unique',
                'rare_gem': 'raregem',
                'billion_dollar': 'billion',
                'high_growth': 'highgrowth'
            };

            const terminalPrefix = categoryMap[category] || category;
            const terminalId = `${terminalPrefix}-pattern-terminal`;
            const badgeId = `${terminalPrefix}-pattern-badge`;

            const terminal = document.getElementById(terminalId);
            const badge = document.getElementById(badgeId);

            if (!terminal) {
                console.error(`Terminal not found: ${terminalId}`);
                return;
            }

            // Show loading state
            terminal.textContent = 'Discovering patterns...';
            if (badge) badge.textContent = 'Loading...';

            try {
                // Fetch pattern from API
                const response = await fetch(`/api/patterns/discover?type=${category}&count=1`);

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const data = await response.json();

                if (data.patterns && data.patterns.length > 0) {
                    const pattern = data.patterns[0];

                    // Format pattern based on category
                    let formattedOutput;
                    if (category === 'special_alert') {
                        formattedOutput = formatSpecialAlert(pattern);
                    } else if (category === 'billion_dollar') {
                        formattedOutput = formatBillionDollarMove(pattern);
                    } else if (category === 'high_growth') {
                        formattedOutput = formatHighGrowthSector(pattern);
                    } else {
                        formattedOutput = formatStandardPattern(pattern);
                    }

                    terminal.innerHTML = formattedOutput;

                    // Update badge
                    if (badge) {
                        badge.textContent = 'Click to refresh';
                        badge.style.background = 'rgba(0, 255, 136, 0.2)';
                        badge.style.color = '#00ff88';
                    }

                    console.log(`‚úÖ Pattern loaded for ${category}`);
                } else {
                    terminal.textContent = 'No patterns available for this market.\n\nClick to try again.';
                    if (badge) badge.textContent = 'No patterns';
                }
            } catch (error) {
                console.error(`Pattern discovery error for ${category}:`, error);
                terminal.textContent = `Error loading pattern: ${error.message}\n\nClick to retry.`;
                terminal.style.color = '#FF5252';
                if (badge) {
                    badge.textContent = 'Error';
                    badge.style.background = 'rgba(255, 82, 82, 0.2)';
                    badge.style.color = '#FF5252';
                }
            }
        };

        // Format Standard Pattern (Stocks, Penny Stocks, Crypto, Forex, Futures, CFDs, Unique Daily, Rare Gems)
        function formatStandardPattern(pattern) {
            const sep = '='.repeat(80);
            const now = new Date().toLocaleString('en-AU', {timeZone: 'Australia/Melbourne'});

            // Color coding: LONG = Green, SHORT = Red
            const direction = (pattern.direction || 'LONG').toUpperCase();
            const isLong = direction === 'LONG' || direction === 'BUY';
            const directionColor = isLong ? '#00ff88' : '#FF5252';

            return `${sep}
>>> TRADE SETUP - ${now} MELBOURNE TIME
${sep}

MARKET:     ${pattern.market || 'N/A'}

SYMBOL:     ${pattern.symbol || 'N/A'}

<span style="color: ${directionColor};">DIRECTION:  ${direction}  <--- ${direction}</span>

STRATEGY:   ${pattern.strategy || 'Pattern Recognition'}

SESSION:    ${pattern.session || 'US SESSION'}
            ${'='.repeat((pattern.session || 'US SESSION').length)}
ENTRY TIME: ${pattern.entry_time || 'Market Open'}

SIMPLE EXPLANATION:
  ${pattern.simple_explanation || pattern.catalyst || 'Pattern-based trade setup.'}

DETAILED SETUP:
  ${pattern.detailed_setup || pattern.simple_explanation || 'Follow entry rules and risk management.'}

PROFIT POTENTIAL: ${pattern.profit_potential || 'MODERATE'}
WIN RATE: ${pattern.win_rate || 'N/A'} | PROFIT FACTOR: ${pattern.profit_factor || 'N/A'}
AVG PROFIT: ${pattern.avg_winner || 'N/A'} | AVG LOSS: ${pattern.avg_loser || 'N/A'}

Source: ${pattern.source || 'Pattern Discovery System'}
Pattern ID: ${pattern.pattern_id || 'N/A'}
${sep}

>>> Click again for next UNIQUE pattern
`;
        }

        // Format SPECIAL ALERT (GAP/PLUMMET)
        function formatSpecialAlert(pattern) {
            const sep = '#'.repeat(80);

            return `${sep}
###                                                                          ###
###                      *** SPECIAL ALERT ***                               ###
###              EXTREME PRICE MOVEMENT EXPECTED                             ###
###                                                                          ###
${sep}

MARKET:     ${pattern.market || 'N/A'}
SYMBOL:     ${pattern.symbol || 'N/A'}
MOVEMENT:   ${pattern.movement || 'GAP UP'}  <--- ${(pattern.movement || 'GAP UP').toUpperCase()}
ENTRY TIME: ${pattern.entry_time || 'Pre-market'}

WHY IT WILL MOVE:
  ${pattern.catalyst || 'Extreme catalyst expected.'}

EXPECTED MOVE: ${pattern.expected_move || 'Significant'}
WIN RATE: ${pattern.win_rate || 'N/A'} | PROFIT FACTOR: ${pattern.profit_factor || 'N/A'}
AVG PROFIT: ${pattern.avg_winner || 'N/A'}

Source: ${pattern.source || 'Special Alert System'}
${sep}

>>> EXTREME MOVEMENT - Click for next ALERT
`;
        }

        // Format BILLION DOLLAR MOVE
        function formatBillionDollarMove(pattern) {
            const sep = '#'.repeat(80);

            return `${sep}
###                   BILLION DOLLAR MOVE DETECTED                          ###
${sep}

SYMBOL:          ${pattern.symbol || 'N/A'}
MARKET CAP:      ${pattern.market_cap || 'N/A'}
CHANGE:          $${pattern.change_billions || 'N/A'} BILLION
CHANGE %:        ${pattern.change_percent || 'N/A'}%
TRIGGER:         ${pattern.trigger || 'Market catalyst'}
TIMESTAMP:       ${pattern.timestamp || new Date().toLocaleString('en-AU')}
SEVERITY:        ${pattern.severity || 'EXTREME'}

OPPORTUNITY:     ${pattern.opportunity || 'Massive market cap change detected.'}

Source: Billion Dollar Move Detector
${sep}

>>> Click for next BILLION DOLLAR MOVE
`;
        }

        // Format HIGH-GROWTH SECTOR
        function formatHighGrowthSector(pattern) {
            const sep = '='.repeat(80);
            const now = new Date().toLocaleString('en-AU', {timeZone: 'Australia/Melbourne'});

            return `${sep}
>>> HIGH-GROWTH OPPORTUNITY - ${now}
${sep}

SECTOR:     ${pattern.sector || 'High-Growth'}
SYMBOL:     ${pattern.symbol || 'N/A'}
DIRECTION:  ${pattern.direction || 'LONG'}  <--- ${(pattern.direction || 'LONG').toUpperCase()}
SESSION:    ${pattern.session || 'US SESSION'}
            ${'='.repeat((pattern.session || 'US SESSION').length)}
ENTRY TIME: ${pattern.entry_time || 'Market Open'}

GROWTH CATALYST:
  ${pattern.catalyst || pattern.simple_explanation || 'High-growth sector opportunity.'}

PROFIT POTENTIAL: ${pattern.profit_potential || 'EXTREME - 200-500% potential over 12 months'}
WIN RATE: ${pattern.win_rate || 'N/A'} | PROFIT FACTOR: ${pattern.profit_factor || 'N/A'}
AVG PROFIT: ${pattern.avg_winner || 'N/A'} | AVG LOSS: ${pattern.avg_loser || 'N/A'}

Source: ${pattern.source || 'High-Growth Sectors Research'}
${sep}

>>> Click for next HIGH-GROWTH SECTOR opportunity
`;
        }

        // Auto-load patterns on page load
        document.addEventListener('DOMContentLoaded', () => {
            // Load one pattern for each category on page load
            const categories = [
                'stocks', 'penny_stocks', 'crypto', 'forex', 'futures', 'cfds',
                'special_alert', 'unique_daily', 'rare_gem', 'billion_dollar', 'high_growth'
            ];

            // Load patterns with staggered timing to avoid overwhelming the server
            categories.forEach((category, index) => {
                setTimeout(() => {
                    window.refreshPattern(category);
                }, index * 200); // 200ms delay between each
            });

            console.log('‚úÖ Pattern Discovery System initialized - 11 categories loaded');
        });

        // Cache busting
        console.log('Spartan Flashcard Network - Cache-Busting Active - ' + new Date().toISOString());
    </script>

    <!-- Global Keyboard Controls -->
    <script src="global_keyboard_controls.js"></script>

    <!-- Spartan Ticker System -->
    <script src="js/spartan_ticker.js"></script>
    <script>
        // Initialize ticker with ordered symbols: Indices ‚Üí Futures ‚Üí Stocks ‚Üí Forex ‚Üí Crypto ‚Üí CFDs
        document.addEventListener('DOMContentLoaded', () => {
            const ticker = new SpartanTicker('spartan-ticker', {
                scrollSpeed: 50,
                updateInterval: 60000,
                pauseOnHover: true
            });
        });
    </script>

    <!-- Initialize Market Regime Component -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize market regime indicator (pinned at top)
            const regime = new MarketRegimeComponent('market-regime-indicator', {
                pinned: true,
                showMetrics: true,
                showConfidence: true
            });

            // Auto-refresh every 5 minutes
            setInterval(() => regime.refresh(), 300000);
        });
    </script>

    <!-- Flashcard Manager - Drag & Drop, Editable, Pinned Sections -->
    <script src="flashcard_manager.js"></script>

    <!-- Emerging Sectors Scanner - 95% Overbought/Oversold Detection -->
    <script src="emerging_sectors.js"></script>

<!-- SPARTAN KEYBOARD NAVIGATION -->
<script src="spartan_dropdown_keyboard_nav.js"></script>
<!-- Market Validation Module -->
<script src="market_validation.js"></script>
<script src="spartan_keyboard_navigation.js"></script>
    <!-- Intermarket Barometer Ticker -->
    <script src="intermarket_ticker.js"></script>

    <!-- Composite Indicator UP/DOWN Arrows -->
    <script>
        async function updateCompositeIndicators() {
            try {
                // Fetch real-time price data using yfinance via a simple backend
                const symbols = {
                    'audjpy': 'AUDJPY=X',
                    'hyg': 'HYG',
                    'yield': '^TNX'  // 10-Year Treasury Yield
                };

                const percentChanges = {};

                for (const [key, symbol] of Object.entries(symbols)) {
                    try {
                        // Use a simple fetch to get price data
                        const response = await fetch(`http://localhost:5002/api/yahoo/chart/${symbol}?interval=1d&range=5d`);
                        const data = await response.json();

                        if (data.chart && data.chart.result && data.chart.result[0]) {
                            const result = data.chart.result[0];
                            const quotes = result.indicators.quote[0];
                            const closes = quotes.close.filter(c => c !== null);

                            if (closes.length >= 2) {
                                const currentPrice = closes[closes.length - 1];
                                const previousPrice = closes[closes.length - 2];
                                const change = currentPrice - previousPrice;
                                const percentChange = (change / previousPrice) * 100;

                                // Store percent change for composite calculation
                                percentChanges[key] = percentChange;

                                // Update price value display
                                const valueElement = document.getElementById(`${key}-value`);
                                if (valueElement) {
                                    // Format price based on symbol type
                                    let formattedPrice;
                                    if (key === 'audjpy') {
                                        formattedPrice = currentPrice.toFixed(2);
                                    } else if (key === 'yield') {
                                        formattedPrice = currentPrice.toFixed(2) + '%';
                                    } else {
                                        formattedPrice = currentPrice.toFixed(2);
                                    }
                                    valueElement.textContent = formattedPrice;
                                    valueElement.style.color = change > 0 ? '#00ff88' : (change < 0 ? '#FF5252' : '#FFD700');
                                }

                                // Update arrow based on direction
                                const arrowElement = document.getElementById(`${key}-arrow`);
                                if (arrowElement) {
                                    if (change > 0) {
                                        arrowElement.innerHTML = '‚ñ≤';
                                        arrowElement.style.color = '#00ff88';  // Green
                                        arrowElement.title = `UP ${change.toFixed(4)} (${percentChange.toFixed(2)}%)`;
                                    } else if (change < 0) {
                                        arrowElement.innerHTML = '‚ñº';
                                        arrowElement.style.color = '#FF5252';  // Red
                                        arrowElement.title = `DOWN ${Math.abs(change).toFixed(4)} (${percentChange.toFixed(2)}%)`;
                                    } else {
                                        arrowElement.innerHTML = '‚Üî';
                                        arrowElement.style.color = '#FFD700';  // Gold
                                        arrowElement.title = 'Unchanged (Sideways)';
                                    }
                                }
                            }
                        }
                    } catch (error) {
                        console.error(`Error fetching ${symbol}:`, error);
                        const arrowElement = document.getElementById(`${key}-arrow`);
                        if (arrowElement) {
                            arrowElement.innerHTML = '‚Üî';
                            arrowElement.style.color = '#b0b8c8';
                            arrowElement.title = 'Data unavailable';
                        }
                        percentChanges[key] = 0;
                    }
                }

                // Calculate Composite Risk Score (0-100)
                // Base = 50 (neutral)
                // Each indicator contributes based on % change (amplified for visibility)
                const baseScore = 50;
                const audjpyScore = (percentChanges.audjpy || 0) * 10;  // 1% change = 10 points
                const hygScore = (percentChanges.hyg || 0) * 15;        // 1% change = 15 points
                const yieldScore = (percentChanges.yield || 0) * 8;     // 1% change = 8 points

                let compositeScore = baseScore + audjpyScore + hygScore + yieldScore;

                // Clamp to 0-100
                compositeScore = Math.max(0, Math.min(100, compositeScore));

                // Update score display
                const scoreElement = document.getElementById('composite-score');
                const labelElement = document.getElementById('composite-label');
                const barElement = document.getElementById('composite-bar');

                if (scoreElement) {
                    scoreElement.textContent = Math.round(compositeScore);
                }

                if (barElement) {
                    barElement.style.width = compositeScore + '%';
                }

                // Update label and color based on score
                if (labelElement && scoreElement) {
                    if (compositeScore >= 70) {
                        labelElement.textContent = 'EXTREME RISK-ON üî•';
                        labelElement.style.color = '#00ff88';
                        scoreElement.style.color = '#00ff88';
                    } else if (compositeScore >= 55) {
                        labelElement.textContent = 'RISK-ON ‚¨ÜÔ∏è';
                        labelElement.style.color = '#66ff99';
                        scoreElement.style.color = '#66ff99';
                    } else if (compositeScore >= 45) {
                        labelElement.textContent = 'NEUTRAL ‚öñÔ∏è';
                        labelElement.style.color = '#FFD700';
                        scoreElement.style.color = '#FFD700';
                    } else if (compositeScore >= 30) {
                        labelElement.textContent = 'RISK-OFF ‚¨áÔ∏è';
                        labelElement.style.color = '#ff9966';
                        scoreElement.style.color = '#ff9966';
                    } else {
                        labelElement.textContent = 'EXTREME RISK-OFF üßä';
                        labelElement.style.color = '#FF5252';
                        scoreElement.style.color = '#FF5252';
                    }
                }

            } catch (error) {
                console.error('Error updating composite indicators:', error);
            }
        }

        // Crypto Best Composite Indicator Update Function
        async function updateCryptoCompositeIndicators() {
            try {
                // Fetch real-time crypto price data
                const cryptoSymbols = {
                    'btc': 'BTC-USD',
                    'eth': 'ETH-USD',
                    'sol': 'SOL-USD'
                };

                const percentChanges = {};

                for (const [key, symbol] of Object.entries(cryptoSymbols)) {
                    try {
                        // Use the same endpoint with 3-tier fallback (Yahoo ‚Üí Polygon ‚Üí yfinance)
                        const response = await fetch(`http://localhost:5002/api/yahoo/chart/${symbol}?interval=1d&range=5d`);
                        const data = await response.json();

                        if (data.chart && data.chart.result && data.chart.result[0]) {
                            const result = data.chart.result[0];
                            const quotes = result.indicators.quote[0];
                            const closes = quotes.close.filter(c => c !== null);

                            if (closes.length >= 2) {
                                // Use 5-day performance for more accurate trend analysis
                                const currentPrice = closes[closes.length - 1];
                                const fiveDaysAgoPrice = closes[0];  // First price in 5-day range
                                const change = currentPrice - fiveDaysAgoPrice;
                                const percentChange = (change / fiveDaysAgoPrice) * 100;

                                // Store percent change for composite calculation
                                percentChanges[key] = percentChange;

                                // Update price value display
                                const valueElement = document.getElementById(`crypto-${key}-value`);
                                if (valueElement) {
                                    // Format price based on crypto (always show $ with K suffix for thousands)
                                    let formattedPrice;
                                    if (currentPrice >= 10000) {
                                        formattedPrice = '$' + (currentPrice / 1000).toFixed(1) + 'K';
                                    } else if (currentPrice >= 1000) {
                                        formattedPrice = '$' + currentPrice.toFixed(0);
                                    } else {
                                        formattedPrice = '$' + currentPrice.toFixed(2);
                                    }
                                    valueElement.textContent = formattedPrice;
                                    valueElement.style.color = change > 0 ? '#00ff88' : (change < 0 ? '#FF5252' : '#FFD700');
                                }

                                // Update arrow based on 5-day trend direction
                                const arrowElement = document.getElementById(`crypto-${key}-arrow`);
                                if (arrowElement) {
                                    if (change > 0) {
                                        arrowElement.innerHTML = '‚ñ≤';
                                        arrowElement.style.color = '#00ff88';  // Green
                                        arrowElement.title = `UP $${change.toFixed(2)} (${percentChange.toFixed(2)}% over 5 days)`;
                                    } else if (change < 0) {
                                        arrowElement.innerHTML = '‚ñº';
                                        arrowElement.style.color = '#FF5252';  // Red
                                        arrowElement.title = `DOWN $${Math.abs(change).toFixed(2)} (${percentChange.toFixed(2)}% over 5 days)`;
                                    } else {
                                        arrowElement.innerHTML = '‚Üî';
                                        arrowElement.style.color = '#FFD700';  // Gold
                                        arrowElement.title = 'Unchanged (Sideways)';
                                    }
                                }
                            }
                        }
                    } catch (error) {
                        console.error(`Error fetching crypto ${symbol}:`, error);
                        const arrowElement = document.getElementById(`crypto-${key}-arrow`);
                        if (arrowElement) {
                            arrowElement.innerHTML = '‚Üî';
                            arrowElement.style.color = '#b0b8c8';
                            arrowElement.title = 'Data unavailable';
                        }
                        percentChanges[key] = 0;
                    }
                }

                // Calculate Crypto Composite Risk Score (0-100) based on 5-day performance
                // Base = 50 (neutral)
                // BTC has highest weight (market leader)
                // ETH has medium weight (platform health)
                // SOL has lower weight (high-beta altcoin)
                // Using 5-day changes, so scaling is more conservative
                const baseScore = 50;
                const btcScore = (percentChanges.btc || 0) * 3;   // 1% 5-day change = 3 points
                const ethScore = (percentChanges.eth || 0) * 2.5; // 1% 5-day change = 2.5 points
                const solScore = (percentChanges.sol || 0) * 2;   // 1% 5-day change = 2 points

                let compositeScore = baseScore + btcScore + ethScore + solScore;

                // Log for validation
                console.log(`üìä Crypto Composite Calculation:
                    BTC 5-day: ${(percentChanges.btc || 0).toFixed(2)}% ‚Üí ${btcScore.toFixed(1)} points
                    ETH 5-day: ${(percentChanges.eth || 0).toFixed(2)}% ‚Üí ${ethScore.toFixed(1)} points
                    SOL 5-day: ${(percentChanges.sol || 0).toFixed(2)}% ‚Üí ${solScore.toFixed(1)} points
                    Base: ${baseScore} ‚Üí Total: ${compositeScore.toFixed(1)}`);

                // Clamp to 0-100
                compositeScore = Math.max(0, Math.min(100, compositeScore));

                // Update score display
                const scoreElement = document.getElementById('crypto-composite-score');
                const labelElement = document.getElementById('crypto-composite-label');
                const barElement = document.getElementById('crypto-composite-bar');

                if (scoreElement) {
                    scoreElement.textContent = Math.round(compositeScore);
                }

                if (barElement) {
                    barElement.style.width = compositeScore + '%';
                }

                // Update label and color based on score (crypto has higher volatility thresholds)
                if (labelElement && scoreElement) {
                    if (compositeScore >= 75) {
                        labelElement.textContent = 'BULL MARKET üöÄ';
                        labelElement.style.color = '#00ff88';
                        scoreElement.style.color = '#00ff88';
                    } else if (compositeScore >= 60) {
                        labelElement.textContent = 'RISK-ON ‚¨ÜÔ∏è';
                        labelElement.style.color = '#66ff99';
                        scoreElement.style.color = '#66ff99';
                    } else if (compositeScore >= 40) {
                        labelElement.textContent = 'NEUTRAL ‚öñÔ∏è';
                        labelElement.style.color = '#FFD700';
                        scoreElement.style.color = '#FFD700';
                    } else if (compositeScore >= 25) {
                        labelElement.textContent = 'RISK-OFF ‚¨áÔ∏è';
                        labelElement.style.color = '#ff9966';
                        scoreElement.style.color = '#ff9966';
                    } else {
                        labelElement.textContent = 'BEAR MARKET üßä';
                        labelElement.style.color = '#FF5252';
                        scoreElement.style.color = '#FF5252';
                    }
                }

            } catch (error) {
                console.error('Error updating crypto composite indicators:', error);
            }
        }

        // Probabilistic Recession Model - Fetch and Display
        async function updateRecessionIndicator() {
            try {
                const response = await fetch('http://localhost:5002/api/recession-probability');
                const data = await response.json();

                if (data.error) {
                    console.error('Recession API error:', data.error);
                    return;
                }

                // Update spread value
                const spreadElement = document.getElementById('recession-spread');
                if (spreadElement) {
                    spreadElement.textContent = data.spread.toFixed(2) + '%';
                }

                // Update probability value
                const probabilityElement = document.getElementById('recession-probability');
                if (probabilityElement) {
                    probabilityElement.textContent = data.probability.toFixed(1) + '%';
                }

                // Update risk level
                const riskLevelElement = document.getElementById('recession-risk-level');
                if (riskLevelElement) {
                    riskLevelElement.textContent = data.risk_level;

                    // Color coding based on risk level
                    if (data.risk_level === 'LOW') {
                        riskLevelElement.style.color = '#00ff88';
                    } else if (data.risk_level === 'MODERATE') {
                        riskLevelElement.style.color = '#FFD700';
                    } else if (data.risk_level === 'ELEVATED') {
                        riskLevelElement.style.color = '#FFA500';
                    } else if (data.risk_level === 'HIGH') {
                        riskLevelElement.style.color = '#FF5252';
                    } else if (data.risk_level === 'CRITICAL') {
                        riskLevelElement.style.color = '#8B0000';
                    }
                }

                // Update risk emoji
                const riskEmojiElement = document.getElementById('recession-risk-emoji');
                if (riskEmojiElement) {
                    riskEmojiElement.textContent = data.risk_emoji;
                }

                // Update risk description
                const riskDescElement = document.getElementById('recession-risk-desc');
                if (riskDescElement) {
                    if (data.risk_level === 'LOW') {
                        riskDescElement.textContent = 'Low recession risk. Economic indicators are stable.';
                    } else if (data.risk_level === 'MODERATE') {
                        riskDescElement.textContent = 'Moderate recession risk. Monitor economic trends.';
                    } else if (data.risk_level === 'ELEVATED') {
                        riskDescElement.textContent = 'Elevated recession risk. Exercise caution with investments.';
                    } else if (data.risk_level === 'HIGH') {
                        riskDescElement.textContent = 'High recession risk. Defensive positioning recommended.';
                    } else if (data.risk_level === 'CRITICAL') {
                        riskDescElement.textContent = 'Critical recession risk. Recession likely imminent.';
                    }
                }

                // Update probability bar position (0% = left, 100% = right)
                const barElement = document.getElementById('recession-bar');
                if (barElement) {
                    barElement.style.left = data.probability + '%';
                }

                console.log(`‚úÖ Recession Model Updated: ${data.spread}% spread ‚Üí ${data.probability}% probability (${data.risk_level})`);

            } catch (error) {
                console.error('Error updating recession indicator:', error);
                // Set fallback UI
                const spreadElement = document.getElementById('recession-spread');
                const probabilityElement = document.getElementById('recession-probability');
                const riskLevelElement = document.getElementById('recession-risk-level');
                const riskEmojiElement = document.getElementById('recession-risk-emoji');

                if (spreadElement) spreadElement.textContent = '--';
                if (probabilityElement) probabilityElement.textContent = '--';
                if (riskLevelElement) {
                    riskLevelElement.textContent = 'DATA ERROR';
                    riskLevelElement.style.color = '#b0b8c8';
                }
                if (riskEmojiElement) riskEmojiElement.textContent = '‚ö†Ô∏è';
            }
        }

        // Stealth Macro Indicator Update Function
        async function updateStealthMacroIndicator() {
            try {
                console.log('üéØ Updating Stealth Macro Indicator...');

                // Fetch market data for all 6 macro drivers
                const symbols = {
                    'UUP': 'Dollar (DXY)',      // US Dollar ETF
                    '^TNX': '10Y Yield',        // 10-Year Treasury Yield
                    'GLD': 'Gold',              // Gold ETF
                    'USO': 'Oil',               // Oil ETF
                    'SPY': 'S&P 500',           // Equity Risk
                    '^VIX': 'VIX'               // Fear Gauge
                };

                const dataPromises = Object.keys(symbols).map(async (symbol) => {
                    try {
                        const response = await fetch(`/api/market/quote/${symbol}`);
                        if (!response.ok) throw new Error(`Failed to fetch ${symbol}`);
                        const data = await response.json();

                        // Calculate 5-day change
                        const fiveDayChange = data.changePercent5d || 0;

                        return {
                            symbol,
                            name: symbols[symbol],
                            price: data.price || 0,
                            change: data.change || 0,
                            changePercent: data.changePercent || 0,
                            fiveDayChange: fiveDayChange
                        };
                    } catch (error) {
                        console.warn(`‚ö†Ô∏è Failed to fetch ${symbol}:`, error);
                        return { symbol, name: symbols[symbol], price: null, change: 0, changePercent: 0, fiveDayChange: 0 };
                    }
                });

                const marketData = await Promise.all(dataPromises);

                // Process each driver
                marketData.forEach(asset => {
                    let elementPrefix = '';

                    // Map symbols to element IDs
                    if (asset.symbol === 'UUP') elementPrefix = 'stealth-dxy';
                    else if (asset.symbol === '^TNX') elementPrefix = 'stealth-yield';
                    else if (asset.symbol === 'GLD') elementPrefix = 'stealth-gold';
                    else if (asset.symbol === 'USO') elementPrefix = 'stealth-oil';
                    else if (asset.symbol === 'SPY') elementPrefix = 'stealth-spy';
                    else if (asset.symbol === '^VIX') elementPrefix = 'stealth-vix';

                    if (!elementPrefix) return;

                    // Update price/value
                    const valueElement = document.getElementById(`${elementPrefix}-value`);
                    if (valueElement && asset.price !== null) {
                        if (asset.symbol === '^TNX') {
                            valueElement.textContent = asset.price.toFixed(2) + '%';
                        } else if (asset.symbol === '^VIX') {
                            valueElement.textContent = asset.price.toFixed(2);
                        } else {
                            valueElement.textContent = '$' + asset.price.toFixed(2);
                        }
                    }

                    // Update arrow
                    const arrowElement = document.getElementById(`${elementPrefix}-arrow`);
                    if (arrowElement && asset.price !== null) {
                        if (asset.change > 0) {
                            arrowElement.textContent = '‚ñ≤';
                            arrowElement.style.color = '#00ff88';
                        } else if (asset.change < 0) {
                            arrowElement.textContent = '‚ñº';
                            arrowElement.style.color = '#DC143C';
                        } else {
                            arrowElement.textContent = '‚îÅ';
                            arrowElement.style.color = '#FFD700';
                        }
                    }

                    // Update 5-day change
                    const changeDayElement = document.getElementById(`${elementPrefix}-5d`);
                    if (changeDayElement && asset.price !== null) {
                        const changeColor = asset.fiveDayChange >= 0 ? '#00ff88' : '#DC143C';
                        const changeSymbol = asset.fiveDayChange >= 0 ? '+' : '';
                        changeDayElement.innerHTML = `<span style="color: ${changeColor}; font-weight: 700;">${changeSymbol}${asset.fiveDayChange.toFixed(2)}%</span>`;
                    }

                    // Update signal interpretation
                    const signalElement = document.getElementById(`${elementPrefix}-signal`);
                    if (signalElement && asset.price !== null) {
                        let signal = '';
                        let signalColor = '#FFD700';

                        if (asset.symbol === 'UUP') {
                            // Dollar: Rising = Risk-Off, Falling = Risk-On
                            if (asset.fiveDayChange > 1.5) {
                                signal = 'üî¥ Risk-Off Signal';
                                signalColor = '#DC143C';
                            } else if (asset.fiveDayChange < -1.5) {
                                signal = 'üü¢ Risk-On Signal';
                                signalColor = '#00ff88';
                            } else {
                                signal = 'üü° Neutral';
                                signalColor = '#FFD700';
                            }
                        } else if (asset.symbol === '^TNX') {
                            // Yields: Rising = Growth expectations
                            if (asset.fiveDayChange > 3) {
                                signal = 'üü¢ Growth Optimism';
                                signalColor = '#00ff88';
                            } else if (asset.fiveDayChange < -3) {
                                signal = 'üî¥ Growth Concerns';
                                signalColor = '#DC143C';
                            } else {
                                signal = 'üü° Stable';
                                signalColor = '#FFD700';
                            }
                        } else if (asset.symbol === 'GLD') {
                            // Gold: Rising = Fear/uncertainty
                            if (asset.fiveDayChange > 2) {
                                signal = 'üî¥ Fear Rising';
                                signalColor = '#DC143C';
                            } else if (asset.fiveDayChange < -2) {
                                signal = 'üü¢ Confidence Rising';
                                signalColor = '#00ff88';
                            } else {
                                signal = 'üü° Neutral';
                                signalColor = '#FFD700';
                            }
                        } else if (asset.symbol === 'USO') {
                            // Oil: Rising = Economic activity/inflation
                            if (asset.fiveDayChange > 3) {
                                signal = 'üü¢ Strong Demand';
                                signalColor = '#00ff88';
                            } else if (asset.fiveDayChange < -3) {
                                signal = 'üî¥ Weak Demand';
                                signalColor = '#DC143C';
                            } else {
                                signal = 'üü° Steady';
                                signalColor = '#FFD700';
                            }
                        } else if (asset.symbol === 'SPY') {
                            // SPY: Rising = Risk appetite
                            if (asset.fiveDayChange > 2) {
                                signal = 'üü¢ Strong Risk Appetite';
                                signalColor = '#00ff88';
                            } else if (asset.fiveDayChange < -2) {
                                signal = 'üî¥ Risk Aversion';
                                signalColor = '#DC143C';
                            } else {
                                signal = 'üü° Neutral';
                                signalColor = '#FFD700';
                            }
                        } else if (asset.symbol === '^VIX') {
                            // VIX: Rising = Fear, Falling = Complacency
                            if (asset.fiveDayChange > 15) {
                                signal = 'üî¥ Fear Spiking';
                                signalColor = '#DC143C';
                            } else if (asset.fiveDayChange < -15) {
                                signal = 'üü¢ Calm Markets';
                                signalColor = '#00ff88';
                            } else {
                                signal = 'üü° Normal';
                                signalColor = '#FFD700';
                            }
                        }

                        signalElement.textContent = signal;
                        signalElement.style.color = signalColor;
                    }
                });

                // Calculate overall macro regime
                const dxyData = marketData.find(d => d.symbol === 'UUP');
                const yieldData = marketData.find(d => d.symbol === '^TNX');
                const goldData = marketData.find(d => d.symbol === 'GLD');
                const oilData = marketData.find(d => d.symbol === 'USO');
                const spyData = marketData.find(d => d.symbol === 'SPY');
                const vixData = marketData.find(d => d.symbol === '^VIX');

                let regimeScore = 0;  // -100 (Risk-Off) to +100 (Risk-On)
                let validSignals = 0;

                // Dollar contribution (inverse: weak dollar = risk-on)
                if (dxyData && dxyData.price !== null) {
                    regimeScore -= dxyData.fiveDayChange * 5;
                    validSignals++;
                }

                // Yield contribution (rising = risk-on)
                if (yieldData && yieldData.price !== null) {
                    regimeScore += yieldData.fiveDayChange * 3;
                    validSignals++;
                }

                // Gold contribution (inverse: falling gold = risk-on)
                if (goldData && goldData.price !== null) {
                    regimeScore -= goldData.fiveDayChange * 4;
                    validSignals++;
                }

                // Oil contribution (rising = risk-on)
                if (oilData && oilData.price !== null) {
                    regimeScore += oilData.fiveDayChange * 3;
                    validSignals++;
                }

                // SPY contribution (rising = risk-on)
                if (spyData && spyData.price !== null) {
                    regimeScore += spyData.fiveDayChange * 6;
                    validSignals++;
                }

                // VIX contribution (inverse: falling VIX = risk-on)
                if (vixData && vixData.price !== null) {
                    regimeScore -= vixData.fiveDayChange * 2;
                    validSignals++;
                }

                // Determine regime
                const statusElement = document.getElementById('macroRegimeStatus');
                const descElement = document.getElementById('macroRegimeDescription');

                if (validSignals >= 4) {
                    if (regimeScore > 15) {
                        // Strong Risk-On
                        statusElement.textContent = 'üü¢ RISK-ON';
                        statusElement.style.color = '#00ff88';
                        descElement.textContent = 'Strong risk appetite detected across macro drivers. Favorable for equities, commodities, and emerging markets.';
                    } else if (regimeScore > 5) {
                        // Moderate Risk-On
                        statusElement.textContent = 'üü¢ MILD RISK-ON';
                        statusElement.style.color = '#00ff88';
                        descElement.textContent = 'Modest risk appetite. Markets trending positive but not euphoric.';
                    } else if (regimeScore < -15) {
                        // Strong Risk-Off
                        statusElement.textContent = 'üî¥ RISK-OFF';
                        statusElement.style.color = '#DC143C';
                        descElement.textContent = 'Strong risk aversion detected. Flight to safety underway. Favor bonds, gold, and defensive sectors.';
                    } else if (regimeScore < -5) {
                        // Moderate Risk-Off
                        statusElement.textContent = 'üî¥ MILD RISK-OFF';
                        statusElement.style.color = '#DC143C';
                        descElement.textContent = 'Modest risk aversion. Markets showing caution.';
                    } else {
                        // Transition/Mixed
                        statusElement.textContent = 'üü£ TRANSITION';
                        statusElement.style.color = '#bc13fe';
                        descElement.textContent = 'Mixed signals across macro drivers. Regime change potentially in progress. Monitor for confirmation.';
                    }

                    // Check for stagflation scenario
                    if (yieldData && oilData && goldData && spyData) {
                        if (yieldData.fiveDayChange > 2 && oilData.fiveDayChange > 2 && goldData.fiveDayChange > 1 && spyData.fiveDayChange < 0) {
                            statusElement.textContent = 'üü° STAGFLATION RISK';
                            statusElement.style.color = '#FFD700';
                            descElement.textContent = 'Warning: Rising yields + rising commodities + weak equities = potential stagflation scenario developing.';
                        }
                    }
                } else {
                    statusElement.textContent = '‚ö†Ô∏è INSUFFICIENT DATA';
                    statusElement.style.color = '#b0b8c8';
                    descElement.textContent = 'Not enough macro driver data available for regime detection.';
                }

                console.log(`‚úÖ Stealth Macro Updated | Regime Score: ${regimeScore.toFixed(1)} | Signals: ${validSignals}/6`);

            } catch (error) {
                console.error('‚ùå Error updating Stealth Macro indicator:', error);

                // Set error state
                const statusElement = document.getElementById('macroRegimeStatus');
                const descElement = document.getElementById('macroRegimeDescription');

                if (statusElement) {
                    statusElement.textContent = '‚ö†Ô∏è DATA ERROR';
                    statusElement.style.color = '#DC143C';
                }
                if (descElement) {
                    descElement.textContent = 'Unable to fetch macro driver data. Please refresh the page.';
                }
            }
        }

        // VIX Composite Indicator Update Function
        async function updateVixCompositeIndicator() {
            try {
                console.log('‚ö° Updating VIX Composite Indicator...');

                // Fetch VIX and crypto data
                const [vixData, btcData, ethData] = await Promise.all([
                    fetch('/api/market/quote/^VIX').then(r => r.json()).catch(() => null),
                    fetch('/api/market/quote/BTC-USD').then(r => r.json()).catch(() => null),
                    fetch('/api/market/quote/ETH-USD').then(r => r.json()).catch(() => null)
                ]);

                // Calculate VIX component (0-50)
                let vixScore = 0;
                if (vixData && vixData.price !== null) {
                    // VIX scoring:
                    // 10-15 = very low (50 points), 15-20 = low (30), 20-30 = moderate (15), 30+ = high (0)
                    const vix = vixData.price;
                    if (vix < 15) {
                        vixScore = 50; // Extreme complacency
                    } else if (vix < 20) {
                        vixScore = 35; // Low volatility
                    } else if (vix < 30) {
                        vixScore = 20; // Moderate volatility
                    } else if (vix < 40) {
                        vixScore = 10; // High volatility
                    } else {
                        vixScore = 0; // Extreme fear
                    }

                    // Update VIX display
                    const vixValueElement = document.getElementById('vix-current-value');
                    const vixChangeElement = document.getElementById('vix-5d-change');
                    const vixStatusElement = document.getElementById('vix-status');

                    if (vixValueElement) {
                        vixValueElement.textContent = vix.toFixed(2);
                    }

                    if (vixChangeElement) {
                        const change5d = vixData.changePercent5d || 0;
                        const changeColor = change5d >= 0 ? '#DC143C' : '#00ff88'; // Rising VIX = red (fear)
                        const changeSymbol = change5d >= 0 ? '+' : '';
                        vixChangeElement.innerHTML = `<span style="color: ${changeColor};">${changeSymbol}${change5d.toFixed(2)}%</span>`;
                    }

                    if (vixStatusElement) {
                        if (vix < 15) {
                            vixStatusElement.textContent = 'üü¢ COMPLACENT';
                            vixStatusElement.style.color = '#00ff88';
                        } else if (vix < 20) {
                            vixStatusElement.textContent = 'üü¢ LOW';
                            vixStatusElement.style.color = '#00ff88';
                        } else if (vix < 30) {
                            vixStatusElement.textContent = 'üü° MODERATE';
                            vixStatusElement.style.color = '#FFD700';
                        } else if (vix < 40) {
                            vixStatusElement.textContent = 'üî¥ HIGH';
                            vixStatusElement.style.color = '#DC143C';
                        } else {
                            vixStatusElement.textContent = 'üî¥ EXTREME';
                            vixStatusElement.style.color = '#DC143C';
                        }
                    }
                }

                // Calculate crypto volatility component (0-50)
                let cryptoScore = 0;
                if (btcData && btcData.price !== null && ethData && ethData.price !== null) {
                    // Use 5-day volatility (absolute value of percentage changes)
                    const btcVol = Math.abs(btcData.changePercent5d || 0);
                    const ethVol = Math.abs(ethData.changePercent5d || 0);
                    const avgCryptoVol = (btcVol + ethVol) / 2;

                    // Crypto vol scoring:
                    // <5% = calm (50), 5-10% = normal (35), 10-20% = elevated (20), 20%+ = extreme (0)
                    if (avgCryptoVol < 5) {
                        cryptoScore = 50; // Very calm
                    } else if (avgCryptoVol < 10) {
                        cryptoScore = 35; // Normal
                    } else if (avgCryptoVol < 20) {
                        cryptoScore = 20; // Elevated
                    } else if (avgCryptoVol < 30) {
                        cryptoScore = 10; // High
                    } else {
                        cryptoScore = 0; // Extreme
                    }

                    // Update crypto display
                    const cryptoVolElement = document.getElementById('crypto-vol-score');
                    const cryptoStatusElement = document.getElementById('crypto-vol-status');
                    const cryptoChangeElement = document.getElementById('crypto-vol-change');

                    if (cryptoVolElement) {
                        cryptoVolElement.textContent = avgCryptoVol.toFixed(2) + '%';
                    }

                    if (cryptoChangeElement) {
                        cryptoChangeElement.textContent = `BTC: ${btcVol.toFixed(1)}% | ETH: ${ethVol.toFixed(1)}%`;
                    }

                    if (cryptoStatusElement) {
                        if (avgCryptoVol < 5) {
                            cryptoStatusElement.textContent = 'üü¢ CALM';
                            cryptoStatusElement.style.color = '#00ff88';
                        } else if (avgCryptoVol < 10) {
                            cryptoStatusElement.textContent = 'üü¢ NORMAL';
                            cryptoStatusElement.style.color = '#00ff88';
                        } else if (avgCryptoVol < 20) {
                            cryptoStatusElement.textContent = 'üü° ELEVATED';
                            cryptoStatusElement.style.color = '#FFD700';
                        } else if (avgCryptoVol < 30) {
                            cryptoStatusElement.textContent = 'üî¥ HIGH';
                            cryptoStatusElement.style.color = '#DC143C';
                        } else {
                            cryptoStatusElement.textContent = 'üî¥ EXTREME';
                            cryptoStatusElement.style.color = '#DC143C';
                        }
                    }
                }

                // Calculate composite score (0-100)
                const compositeScore = vixScore + cryptoScore;

                // Update composite display
                const scoreElement = document.getElementById('vixCompositeScore');
                const labelElement = document.getElementById('vixCompositeLabel');
                const barElement = document.getElementById('vixCompositeBar');

                if (scoreElement) {
                    scoreElement.textContent = Math.round(compositeScore);
                }

                if (labelElement) {
                    if (compositeScore >= 70) {
                        labelElement.textContent = 'üü¢ LOW VOLATILITY - CALM MARKETS';
                        labelElement.style.color = '#00ff88';
                    } else if (compositeScore >= 50) {
                        labelElement.textContent = 'üü° MODERATE VOLATILITY';
                        labelElement.style.color = '#FFD700';
                    } else if (compositeScore >= 30) {
                        labelElement.textContent = 'üü† ELEVATED VOLATILITY';
                        labelElement.style.color = '#FF8C00';
                    } else {
                        labelElement.textContent = 'üî¥ HIGH VOLATILITY - TURBULENT';
                        labelElement.style.color = '#DC143C';
                    }
                }

                if (barElement) {
                    barElement.style.width = compositeScore + '%';

                    // Color gradient based on score
                    if (compositeScore >= 70) {
                        barElement.style.background = 'linear-gradient(90deg, #00ff88, #00cc66)';
                    } else if (compositeScore >= 50) {
                        barElement.style.background = 'linear-gradient(90deg, #FFD700, #FFA500)';
                    } else if (compositeScore >= 30) {
                        barElement.style.background = 'linear-gradient(90deg, #FF8C00, #FF6347)';
                    } else {
                        barElement.style.background = 'linear-gradient(90deg, #DC143C, #8B0000)';
                    }
                }

                console.log(`‚úÖ VIX Composite Updated | Score: ${compositeScore} | VIX: ${vixScore} | Crypto: ${cryptoScore}`);

            } catch (error) {
                console.error('‚ùå Error updating VIX Composite indicator:', error);

                const scoreElement = document.getElementById('vixCompositeScore');
                const labelElement = document.getElementById('vixCompositeLabel');

                if (scoreElement) {
                    scoreElement.textContent = '--';
                }
                if (labelElement) {
                    labelElement.textContent = 'DATA ERROR';
                    labelElement.style.color = '#DC143C';
                }
            }
        }

        // Update on page load
        document.addEventListener('DOMContentLoaded', () => {
            updateCompositeIndicators();
            updateCryptoCompositeIndicators();
            updateRecessionIndicator();
            updateStealthMacroIndicator();
            updateVixCompositeIndicator();

            // Refresh every 5 minutes
            setInterval(updateCompositeIndicators, 300000);
            setInterval(updateCryptoCompositeIndicators, 300000);
            setInterval(updateRecessionIndicator, 300000);
            setInterval(updateStealthMacroIndicator, 300000);
            setInterval(updateVixCompositeIndicator, 300000);

            // Initialize Economic Cycle Dashboard
            updateEconomicCycleDashboard();
            setInterval(updateEconomicCycleDashboard, 300000); // 5 minutes
        });

        // ============================================
        // Economic Cycle Intelligence Dashboard
        // Zero-Simulation Policy: REAL DATA ONLY
        // ============================================

        async function updateEconomicCycleDashboard() {
            try {
                console.log('[Economic Cycle] Fetching dashboard data from API...');
                const response = await fetch('http://localhost:5006/api/economic-cycle/dashboard');

                if (!response.ok) {
                    throw new Error(`API returned ${response.status}: ${response.statusText}`);
                }

                const data = await response.json();
                console.log('[Economic Cycle] Dashboard data received:', data);

                // ====================================
                // Update Business Cycle Phase
                // ====================================
                if (data.cycle_phase && isRealData(data.cycle_phase.current_phase)) {
                    const phaseEmoji = document.getElementById('cycle-phase-emoji');
                    const phaseName = document.getElementById('cycle-phase-name');
                    const phaseDesc = document.getElementById('cycle-phase-description');
                    const phaseConf = document.getElementById('cycle-phase-confidence');

                    if (phaseEmoji) phaseEmoji.textContent = data.cycle_phase.emoji || '‚ü≥';
                    if (phaseName) phaseName.textContent = data.cycle_phase.current_phase || 'UNKNOWN';
                    if (phaseDesc) phaseDesc.textContent = data.cycle_phase.description || 'Insufficient data';
                    if (phaseConf) phaseConf.textContent = `${data.cycle_phase.confidence || 0}%`;

                    console.log(`[Economic Cycle] Phase: ${data.cycle_phase.current_phase} (${data.cycle_phase.confidence}%)`);
                }

                // ====================================
                // Update Key Economic Indicators
                // ====================================
                if (data.key_indicators) {
                    const indicators = data.key_indicators;

                    // GDP Growth
                    if (isRealData(indicators.gdp_growth)) {
                        const gdpValue = document.getElementById('econ-gdp-value');
                        const gdpChange = document.getElementById('econ-gdp-change');
                        if (gdpValue) gdpValue.textContent = `${indicators.gdp_growth.toFixed(2)}%`;
                        if (gdpChange) {
                            gdpChange.textContent = indicators.gdp_growth >= 0 ? '‚ñ≤' : '‚ñº';
                            gdpChange.style.color = indicators.gdp_growth >= 2.0 ? '#00ff88' : '#ff6b6b';
                        }
                    } else {
                        const gdpValue = document.getElementById('econ-gdp-value');
                        if (gdpValue) gdpValue.textContent = 'N/A';
                    }

                    // Unemployment Rate
                    if (isRealData(indicators.unemployment)) {
                        const unempValue = document.getElementById('econ-unemployment-value');
                        const unempChange = document.getElementById('econ-unemployment-change');
                        if (unempValue) unempValue.textContent = `${indicators.unemployment.toFixed(1)}%`;
                        if (unempChange) {
                            unempChange.textContent = indicators.unemployment < 5.0 ? '‚ñº' : '‚ñ≤';
                            unempChange.style.color = indicators.unemployment < 5.0 ? '#00ff88' : '#ff6b6b';
                        }
                    } else {
                        const unempValue = document.getElementById('econ-unemployment-value');
                        if (unempValue) unempValue.textContent = 'N/A';
                    }

                    // CPI Inflation
                    if (isRealData(indicators.inflation_cpi)) {
                        const cpiValue = document.getElementById('econ-cpi-value');
                        const cpiChange = document.getElementById('econ-cpi-change');
                        if (cpiValue) cpiValue.textContent = `${indicators.inflation_cpi.toFixed(2)}%`;
                        if (cpiChange) {
                            cpiChange.textContent = indicators.inflation_cpi > 2.5 ? '‚ñ≤' : '‚ñº';
                            cpiChange.style.color = (indicators.inflation_cpi >= 2.0 && indicators.inflation_cpi <= 3.0) ? '#00ff88' : '#ff6b6b';
                        }
                    } else {
                        const cpiValue = document.getElementById('econ-cpi-value');
                        if (cpiValue) cpiValue.textContent = 'N/A';
                    }

                    // PCE Inflation
                    if (isRealData(indicators.inflation_pce)) {
                        const pceValue = document.getElementById('econ-pce-value');
                        const pceChange = document.getElementById('econ-pce-change');
                        if (pceValue) pceValue.textContent = `${indicators.inflation_pce.toFixed(2)}%`;
                        if (pceChange) {
                            pceChange.textContent = indicators.inflation_pce > 2.5 ? '‚ñ≤' : '‚ñº';
                            pceChange.style.color = (indicators.inflation_pce >= 2.0 && indicators.inflation_pce <= 2.5) ? '#00ff88' : '#ff6b6b';
                        }
                    } else {
                        const pceValue = document.getElementById('econ-pce-value');
                        if (pceValue) pceValue.textContent = 'N/A';
                    }

                    // Consumer Confidence
                    if (isRealData(indicators.consumer_confidence)) {
                        const confValue = document.getElementById('econ-confidence-value');
                        const confChange = document.getElementById('econ-confidence-change');
                        if (confValue) confValue.textContent = indicators.consumer_confidence.toFixed(1);
                        if (confChange) {
                            confChange.textContent = indicators.consumer_confidence > 90 ? '‚ñ≤' : '‚ñº';
                            confChange.style.color = indicators.consumer_confidence > 90 ? '#00ff88' : '#ff6b6b';
                        }
                    } else {
                        const confValue = document.getElementById('econ-confidence-value');
                        if (confValue) confValue.textContent = 'N/A';
                    }

                    // Leading Economic Index
                    if (isRealData(indicators.leading_index)) {
                        const leiValue = document.getElementById('econ-lei-value');
                        const leiChange = document.getElementById('econ-lei-change');
                        if (leiValue) leiValue.textContent = indicators.leading_index.toFixed(1);
                        if (leiChange) {
                            leiChange.textContent = indicators.leading_index > 100 ? '‚ñ≤' : '‚ñº';
                            leiChange.style.color = indicators.leading_index > 100 ? '#00ff88' : '#ff6b6b';
                        }
                    } else {
                        const leiValue = document.getElementById('econ-lei-value');
                        if (leiValue) leiValue.textContent = 'N/A';
                    }

                    console.log('[Economic Cycle] Key indicators updated');
                }

                // ====================================
                // Update Recession Timeline
                // ====================================
                if (data.recession_risk) {
                    const risk = data.recession_risk;

                    // 3-Month Probability
                    if (isRealData(risk['3_month_probability'])) {
                        const prob3m = document.getElementById('recession-3m');
                        const bar3m = document.getElementById('recession-3m-bar');
                        if (prob3m) prob3m.textContent = `${risk['3_month_probability'].toFixed(1)}%`;
                        if (bar3m) {
                            bar3m.style.width = `${Math.min(risk['3_month_probability'], 100)}%`;
                            bar3m.style.backgroundColor = risk['3_month_probability'] > 20 ? '#ff6b6b' : '#00ff88';
                        }
                    }

                    // 6-Month Probability
                    if (isRealData(risk['6_month_probability'])) {
                        const prob6m = document.getElementById('recession-6m');
                        const bar6m = document.getElementById('recession-6m-bar');
                        if (prob6m) prob6m.textContent = `${risk['6_month_probability'].toFixed(1)}%`;
                        if (bar6m) {
                            bar6m.style.width = `${Math.min(risk['6_month_probability'], 100)}%`;
                            bar6m.style.backgroundColor = risk['6_month_probability'] > 20 ? '#ff6b6b' : '#00ff88';
                        }
                    }

                    // 12-Month Probability
                    if (isRealData(risk['12_month_probability'])) {
                        const prob12m = document.getElementById('recession-12m');
                        const bar12m = document.getElementById('recession-12m-bar');
                        if (prob12m) prob12m.textContent = `${risk['12_month_probability'].toFixed(1)}%`;
                        if (bar12m) {
                            bar12m.style.width = `${Math.min(risk['12_month_probability'], 100)}%`;
                            bar12m.style.backgroundColor = risk['12_month_probability'] > 20 ? '#ff6b6b' : '#00ff88';
                        }
                    }

                    // Yield Spread
                    if (isRealData(risk.yield_spread)) {
                        const spreadValue = document.getElementById('yield-spread-value');
                        if (spreadValue) {
                            spreadValue.textContent = `${risk.yield_spread.toFixed(2)}%`;
                            spreadValue.style.color = risk.yield_spread < 0 ? '#ff6b6b' : '#00ff88';
                        }
                    }

                    console.log('[Economic Cycle] Recession timeline updated');
                }

                // ====================================
                // Update Economic Regime Matrix
                // ====================================
                if (data.economic_regime && isRealData(data.economic_regime.current_regime)) {
                    const currentRegime = data.economic_regime.current_regime.toUpperCase();

                    // Reset all quadrants to inactive
                    const quadrants = ['goldilocks', 'reflation', 'deflation', 'stagflation'];
                    quadrants.forEach(regime => {
                        const quadEl = document.getElementById(`regime-quad-${regime}`);
                        if (quadEl) {
                            quadEl.style.border = '2px solid rgba(255, 255, 255, 0.2)';
                            quadEl.style.backgroundColor = 'rgba(255, 255, 255, 0.05)';
                            quadEl.style.transform = 'scale(1)';
                        }
                    });

                    // Highlight active quadrant
                    const activeQuad = document.getElementById(`regime-quad-${currentRegime.toLowerCase()}`);
                    if (activeQuad) {
                        activeQuad.style.border = '3px solid #00F0FF';
                        activeQuad.style.backgroundColor = 'rgba(0, 240, 255, 0.15)';
                        activeQuad.style.transform = 'scale(1.05)';
                        activeQuad.style.boxShadow = '0 0 20px rgba(0, 240, 255, 0.5)';
                    }

                    // Update regime description
                    const regimeDesc = document.getElementById('regime-description');
                    if (regimeDesc) {
                        regimeDesc.textContent = data.economic_regime.description || '';
                    }

                    console.log(`[Economic Cycle] Regime: ${currentRegime}`);
                }

                // ====================================
                // Update Sector Rotation Guidance
                // ====================================
                if (data.sector_rotation) {
                    const rotation = data.sector_rotation;

                    // BUY sectors
                    const buyList = document.getElementById('sector-buy');
                    if (buyList && rotation.buy && rotation.buy.length > 0) {
                        buyList.innerHTML = rotation.buy.map(sector =>
                            `<li><strong>${sector}</strong></li>`
                        ).join('');
                    } else if (buyList) {
                        buyList.innerHTML = '<li>No strong buy signals</li>';
                    }

                    // HOLD sectors
                    const holdList = document.getElementById('sector-hold');
                    if (holdList && rotation.hold && rotation.hold.length > 0) {
                        holdList.innerHTML = rotation.hold.map(sector =>
                            `<li>${sector}</li>`
                        ).join('');
                    } else if (holdList) {
                        holdList.innerHTML = '<li>No hold recommendations</li>';
                    }

                    // SELL sectors
                    const sellList = document.getElementById('sector-sell');
                    if (sellList && rotation.sell && rotation.sell.length > 0) {
                        sellList.innerHTML = rotation.sell.map(sector =>
                            `<li><em>${sector}</em></li>`
                        ).join('');
                    } else if (sellList) {
                        sellList.innerHTML = '<li>No sell signals</li>';
                    }

                    console.log('[Economic Cycle] Sector rotation updated');
                }

                console.log('‚úÖ Economic Cycle Dashboard fully updated with REAL DATA');

            } catch (error) {
                console.error('[Economic Cycle] Dashboard update error:', error);

                // Set error states - NO FAKE DATA
                const phaseEmoji = document.getElementById('cycle-phase-emoji');
                const phaseName = document.getElementById('cycle-phase-name');
                const phaseDesc = document.getElementById('cycle-phase-description');

                if (phaseEmoji) phaseEmoji.textContent = '‚ö†Ô∏è';
                if (phaseName) phaseName.textContent = 'ERROR';
                if (phaseDesc) phaseDesc.textContent = `API connection failed: ${error.message}`;

                // Show API unavailable message
                console.error('[Economic Cycle] ‚ùå Failed to fetch data. NO FAKE DATA will be shown.');
            }
        }

        // Helper function to validate real data (NO FAKE DATA policy)
        function isRealData(value) {
            if (value === null || value === undefined) return false;
            if (typeof value === 'number' && isNaN(value)) return false;
            if (typeof value === 'string' && value.trim() === '') return false;
            return true;
        }

        // ============================================
        // AlphaStream Omni-Terminal: REAL DATA ONLY
        // Zero-Simulation Policy Enforced
        // ============================================

        const AlphaStream = {
            // Track data freshness (in milliseconds)
            DATA_FRESH_THRESHOLD: 60000, // 1 minute
            lastFetch: {},

            // Update card status (live/stale/error)
            updateCardStatus(assetId, status, timestamp = null) {
                const badge = document.getElementById(`${assetId}-badge`);
                const value = document.getElementById(`alpha-${assetId}-value`);
                const timestampEl = document.getElementById(`alpha-${assetId}-timestamp`);

                if (!badge || !value) return;

                // Remove all status classes
                badge.className = 'terminal-card-badge';
                value.className = 'terminal-value';

                switch(status) {
                    case 'live':
                        badge.classList.add('badge-live');
                        badge.textContent = 'LIVE';
                        value.classList.add('value-live');
                        break;
                    case 'stale':
                        badge.classList.add('badge-stale');
                        badge.textContent = 'STALE';
                        value.classList.add('value-stale');
                        break;
                    case 'error':
                        badge.classList.add('badge-error');
                        badge.textContent = 'OFFLINE';
                        value.classList.add('value-error');
                        break;
                }

                if (timestampEl && timestamp) {
                    timestampEl.textContent = `Updated: ${timestamp.toLocaleTimeString()}`;
                }
            },

            // Update API source status indicator
            updateApiStatus(apiId, isOnline) {
                const dot = document.getElementById(`${apiId}-status`);
                if (dot) {
                    dot.style.background = isOnline ? '#00F0FF' : '#FF2A2A';
                    dot.style.boxShadow = isOnline ? '0 0 8px #00F0FF' : '0 0 8px #FF2A2A';
                }
            },

            // Validate that data is real (not null, undefined, NaN, or mock)
            isRealData(value) {
                if (value === null || value === undefined) return false;
                if (typeof value === 'number' && isNaN(value)) return false;
                if (typeof value === 'number' && !isFinite(value)) return false;
                return true;
            },

            // Format price display
            formatPrice(value, decimals = 2) {
                if (!this.isRealData(value)) return '---';
                return '$' + value.toLocaleString('en-US', {
                    minimumFractionDigits: decimals,
                    maximumFractionDigits: decimals
                });
            },

            // Format change display
            formatChange(change, changePercent) {
                if (!this.isRealData(change) || !this.isRealData(changePercent)) {
                    return '<span>---</span>';
                }
                const isPositive = change >= 0;
                const arrow = isPositive ? '&#9650;' : '&#9660;';
                const colorClass = isPositive ? 'change-positive' : 'change-negative';
                return `<span class="${colorClass}">${arrow} ${Math.abs(changePercent).toFixed(2)}% (24h)</span>`;
            },

            // Fetch crypto data from CoinGecko (free, no API key required)
            async fetchCryptoData() {
                try {
                    const response = await fetch(
                        'https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum&vs_currencies=usd&include_24hr_change=true'
                    );

                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}`);
                    }

                    const data = await response.json();
                    const now = new Date();

                    // Bitcoin
                    if (data.bitcoin && this.isRealData(data.bitcoin.usd)) {
                        const btc = data.bitcoin;
                        document.getElementById('alpha-btc-value').textContent = this.formatPrice(btc.usd);
                        document.getElementById('alpha-btc-change').innerHTML = this.formatChange(btc.usd_24h_change, btc.usd_24h_change);
                        this.updateCardStatus('btc', 'live', now);
                        this.lastFetch.btc = now;
                    } else {
                        throw new Error('Invalid BTC data');
                    }

                    // Ethereum
                    if (data.ethereum && this.isRealData(data.ethereum.usd)) {
                        const eth = data.ethereum;
                        document.getElementById('alpha-eth-value').textContent = this.formatPrice(eth.usd);
                        document.getElementById('alpha-eth-change').innerHTML = this.formatChange(eth.usd_24h_change, eth.usd_24h_change);
                        this.updateCardStatus('eth', 'live', now);
                        this.lastFetch.eth = now;
                    } else {
                        throw new Error('Invalid ETH data');
                    }

                    this.updateApiStatus('coingecko', true);
                    return true;

                } catch (error) {
                    console.error('[AlphaStream] CoinGecko fetch error:', error.message);

                    // Set to error state - NO FALLBACK TO FAKE DATA
                    document.getElementById('alpha-btc-value').textContent = '---';
                    document.getElementById('alpha-btc-change').innerHTML = '<span>API Error</span>';
                    this.updateCardStatus('btc', 'error');

                    document.getElementById('alpha-eth-value').textContent = '---';
                    document.getElementById('alpha-eth-change').innerHTML = '<span>API Error</span>';
                    this.updateCardStatus('eth', 'error');

                    this.updateApiStatus('coingecko', false);
                    return false;
                }
            },

            // Fetch commodities data (Gold) from free API
            async fetchGoldData() {
                try {
                    // Using Metals.live free API for gold prices
                    const response = await fetch('https://api.metals.live/v1/spot/gold');

                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}`);
                    }

                    const data = await response.json();
                    const now = new Date();

                    // Metals.live returns array with price data
                    if (Array.isArray(data) && data.length > 0 && this.isRealData(data[0].price)) {
                        const goldPrice = data[0].price;
                        document.getElementById('alpha-gold-value').textContent = this.formatPrice(goldPrice);
                        document.getElementById('alpha-gold-change').innerHTML = '<span style="color: #888;">Spot price</span>';
                        this.updateCardStatus('gold', 'live', now);
                        this.lastFetch.gold = now;
                        return true;
                    } else {
                        throw new Error('Invalid gold data structure');
                    }

                } catch (error) {
                    console.error('[AlphaStream] Gold fetch error:', error.message);

                    // NO FALLBACK - Display error state
                    document.getElementById('alpha-gold-value').textContent = '---';
                    document.getElementById('alpha-gold-change').innerHTML = '<span>API Error</span>';
                    this.updateCardStatus('gold', 'error');
                    return false;
                }
            },

            // Fetch SPY data (fallback to showing as unavailable without API key)
            async fetchSPYData() {
                try {
                    // Note: Real stock data requires API key (Alpha Vantage, Polygon, etc.)
                    // Without key, we show N/A - we NEVER simulate data

                    // Check if we have an Alpha Vantage key configured
                    const ALPHA_VANTAGE_KEY = localStorage.getItem('alpha_vantage_key');

                    if (!ALPHA_VANTAGE_KEY) {
                        // No API key - show as unavailable (NOT fake data)
                        document.getElementById('alpha-spy-value').textContent = 'N/A';
                        document.getElementById('alpha-spy-change').innerHTML = '<span style="color: #888;">API key required</span>';
                        document.getElementById('alpha-spy-timestamp').textContent = 'Configure API key in settings';
                        this.updateCardStatus('spy', 'stale');
                        this.updateApiStatus('alphavantage', false);
                        return false;
                    }

                    const response = await fetch(
                        `https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=SPY&apikey=${ALPHA_VANTAGE_KEY}`
                    );

                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}`);
                    }

                    const data = await response.json();
                    const now = new Date();

                    // Check for rate limit or invalid response
                    if (data.Note || data['Error Message']) {
                        throw new Error(data.Note || data['Error Message']);
                    }

                    const quote = data['Global Quote'];
                    if (quote && this.isRealData(parseFloat(quote['05. price']))) {
                        const price = parseFloat(quote['05. price']);
                        const changePercent = parseFloat(quote['10. change percent'].replace('%', ''));

                        document.getElementById('alpha-spy-value').textContent = this.formatPrice(price);
                        document.getElementById('alpha-spy-change').innerHTML = this.formatChange(changePercent, changePercent);
                        this.updateCardStatus('spy', 'live', now);
                        this.lastFetch.spy = now;
                        this.updateApiStatus('alphavantage', true);
                        return true;
                    } else {
                        throw new Error('Invalid SPY data');
                    }

                } catch (error) {
                    console.error('[AlphaStream] SPY fetch error:', error.message);

                    // NO FALLBACK - Display error state
                    document.getElementById('alpha-spy-value').textContent = '---';
                    document.getElementById('alpha-spy-change').innerHTML = '<span>API Error</span>';
                    this.updateCardStatus('spy', 'error');
                    this.updateApiStatus('alphavantage', false);
                    return false;
                }
            },

            // Update terminal status
            updateTerminalStatus() {
                const statusDot = document.getElementById('terminal-status-dot');
                const statusText = document.getElementById('terminal-status-text');

                const now = Date.now();
                let allFresh = true;
                let anyError = false;

                // Check data freshness
                for (const [asset, lastTime] of Object.entries(this.lastFetch)) {
                    if (!lastTime || (now - lastTime.getTime()) > this.DATA_FRESH_THRESHOLD) {
                        allFresh = false;
                    }
                }

                // Check for error states
                const badges = ['btc-badge', 'eth-badge', 'gold-badge', 'spy-badge'];
                for (const badgeId of badges) {
                    const badge = document.getElementById(badgeId);
                    if (badge && badge.textContent === 'OFFLINE') {
                        anyError = true;
                    }
                }

                statusDot.className = 'status-dot';
                if (anyError) {
                    statusDot.classList.add('status-error');
                    statusText.textContent = 'PARTIAL OUTAGE';
                } else if (allFresh) {
                    statusDot.classList.add('status-live');
                    statusText.textContent = 'ALL FEEDS LIVE';
                } else {
                    statusDot.classList.add('status-stale');
                    statusText.textContent = 'REFRESHING...';
                }
            },

            // Initialize terminal
            async init() {
                console.log('[AlphaStream] Initializing Omni-Terminal (Zero-Simulation Mode)');

                // Fetch all data sources in parallel
                await Promise.all([
                    this.fetchCryptoData(),
                    this.fetchGoldData(),
                    this.fetchSPYData()
                ]);

                this.updateTerminalStatus();

                // Refresh crypto data every 60 seconds
                setInterval(() => this.fetchCryptoData(), 60000);

                // Refresh gold data every 5 minutes
                setInterval(() => this.fetchGoldData(), 300000);

                // Refresh SPY data every 5 minutes (API rate limits)
                setInterval(() => this.fetchSPYData(), 300000);

                // Update terminal status every 30 seconds
                setInterval(() => this.updateTerminalStatus(), 30000);
            }
        };

        // Initialize AlphaStream on page load
        document.addEventListener('DOMContentLoaded', () => {
            AlphaStream.init();
        });
    </script>

    <!-- Market Visualizations -->
    <script src="js/market_visualizations.js"></script>

</body>
</html>
<!-- Cache bust 1761275922 -->
